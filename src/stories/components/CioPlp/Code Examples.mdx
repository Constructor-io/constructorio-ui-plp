import { Meta, Markdown, Canvas } from '@storybook/blocks';
import * as CioPlpStories from './CioPlp.stories';
import RenderProps from './RenderProps.md?raw';
/* This "?raw" import raw text form the md file */

<Meta of={CioPlpStories} />

# `CioPlp`

The `<CioPlp/>` component is designed to simplify and enhance the way you manage and display product listings or similar content in your application.
This component offers a default layout for your PLP, while also serving as a versatile wrapper around other components, allowing for consistent context management and flexible content rendering.

**Key Features:**

- Default PLP Markup that includes: Product Grid, Filters, Sorting, Pagination
- Context Management: [Context values](./?path=/docs/components-cioplp--code-examples#arguments-passed-to-children-via-render-props) are accessible within children of CioPlp
- Identifies the current page context and renders Search or Browse accordingly

## Default render

Open in full screen here:

- <a href='./?path=/story/components-cioplp--search-plp'>Search</a>
- <a href='./?path=/story/components-cioplp--browse-plp'>Browse</a>

<Canvas of={CioPlpStories.SearchPlp} />

## Basic Example

This renders the PLP displayed above.

```jsx
import { CioPlp } from "@constructor-io/constructorio-ui-plp";
import "@constructor-io/constructorio-ui-plp/styles.css";

const DEMO_API_KEY = "key_M57QS8SMPdLdLx4x";

export default function MyComponent() {
  return <CioPlp apiKey={DEMO_API_KEY} />;
}
```

For a working example, visit our Code Sandbox:

- <a href='https://codesandbox.io/p/sandbox/constructorio-ui-plp-example-fpz8sz' target='_blank' rel='noopener noreferrer'> Code Sandbox Example <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-right-icon lucide-arrow-up-right"><path d="M7 7h10v10"/><path d="M7 17 17 7"/></svg></a>

## Render Props pattern

Take control of the rendering logic by using Render Props through `children`.
The [context](..?path=/docs/components-cioplp--code-examples#cioplp-context-value) will be passed along as props to your render function.

```jsx
import { CioPlp } from "@constructor-io/constructorio-ui-plp";
import "@constructor-io/constructorio-ui-plp/styles.css";

const DEMO_API_KEY = "key_M57QS8SMPdLdLx4x";

function MyCustomPlp(props) {
  const {
    cioClient,
    cioClientOptions,
    setCioClientOptions,
    formatters,
    itemFieldGetters,
    urlHelpers,
    callbacks,
  } = props;

  return <>{/* CUSTOM_MARKUP_HERE */}</>;
}

export default function MyComponent() {
  return (
    <CioPlp apiKey={DEMO_API_KEY}>
      {(props) => {
        return <MyCustomPlp {...props} />;
      }}
    </CioPlp>
  );
}
```

For a working example, visit our Code Sandbox:

- <a href='https://codesandbox.io/p/sandbox/constructorio-ui-plp-customization-example-sgdgkl?file=%2Fsrc%2Fcomponents%2FCustomCioPlp.js' target='_blank' rel='noopener noreferrer'> Code Sandbox Example - Custom Render <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-right-icon lucide-arrow-up-right"><path d="M7 7h10v10"/><path d="M7 17 17 7"/></svg></a>

### Arguments passed to children via Render Props

> Accessible to children of the CioPlp component via render props.
> or via useCioPlpContext() hook.

<Markdown>{RenderProps}</Markdown>
