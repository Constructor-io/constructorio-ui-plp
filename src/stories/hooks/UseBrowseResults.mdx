import { Meta, Canvas, Story, Controls, Source } from '@storybook/blocks';
import { Markdown } from '@storybook/blocks';
import meta, { Primary } from './UseBrowseResults.stories';

<Meta of={meta} />

# `[BETA] UseBrowseResults`
A React Hook to retrieve browse results using Constructor.

## Usage with CioPlp provider
```jsx
function MyCustomBrowseResultsComponent() {
  const { browseResults } = useBrowseResults();
  ...
}

function myApp() {
  ...
  return (
    <>
    <CioPlp apiKey={MY_API_KEY}>
      <MyCustomBrowseResultsComponent />
    </CioPlp>
    </>
  )
}
```


## Working Example
This is an example of how you might utilize the `useBrowseResults` hook in tandem with the `CioPlp` to retrieve browse results.

<Canvas withSource="none">
  <Story of={Primary} />
</Canvas>

<Controls of={Primary} />

### Working Example - Source Code 
```jsx
  import React from 'react';
  import { CioPlp, useBrowseResults }from '@constructor-io/constructorio-ui-plp'

  const apiKey = 'MY_API_KEY'

  // A simple React Component to showcase useBrowseResults with CioPlp provider
  function MyCustomBrowseResultsComponent() {
    const { browseResults } = useBrowseResults();

    return (
      <>
        <h2>Result Id </h2>
        <div>{JSON.stringify(browseResults?.resultId)}</div>
        <h2>Total Number of Results </h2>
        <div>{JSON.stringify(browseResults?.response?.totalNumResults)}</div>
        <h2>Array of Groups</h2>
        <div>{JSON.stringify(browseResults?.response?.groups)}</div>
        <h2>Array of Facets</h2>
        <div>{JSON.stringify(browseResults?.response?.facets)}</div>
        <h2>Array of Sort Options</h2>
        <div>{JSON.stringify(browseResults?.response?.sortOptions)}</div>
        <h2>Array of Results</h2>
        <div>{JSON.stringify(browseResults?.response?.results)}</div>
      </>
    );
  }

  // Main Component
  function useBrowseResultsExample() {
    const [filterValue] = useState('this-is-a-fake-group_as_recommended-by-constructor')

    return (
      <>
        <h1>useBrowsesResults</h1>
        <p>This hook returns an object with the following properties:</p>
        <CioPlp apiKey={MY_API_KEY}>
          <MyCustomBrowseResultsComponent />
        </CioPlp>
      </>
    );
  }
```
