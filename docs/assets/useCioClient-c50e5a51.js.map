{"version":3,"file":"useCioClient-c50e5a51.js","sources":["../../src/constants.ts","../../node_modules/@babel/runtime/helpers/interopRequireDefault.js","../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../node_modules/@babel/runtime/helpers/toPrimitive.js","../../node_modules/@babel/runtime/helpers/toPropertyKey.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../node_modules/@constructor-io/constructorio-id/src/constructorio-id.js","../../node_modules/fetch-ponyfill/build/fetch-browser.js","../../node_modules/crc-32/crc32.js","../../node_modules/store2/dist/store2.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/utils/store.overflow.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/utils/store.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/utils/helpers.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/utils/event-dispatcher.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/modules/search.js","../../node_modules/@babel/runtime/helpers/defineProperty.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/modules/browse.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/modules/autocomplete.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/modules/recommendations.js","../../node_modules/events/events.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/utils/botlist.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/utils/humanity-check.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/utils/request-queue.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/modules/tracker.js","../../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../../node_modules/@babel/runtime/helpers/iterableToArray.js","../../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../../node_modules/@babel/runtime/helpers/toConsumableArray.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/modules/quizzes.js","../../node_modules/@constructor-io/constructorio-client-javascript/lib/constructorio.js","../../src/hooks/useCioClient.ts"],"sourcesContent":["// eslint-disable-next-line import/prefer-default-export\nexport const DEMO_API_KEY = 'key_M57QS8SMPdLdLx4x';\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","(function () {\n  // Object.assign polyfill\n  // - https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n  Object.assign || Object.defineProperty(Object, 'assign', {enumerable: !1, configurable: !0, writable: !0, value: function (e) {'use strict'; if (void 0 === e || e === null) throw new TypeError('Cannot convert first argument to object'); for (var r = Object(e), t = 1; t < arguments.length; t++) {var n = arguments[t]; if (void 0 !== n && n !== null) {n = Object(n); for (var o = Object.keys(Object(n)), a = 0, c = o.length; c > a; a++) {var i = o[a], b = Object.getOwnPropertyDescriptor(n, i); void 0 !== b && b.enumerable && (r[i] = n[i]);}}} return r;}}); // eslint-disable-line\n\n  var ConstructorioID = function (options) {\n    var defaults = {\n      user_agent: null,\n      persist: true,\n      cookie_name_client_id: 'ConstructorioID_client_id',\n      cookie_name_session_id: 'ConstructorioID_session_id',\n      cookie_name_session_data: 'ConstructorioID_session',\n      cookie_domain: null,\n      cookie_secure: null, // null, true\n      cookie_samesite: null, // null, Lax, Strict\n      cookie_days_to_live: 365,\n      local_name_client_id: '_constructorio_search_client_id',\n      local_name_session_id: '_constructorio_search_session_id',\n      local_name_session_data: '_constructorio_search_session',\n      on_node: typeof window === 'undefined',\n      session_is_new: null,\n      client_id_storage_location: 'cookie',\n      session_id_storage_location: 'local'\n    };\n\n    Object.assign(this, defaults, options);\n\n    if (!this.client_id) {\n      if (!this.on_node && this.persist) {\n        var persisted_id;\n\n        if (this.client_id_storage_location === 'cookie') {\n          persisted_id = this.get_cookie(this.cookie_name_client_id);\n        }\n\n        if (this.client_id_storage_location === 'local') {\n          persisted_id = this.get_local_object(this.local_name_client_id);\n        }\n\n        this.client_id = persisted_id ? persisted_id : this.generate_client_id();\n      } else {\n        this.client_id = this.generate_client_id();\n      }\n    }\n\n    if (!this.session_id) {\n      if (!this.on_node && this.persist) {\n        this.session_id = this.generate_session_id();\n      } else {\n        this.session_id = 1;\n      }\n    }\n\n    if (!this.on_node) {\n      this.user_agent = this.user_agent || (window && window.navigator && window.navigator.userAgent);\n    }\n  };\n\n  ConstructorioID.prototype.set_cookie = function (name, value) {\n    if (!this.on_node && this.persist) {\n      var expires = new Date(Date.now() + this.cookie_days_to_live * 24 * 60 * 60 * 1000);\n      var cookie_data = name + '=' + value + '; expires=' + expires.toUTCString() + '; path=/';\n      if (this.cookie_domain) {\n        cookie_data += '; domain=' + this.cookie_domain;\n      }\n      if (this.cookie_secure) {\n        cookie_data += '; secure';\n      }\n      if (this.cookie_samesite) {\n        cookie_data += '; samesite=' + this.cookie_samesite;\n      }\n      document.cookie = cookie_data;\n\n      // For testing purposes\n      return cookie_data;\n    }\n\n    return null;\n  };\n\n  ConstructorioID.prototype.get_cookie = function (name) {\n    var cookieName = name + '=';\n    var cookieBits = document.cookie.split(';');\n    for (var i = 0; i < cookieBits.length; i++) {\n      var thisCookie = cookieBits[i];\n\n      try {\n        var decodedCookie = decodeURIComponent(thisCookie);\n\n        while (decodedCookie.charAt(0) === ' ') { // remove leading spaces\n          decodedCookie = decodedCookie.substring(1);\n        }\n\n        if (decodedCookie.indexOf(cookieName) === 0) {\n          return decodedCookie.substring(cookieName.length, decodedCookie.length);\n        }\n      } catch (e) {\n        // do nothing\n      }\n    }\n\n    return undefined; // eslint-disable-line\n  };\n\n  ConstructorioID.prototype.delete_cookie = function (name) {\n    document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n  };\n\n  ConstructorioID.prototype.generate_client_id = function () {\n    var client_id;\n\n    if (!this.on_node) {\n      var cookie_persisted_client_id = this.get_cookie(this.cookie_name_client_id);\n      var local_persisted_client_id = this.get_local_object(this.local_name_client_id);\n\n      if (this.client_id_storage_location === 'cookie') {\n        if (local_persisted_client_id) {\n          client_id = local_persisted_client_id;\n          this.set_cookie(this.cookie_name_client_id, client_id);\n          this.delete_local_object(this.local_name_client_id);\n        }\n      }\n\n      if (this.client_id_storage_location === 'local') {\n        if (cookie_persisted_client_id) {\n          client_id = cookie_persisted_client_id;\n          this.set_local_object(this.local_name_client_id, client_id);\n          this.delete_cookie(this.cookie_name_client_id);\n        }\n      }\n    }\n\n    if (!client_id) {\n      client_id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0;\n        var v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n      });\n\n      if (this.client_id_storage_location === 'cookie') {\n        this.set_cookie(this.cookie_name_client_id, client_id);\n      }\n\n      if (this.client_id_storage_location === 'local') {\n        this.set_local_object(this.local_name_client_id, client_id);\n      }\n    }\n\n    return client_id;\n  };\n\n  ConstructorioID.prototype.get_local_object = function (key) {\n    var data;\n    var localStorage = window && window.localStorage;\n    if (localStorage && typeof key  === 'string') {\n      try {\n        data = JSON.parse(localStorage.getItem(key));\n      } catch (e) {\n        data = localStorage.getItem(key);\n      }\n    }\n    return data;\n  };\n\n  ConstructorioID.prototype.set_local_object = function (key, data) {\n    var localStorage = window && window.localStorage;\n\n    if (localStorage && typeof key === 'string') {\n      if (typeof data === 'object') {\n        try {\n          localStorage.setItem(key, JSON.stringify(data));\n        } catch (e) {\n          // fail silently\n        }\n      }\n\n      if (typeof data === 'string' || typeof data === 'number') {\n        try {\n          localStorage.setItem(key, data);\n        } catch (e) {\n          // fail silently\n        }\n      }\n    }\n  };\n\n  ConstructorioID.prototype.delete_local_object = function (key) {\n    var localStorage = window && window.localStorage;\n\n    if (localStorage && typeof key === 'string') {\n      try {\n        localStorage.removeItem(key);\n      } catch (e) {\n        // fail silently\n      }\n    }\n  };\n\n  ConstructorioID.prototype.generate_session_id = function () {\n    var cookie_persisted_session_data = this.get_cookie(this.cookie_name_session_data);\n    var local_persisted_session_data = this.get_local_object(this.local_name_session_data);\n    var now = Date.now();\n    var thirtyMinutes = 1000 * 60 * 30;\n    var sessionData;\n\n    if (this.session_id_storage_location === 'local') {\n      sessionData = this.get_local_object(this.local_name_session_data);\n\n      if (!sessionData && cookie_persisted_session_data) {\n        sessionData = cookie_persisted_session_data;\n\n        this.delete_cookie(this.cookie_name_session_data);\n      }\n    }\n\n    if (this.session_id_storage_location === 'cookie') {\n      sessionData = this.get_cookie(this.cookie_name_session_data);\n\n      try {\n        sessionData = JSON.parse(sessionData);\n      } catch (e) {\n        // fail silently\n      }\n\n      if (!sessionData && local_persisted_session_data) {\n        sessionData = local_persisted_session_data;\n\n        this.delete_local_object(this.local_name_session_data);\n      }\n    }\n\n    var sessionId = 1;\n    var sessionDataId = 1;\n\n    if (sessionData && typeof sessionData === 'object') {\n      sessionDataId = parseInt(sessionData.sessionId, 10) || 1;\n\n      if (sessionData.lastTime > now - thirtyMinutes) {\n        sessionId = sessionDataId;\n      } else {\n        sessionId = sessionDataId + 1;\n      }\n    }\n\n    this.session_id = sessionId;\n    this.session_is_new = sessionData && sessionDataId === sessionId ? false : true;\n\n    if (this.session_id_storage_location === 'local') {\n      this.set_local_object(this.local_name_session_id, sessionId);\n      this.set_local_object(this.local_name_session_data, {\n        sessionId: sessionId,\n        lastTime: now\n      });\n    }\n\n    if (this.session_id_storage_location === 'cookie') {\n      this.set_cookie(this.cookie_name_session_id, sessionId);\n      this.set_cookie(this.cookie_name_session_data, JSON.stringify({\n        sessionId: sessionId,\n        lastTime: now\n      }));\n    }\n\n    return sessionId;\n  };\n\n  // export module for node or environments with module loaders, such as webpack\n  if (typeof module !== 'undefined' && typeof require !== 'undefined') {\n    module.exports = ConstructorioID;\n  }\n})();\n","(function (global) {\n  'use strict';\n\n  function fetchPonyfill(options) {\n    var Promise = options && options.Promise || global.Promise;\n    var XMLHttpRequest = options && options.XMLHttpRequest || global.XMLHttpRequest;\n\n    return (function () {\n      var globalThis = Object.create(global, {\n        fetch: {\n          value: undefined,\n          writable: true\n        }\n      });\n\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n        typeof define === 'function' && define.amd ? define(['exports'], factory) :\n        (factory((global.WHATWGFetch = {})));\n      }(this, (function (exports) { 'use strict';\n\n        var global =\n          (typeof globalThis !== 'undefined' && globalThis) ||\n          (typeof self !== 'undefined' && self) ||\n          (typeof global !== 'undefined' && global);\n\n        var support = {\n          searchParams: 'URLSearchParams' in global,\n          iterable: 'Symbol' in global && 'iterator' in Symbol,\n          blob:\n            'FileReader' in global &&\n            'Blob' in global &&\n            (function() {\n              try {\n                new Blob();\n                return true\n              } catch (e) {\n                return false\n              }\n            })(),\n          formData: 'FormData' in global,\n          arrayBuffer: 'ArrayBuffer' in global\n        };\n\n        function isDataView(obj) {\n          return obj && DataView.prototype.isPrototypeOf(obj)\n        }\n\n        if (support.arrayBuffer) {\n          var viewClasses = [\n            '[object Int8Array]',\n            '[object Uint8Array]',\n            '[object Uint8ClampedArray]',\n            '[object Int16Array]',\n            '[object Uint16Array]',\n            '[object Int32Array]',\n            '[object Uint32Array]',\n            '[object Float32Array]',\n            '[object Float64Array]'\n          ];\n\n          var isArrayBufferView =\n            ArrayBuffer.isView ||\n            function(obj) {\n              return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n            };\n        }\n\n        function normalizeName(name) {\n          if (typeof name !== 'string') {\n            name = String(name);\n          }\n          if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n            throw new TypeError('Invalid character in header field name')\n          }\n          return name.toLowerCase()\n        }\n\n        function normalizeValue(value) {\n          if (typeof value !== 'string') {\n            value = String(value);\n          }\n          return value\n        }\n\n        // Build a destructive iterator for the value list\n        function iteratorFor(items) {\n          var iterator = {\n            next: function() {\n              var value = items.shift();\n              return {done: value === undefined, value: value}\n            }\n          };\n\n          if (support.iterable) {\n            iterator[Symbol.iterator] = function() {\n              return iterator\n            };\n          }\n\n          return iterator\n        }\n\n        function Headers(headers) {\n          this.map = {};\n\n          if (headers instanceof Headers) {\n            headers.forEach(function(value, name) {\n              this.append(name, value);\n            }, this);\n          } else if (Array.isArray(headers)) {\n            headers.forEach(function(header) {\n              this.append(header[0], header[1]);\n            }, this);\n          } else if (headers) {\n            Object.getOwnPropertyNames(headers).forEach(function(name) {\n              this.append(name, headers[name]);\n            }, this);\n          }\n        }\n\n        Headers.prototype.append = function(name, value) {\n          name = normalizeName(name);\n          value = normalizeValue(value);\n          var oldValue = this.map[name];\n          this.map[name] = oldValue ? oldValue + ', ' + value : value;\n        };\n\n        Headers.prototype['delete'] = function(name) {\n          delete this.map[normalizeName(name)];\n        };\n\n        Headers.prototype.get = function(name) {\n          name = normalizeName(name);\n          return this.has(name) ? this.map[name] : null\n        };\n\n        Headers.prototype.has = function(name) {\n          return this.map.hasOwnProperty(normalizeName(name))\n        };\n\n        Headers.prototype.set = function(name, value) {\n          this.map[normalizeName(name)] = normalizeValue(value);\n        };\n\n        Headers.prototype.forEach = function(callback, thisArg) {\n          for (var name in this.map) {\n            if (this.map.hasOwnProperty(name)) {\n              callback.call(thisArg, this.map[name], name, this);\n            }\n          }\n        };\n\n        Headers.prototype.keys = function() {\n          var items = [];\n          this.forEach(function(value, name) {\n            items.push(name);\n          });\n          return iteratorFor(items)\n        };\n\n        Headers.prototype.values = function() {\n          var items = [];\n          this.forEach(function(value) {\n            items.push(value);\n          });\n          return iteratorFor(items)\n        };\n\n        Headers.prototype.entries = function() {\n          var items = [];\n          this.forEach(function(value, name) {\n            items.push([name, value]);\n          });\n          return iteratorFor(items)\n        };\n\n        if (support.iterable) {\n          Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n        }\n\n        function consumed(body) {\n          if (body.bodyUsed) {\n            return Promise.reject(new TypeError('Already read'))\n          }\n          body.bodyUsed = true;\n        }\n\n        function fileReaderReady(reader) {\n          return new Promise(function(resolve, reject) {\n            reader.onload = function() {\n              resolve(reader.result);\n            };\n            reader.onerror = function() {\n              reject(reader.error);\n            };\n          })\n        }\n\n        function readBlobAsArrayBuffer(blob) {\n          var reader = new FileReader();\n          var promise = fileReaderReady(reader);\n          reader.readAsArrayBuffer(blob);\n          return promise\n        }\n\n        function readBlobAsText(blob) {\n          var reader = new FileReader();\n          var promise = fileReaderReady(reader);\n          reader.readAsText(blob);\n          return promise\n        }\n\n        function readArrayBufferAsText(buf) {\n          var view = new Uint8Array(buf);\n          var chars = new Array(view.length);\n\n          for (var i = 0; i < view.length; i++) {\n            chars[i] = String.fromCharCode(view[i]);\n          }\n          return chars.join('')\n        }\n\n        function bufferClone(buf) {\n          if (buf.slice) {\n            return buf.slice(0)\n          } else {\n            var view = new Uint8Array(buf.byteLength);\n            view.set(new Uint8Array(buf));\n            return view.buffer\n          }\n        }\n\n        function Body() {\n          this.bodyUsed = false;\n\n          this._initBody = function(body) {\n            /*\n              fetch-mock wraps the Response object in an ES6 Proxy to\n              provide useful test harness features such as flush. However, on\n              ES5 browsers without fetch or Proxy support pollyfills must be used;\n              the proxy-pollyfill is unable to proxy an attribute unless it exists\n              on the object before the Proxy is created. This change ensures\n              Response.bodyUsed exists on the instance, while maintaining the\n              semantic of setting Request.bodyUsed in the constructor before\n              _initBody is called.\n            */\n            this.bodyUsed = this.bodyUsed;\n            this._bodyInit = body;\n            if (!body) {\n              this._bodyText = '';\n            } else if (typeof body === 'string') {\n              this._bodyText = body;\n            } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n              this._bodyBlob = body;\n            } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n              this._bodyFormData = body;\n            } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n              this._bodyText = body.toString();\n            } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n              this._bodyArrayBuffer = bufferClone(body.buffer);\n              // IE 10-11 can't handle a DataView body.\n              this._bodyInit = new Blob([this._bodyArrayBuffer]);\n            } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n              this._bodyArrayBuffer = bufferClone(body);\n            } else {\n              this._bodyText = body = Object.prototype.toString.call(body);\n            }\n\n            if (!this.headers.get('content-type')) {\n              if (typeof body === 'string') {\n                this.headers.set('content-type', 'text/plain;charset=UTF-8');\n              } else if (this._bodyBlob && this._bodyBlob.type) {\n                this.headers.set('content-type', this._bodyBlob.type);\n              } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n                this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n              }\n            }\n          };\n\n          if (support.blob) {\n            this.blob = function() {\n              var rejected = consumed(this);\n              if (rejected) {\n                return rejected\n              }\n\n              if (this._bodyBlob) {\n                return Promise.resolve(this._bodyBlob)\n              } else if (this._bodyArrayBuffer) {\n                return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n              } else if (this._bodyFormData) {\n                throw new Error('could not read FormData body as blob')\n              } else {\n                return Promise.resolve(new Blob([this._bodyText]))\n              }\n            };\n\n            this.arrayBuffer = function() {\n              if (this._bodyArrayBuffer) {\n                var isConsumed = consumed(this);\n                if (isConsumed) {\n                  return isConsumed\n                }\n                if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n                  return Promise.resolve(\n                    this._bodyArrayBuffer.buffer.slice(\n                      this._bodyArrayBuffer.byteOffset,\n                      this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n                    )\n                  )\n                } else {\n                  return Promise.resolve(this._bodyArrayBuffer)\n                }\n              } else {\n                return this.blob().then(readBlobAsArrayBuffer)\n              }\n            };\n          }\n\n          this.text = function() {\n            var rejected = consumed(this);\n            if (rejected) {\n              return rejected\n            }\n\n            if (this._bodyBlob) {\n              return readBlobAsText(this._bodyBlob)\n            } else if (this._bodyArrayBuffer) {\n              return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n            } else if (this._bodyFormData) {\n              throw new Error('could not read FormData body as text')\n            } else {\n              return Promise.resolve(this._bodyText)\n            }\n          };\n\n          if (support.formData) {\n            this.formData = function() {\n              return this.text().then(decode)\n            };\n          }\n\n          this.json = function() {\n            return this.text().then(JSON.parse)\n          };\n\n          return this\n        }\n\n        // HTTP methods whose capitalization should be normalized\n        var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n        function normalizeMethod(method) {\n          var upcased = method.toUpperCase();\n          return methods.indexOf(upcased) > -1 ? upcased : method\n        }\n\n        function Request(input, options) {\n          if (!(this instanceof Request)) {\n            throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n          }\n\n          options = options || {};\n          var body = options.body;\n\n          if (input instanceof Request) {\n            if (input.bodyUsed) {\n              throw new TypeError('Already read')\n            }\n            this.url = input.url;\n            this.credentials = input.credentials;\n            if (!options.headers) {\n              this.headers = new Headers(input.headers);\n            }\n            this.method = input.method;\n            this.mode = input.mode;\n            this.signal = input.signal;\n            if (!body && input._bodyInit != null) {\n              body = input._bodyInit;\n              input.bodyUsed = true;\n            }\n          } else {\n            this.url = String(input);\n          }\n\n          this.credentials = options.credentials || this.credentials || 'same-origin';\n          if (options.headers || !this.headers) {\n            this.headers = new Headers(options.headers);\n          }\n          this.method = normalizeMethod(options.method || this.method || 'GET');\n          this.mode = options.mode || this.mode || null;\n          this.signal = options.signal || this.signal;\n          this.referrer = null;\n\n          if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n            throw new TypeError('Body not allowed for GET or HEAD requests')\n          }\n          this._initBody(body);\n\n          if (this.method === 'GET' || this.method === 'HEAD') {\n            if (options.cache === 'no-store' || options.cache === 'no-cache') {\n              // Search for a '_' parameter in the query string\n              var reParamSearch = /([?&])_=[^&]*/;\n              if (reParamSearch.test(this.url)) {\n                // If it already exists then set the value with the current time\n                this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());\n              } else {\n                // Otherwise add a new '_' parameter to the end with the current time\n                var reQueryString = /\\?/;\n                this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime();\n              }\n            }\n          }\n        }\n\n        Request.prototype.clone = function() {\n          return new Request(this, {body: this._bodyInit})\n        };\n\n        function decode(body) {\n          var form = new FormData();\n          body\n            .trim()\n            .split('&')\n            .forEach(function(bytes) {\n              if (bytes) {\n                var split = bytes.split('=');\n                var name = split.shift().replace(/\\+/g, ' ');\n                var value = split.join('=').replace(/\\+/g, ' ');\n                form.append(decodeURIComponent(name), decodeURIComponent(value));\n              }\n            });\n          return form\n        }\n\n        function parseHeaders(rawHeaders) {\n          var headers = new Headers();\n          // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n          // https://tools.ietf.org/html/rfc7230#section-3.2\n          var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n          // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n          // https://github.com/github/fetch/issues/748\n          // https://github.com/zloirock/core-js/issues/751\n          preProcessedHeaders\n            .split('\\r')\n            .map(function(header) {\n              return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n            })\n            .forEach(function(line) {\n              var parts = line.split(':');\n              var key = parts.shift().trim();\n              if (key) {\n                var value = parts.join(':').trim();\n                headers.append(key, value);\n              }\n            });\n          return headers\n        }\n\n        Body.call(Request.prototype);\n\n        function Response(bodyInit, options) {\n          if (!(this instanceof Response)) {\n            throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n          }\n          if (!options) {\n            options = {};\n          }\n\n          this.type = 'default';\n          this.status = options.status === undefined ? 200 : options.status;\n          this.ok = this.status >= 200 && this.status < 300;\n          this.statusText = 'statusText' in options ? options.statusText : '';\n          this.headers = new Headers(options.headers);\n          this.url = options.url || '';\n          this._initBody(bodyInit);\n        }\n\n        Body.call(Response.prototype);\n\n        Response.prototype.clone = function() {\n          return new Response(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new Headers(this.headers),\n            url: this.url\n          })\n        };\n\n        Response.error = function() {\n          var response = new Response(null, {status: 0, statusText: ''});\n          response.type = 'error';\n          return response\n        };\n\n        var redirectStatuses = [301, 302, 303, 307, 308];\n\n        Response.redirect = function(url, status) {\n          if (redirectStatuses.indexOf(status) === -1) {\n            throw new RangeError('Invalid status code')\n          }\n\n          return new Response(null, {status: status, headers: {location: url}})\n        };\n\n        exports.DOMException = global.DOMException;\n        try {\n          new exports.DOMException();\n        } catch (err) {\n          exports.DOMException = function(message, name) {\n            this.message = message;\n            this.name = name;\n            var error = Error(message);\n            this.stack = error.stack;\n          };\n          exports.DOMException.prototype = Object.create(Error.prototype);\n          exports.DOMException.prototype.constructor = exports.DOMException;\n        }\n\n        function fetch(input, init) {\n          return new Promise(function(resolve, reject) {\n            var request = new Request(input, init);\n\n            if (request.signal && request.signal.aborted) {\n              return reject(new exports.DOMException('Aborted', 'AbortError'))\n            }\n\n            var xhr = new XMLHttpRequest();\n\n            function abortXhr() {\n              xhr.abort();\n            }\n\n            xhr.onload = function() {\n              var options = {\n                status: xhr.status,\n                statusText: xhr.statusText,\n                headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n              };\n              options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n              var body = 'response' in xhr ? xhr.response : xhr.responseText;\n              setTimeout(function() {\n                resolve(new Response(body, options));\n              }, 0);\n            };\n\n            xhr.onerror = function() {\n              setTimeout(function() {\n                reject(new TypeError('Network request failed'));\n              }, 0);\n            };\n\n            xhr.ontimeout = function() {\n              setTimeout(function() {\n                reject(new TypeError('Network request failed'));\n              }, 0);\n            };\n\n            xhr.onabort = function() {\n              setTimeout(function() {\n                reject(new exports.DOMException('Aborted', 'AbortError'));\n              }, 0);\n            };\n\n            function fixUrl(url) {\n              try {\n                return url === '' && global.location.href ? global.location.href : url\n              } catch (e) {\n                return url\n              }\n            }\n\n            xhr.open(request.method, fixUrl(request.url), true);\n\n            if (request.credentials === 'include') {\n              xhr.withCredentials = true;\n            } else if (request.credentials === 'omit') {\n              xhr.withCredentials = false;\n            }\n\n            if ('responseType' in xhr) {\n              if (support.blob) {\n                xhr.responseType = 'blob';\n              } else if (\n                support.arrayBuffer &&\n                request.headers.get('Content-Type') &&\n                request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1\n              ) {\n                xhr.responseType = 'arraybuffer';\n              }\n            }\n\n            if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {\n              Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n                xhr.setRequestHeader(name, normalizeValue(init.headers[name]));\n              });\n            } else {\n              request.headers.forEach(function(value, name) {\n                xhr.setRequestHeader(name, value);\n              });\n            }\n\n            if (request.signal) {\n              request.signal.addEventListener('abort', abortXhr);\n\n              xhr.onreadystatechange = function() {\n                // DONE (success or failure)\n                if (xhr.readyState === 4) {\n                  request.signal.removeEventListener('abort', abortXhr);\n                }\n              };\n            }\n\n            xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n          })\n        }\n\n        fetch.polyfill = true;\n\n        if (!global.fetch) {\n          global.fetch = fetch;\n          global.Headers = Headers;\n          global.Request = Request;\n          global.Response = Response;\n        }\n\n        exports.Headers = Headers;\n        exports.Request = Request;\n        exports.Response = Response;\n        exports.fetch = fetch;\n\n        Object.defineProperty(exports, '__esModule', { value: true });\n\n      })));\n\n\n      return {\n        fetch: globalThis.fetch,\n        Headers: globalThis.Headers,\n        Request: globalThis.Request,\n        Response: globalThis.Response,\n        DOMException: globalThis.DOMException\n      };\n    }());\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return fetchPonyfill;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = fetchPonyfill;\n  } else {\n    global.fetchPonyfill = fetchPonyfill;\n  }\n}(typeof globalThis !== 'undefined' ? globalThis : typeof self !== 'undefined' ? self : typeof global !== 'undefined' ? global : this));\n\n","/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */\n/* vim: set ts=2: */\n/*exported CRC32 */\nvar CRC32;\n(function (factory) {\n\t/*jshint ignore:start */\n\t/*eslint-disable */\n\tif(typeof DO_NOT_EXPORT_CRC === 'undefined') {\n\t\tif('object' === typeof exports) {\n\t\t\tfactory(exports);\n\t\t} else if ('function' === typeof define && define.amd) {\n\t\t\tdefine(function () {\n\t\t\t\tvar module = {};\n\t\t\t\tfactory(module);\n\t\t\t\treturn module;\n\t\t\t});\n\t\t} else {\n\t\t\tfactory(CRC32 = {});\n\t\t}\n\t} else {\n\t\tfactory(CRC32 = {});\n\t}\n\t/*eslint-enable */\n\t/*jshint ignore:end */\n}(function(CRC32) {\nCRC32.version = '1.2.2';\n/*global Int32Array */\nfunction signed_crc_table() {\n\tvar c = 0, table = new Array(256);\n\n\tfor(var n =0; n != 256; ++n){\n\t\tc = n;\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\ttable[n] = c;\n\t}\n\n\treturn typeof Int32Array !== 'undefined' ? new Int32Array(table) : table;\n}\n\nvar T0 = signed_crc_table();\nfunction slice_by_16_tables(T) {\n\tvar c = 0, v = 0, n = 0, table = typeof Int32Array !== 'undefined' ? new Int32Array(4096) : new Array(4096) ;\n\n\tfor(n = 0; n != 256; ++n) table[n] = T[n];\n\tfor(n = 0; n != 256; ++n) {\n\t\tv = T[n];\n\t\tfor(c = 256 + n; c < 4096; c += 256) v = table[c] = (v >>> 8) ^ T[v & 0xFF];\n\t}\n\tvar out = [];\n\tfor(n = 1; n != 16; ++n) out[n - 1] = typeof Int32Array !== 'undefined' ? table.subarray(n * 256, n * 256 + 256) : table.slice(n * 256, n * 256 + 256);\n\treturn out;\n}\nvar TT = slice_by_16_tables(T0);\nvar T1 = TT[0],  T2 = TT[1],  T3 = TT[2],  T4 = TT[3],  T5 = TT[4];\nvar T6 = TT[5],  T7 = TT[6],  T8 = TT[7],  T9 = TT[8],  Ta = TT[9];\nvar Tb = TT[10], Tc = TT[11], Td = TT[12], Te = TT[13], Tf = TT[14];\nfunction crc32_bstr(bstr, seed) {\n\tvar C = seed ^ -1;\n\tfor(var i = 0, L = bstr.length; i < L;) C = (C>>>8) ^ T0[(C^bstr.charCodeAt(i++))&0xFF];\n\treturn ~C;\n}\n\nfunction crc32_buf(B, seed) {\n\tvar C = seed ^ -1, L = B.length - 15, i = 0;\n\tfor(; i < L;) C =\n\t\tTf[B[i++] ^ (C & 255)] ^\n\t\tTe[B[i++] ^ ((C >> 8) & 255)] ^\n\t\tTd[B[i++] ^ ((C >> 16) & 255)] ^\n\t\tTc[B[i++] ^ (C >>> 24)] ^\n\t\tTb[B[i++]] ^ Ta[B[i++]] ^ T9[B[i++]] ^ T8[B[i++]] ^\n\t\tT7[B[i++]] ^ T6[B[i++]] ^ T5[B[i++]] ^ T4[B[i++]] ^\n\t\tT3[B[i++]] ^ T2[B[i++]] ^ T1[B[i++]] ^ T0[B[i++]];\n\tL += 15;\n\twhile(i < L) C = (C>>>8) ^ T0[(C^B[i++])&0xFF];\n\treturn ~C;\n}\n\nfunction crc32_str(str, seed) {\n\tvar C = seed ^ -1;\n\tfor(var i = 0, L = str.length, c = 0, d = 0; i < L;) {\n\t\tc = str.charCodeAt(i++);\n\t\tif(c < 0x80) {\n\t\t\tC = (C>>>8) ^ T0[(C^c)&0xFF];\n\t\t} else if(c < 0x800) {\n\t\t\tC = (C>>>8) ^ T0[(C ^ (192|((c>>6)&31)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];\n\t\t} else if(c >= 0xD800 && c < 0xE000) {\n\t\t\tc = (c&1023)+64; d = str.charCodeAt(i++)&1023;\n\t\t\tC = (C>>>8) ^ T0[(C ^ (240|((c>>8)&7)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((c>>2)&63)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((d>>6)&15)|((c&3)<<4)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(d&63)))&0xFF];\n\t\t} else {\n\t\t\tC = (C>>>8) ^ T0[(C ^ (224|((c>>12)&15)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((c>>6)&63)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];\n\t\t}\n\t}\n\treturn ~C;\n}\nCRC32.table = T0;\n// $FlowIgnore\nCRC32.bstr = crc32_bstr;\n// $FlowIgnore\nCRC32.buf = crc32_buf;\n// $FlowIgnore\nCRC32.str = crc32_str;\n}));\n","/*! store2 - v2.14.2 - 2022-07-18\n* Copyright (c) 2022 Nathan Bubna; Licensed (MIT OR GPL-3.0) */\n;(function(window, define) {\n    var _ = {\n        version: \"2.14.2\",\n        areas: {},\n        apis: {},\n        nsdelim: '.',\n\n        // utilities\n        inherit: function(api, o) {\n            for (var p in api) {\n                if (!o.hasOwnProperty(p)) {\n                    Object.defineProperty(o, p, Object.getOwnPropertyDescriptor(api, p));\n                }\n            }\n            return o;\n        },\n        stringify: function(d, fn) {\n            return d === undefined || typeof d === \"function\" ? d+'' : JSON.stringify(d,fn||_.replace);\n        },\n        parse: function(s, fn) {\n            // if it doesn't parse, return as is\n            try{ return JSON.parse(s,fn||_.revive); }catch(e){ return s; }\n        },\n\n        // extension hooks\n        fn: function(name, fn) {\n            _.storeAPI[name] = fn;\n            for (var api in _.apis) {\n                _.apis[api][name] = fn;\n            }\n        },\n        get: function(area, key){ return area.getItem(key); },\n        set: function(area, key, string){ area.setItem(key, string); },\n        remove: function(area, key){ area.removeItem(key); },\n        key: function(area, i){ return area.key(i); },\n        length: function(area){ return area.length; },\n        clear: function(area){ area.clear(); },\n\n        // core functions\n        Store: function(id, area, namespace) {\n            var store = _.inherit(_.storeAPI, function(key, data, overwrite) {\n                if (arguments.length === 0){ return store.getAll(); }\n                if (typeof data === \"function\"){ return store.transact(key, data, overwrite); }// fn=data, alt=overwrite\n                if (data !== undefined){ return store.set(key, data, overwrite); }\n                if (typeof key === \"string\" || typeof key === \"number\"){ return store.get(key); }\n                if (typeof key === \"function\"){ return store.each(key); }\n                if (!key){ return store.clear(); }\n                return store.setAll(key, data);// overwrite=data, data=key\n            });\n            store._id = id;\n            try {\n                var testKey = '__store2_test';\n                area.setItem(testKey, 'ok');\n                store._area = area;\n                area.removeItem(testKey);\n            } catch (e) {\n                store._area = _.storage('fake');\n            }\n            store._ns = namespace || '';\n            if (!_.areas[id]) {\n                _.areas[id] = store._area;\n            }\n            if (!_.apis[store._ns+store._id]) {\n                _.apis[store._ns+store._id] = store;\n            }\n            return store;\n        },\n        storeAPI: {\n            // admin functions\n            area: function(id, area) {\n                var store = this[id];\n                if (!store || !store.area) {\n                    store = _.Store(id, area, this._ns);//new area-specific api in this namespace\n                    if (!this[id]){ this[id] = store; }\n                }\n                return store;\n            },\n            namespace: function(namespace, singleArea, delim) {\n                delim = delim || this._delim || _.nsdelim;\n                if (!namespace){\n                    return this._ns ? this._ns.substring(0,this._ns.length-delim.length) : '';\n                }\n                var ns = namespace, store = this[ns];\n                if (!store || !store.namespace) {\n                    store = _.Store(this._id, this._area, this._ns+ns+delim);//new namespaced api\n                    store._delim = delim;\n                    if (!this[ns]){ this[ns] = store; }\n                    if (!singleArea) {\n                        for (var name in _.areas) {\n                            store.area(name, _.areas[name]);\n                        }\n                    }\n                }\n                return store;\n            },\n            isFake: function(force) {\n                if (force) {\n                    this._real = this._area;\n                    this._area = _.storage('fake');\n                } else if (force === false) {\n                    this._area = this._real || this._area;\n                }\n                return this._area.name === 'fake';\n            },\n            toString: function() {\n                return 'store'+(this._ns?'.'+this.namespace():'')+'['+this._id+']';\n            },\n\n            // storage functions\n            has: function(key) {\n                if (this._area.has) {\n                    return this._area.has(this._in(key));//extension hook\n                }\n                return !!(this._in(key) in this._area);\n            },\n            size: function(){ return this.keys().length; },\n            each: function(fn, fill) {// fill is used by keys(fillList) and getAll(fillList))\n                for (var i=0, m=_.length(this._area); i<m; i++) {\n                    var key = this._out(_.key(this._area, i));\n                    if (key !== undefined) {\n                        if (fn.call(this, key, this.get(key), fill) === false) {\n                            break;\n                        }\n                    }\n                    if (m > _.length(this._area)) { m--; i--; }// in case of removeItem\n                }\n                return fill || this;\n            },\n            keys: function(fillList) {\n                return this.each(function(k, v, list){ list.push(k); }, fillList || []);\n            },\n            get: function(key, alt) {\n                var s = _.get(this._area, this._in(key)),\n                    fn;\n                if (typeof alt === \"function\") {\n                    fn = alt;\n                    alt = null;\n                }\n                return s !== null ? _.parse(s, fn) :\n                    alt != null ? alt : s;\n            },\n            getAll: function(fillObj) {\n                return this.each(function(k, v, all){ all[k] = v; }, fillObj || {});\n            },\n            transact: function(key, fn, alt) {\n                var val = this.get(key, alt),\n                    ret = fn(val);\n                this.set(key, ret === undefined ? val : ret);\n                return this;\n            },\n            set: function(key, data, overwrite) {\n                var d = this.get(key),\n                    replacer;\n                if (d != null && overwrite === false) {\n                    return data;\n                }\n                if (typeof overwrite === \"function\") {\n                    replacer = overwrite;\n                    overwrite = undefined;\n                }\n                return _.set(this._area, this._in(key), _.stringify(data, replacer), overwrite) || d;\n            },\n            setAll: function(data, overwrite) {\n                var changed, val;\n                for (var key in data) {\n                    val = data[key];\n                    if (this.set(key, val, overwrite) !== val) {\n                        changed = true;\n                    }\n                }\n                return changed;\n            },\n            add: function(key, data, replacer) {\n                var d = this.get(key);\n                if (d instanceof Array) {\n                    data = d.concat(data);\n                } else if (d !== null) {\n                    var type = typeof d;\n                    if (type === typeof data && type === 'object') {\n                        for (var k in data) {\n                            d[k] = data[k];\n                        }\n                        data = d;\n                    } else {\n                        data = d + data;\n                    }\n                }\n                _.set(this._area, this._in(key), _.stringify(data, replacer));\n                return data;\n            },\n            remove: function(key, alt) {\n                var d = this.get(key, alt);\n                _.remove(this._area, this._in(key));\n                return d;\n            },\n            clear: function() {\n                if (!this._ns) {\n                    _.clear(this._area);\n                } else {\n                    this.each(function(k){ _.remove(this._area, this._in(k)); }, 1);\n                }\n                return this;\n            },\n            clearAll: function() {\n                var area = this._area;\n                for (var id in _.areas) {\n                    if (_.areas.hasOwnProperty(id)) {\n                        this._area = _.areas[id];\n                        this.clear();\n                    }\n                }\n                this._area = area;\n                return this;\n            },\n\n            // internal use functions\n            _in: function(k) {\n                if (typeof k !== \"string\"){ k = _.stringify(k); }\n                return this._ns ? this._ns + k : k;\n            },\n            _out: function(k) {\n                return this._ns ?\n                    k && k.indexOf(this._ns) === 0 ?\n                        k.substring(this._ns.length) :\n                        undefined : // so each() knows to skip it\n                    k;\n            }\n        },// end _.storeAPI\n        storage: function(name) {\n            return _.inherit(_.storageAPI, { items: {}, name: name });\n        },\n        storageAPI: {\n            length: 0,\n            has: function(k){ return this.items.hasOwnProperty(k); },\n            key: function(i) {\n                var c = 0;\n                for (var k in this.items){\n                    if (this.has(k) && i === c++) {\n                        return k;\n                    }\n                }\n            },\n            setItem: function(k, v) {\n                if (!this.has(k)) {\n                    this.length++;\n                }\n                this.items[k] = v;\n            },\n            removeItem: function(k) {\n                if (this.has(k)) {\n                    delete this.items[k];\n                    this.length--;\n                }\n            },\n            getItem: function(k){ return this.has(k) ? this.items[k] : null; },\n            clear: function(){ for (var k in this.items){ this.removeItem(k); } }\n        }// end _.storageAPI\n    };\n\n    var store =\n        // safely set this up (throws error in IE10/32bit mode for local files)\n        _.Store(\"local\", (function(){try{ return localStorage; }catch(e){}})());\n    store.local = store;// for completeness\n    store._ = _;// for extenders and debuggers...\n    // safely setup store.session (throws exception in FF for file:/// urls)\n    store.area(\"session\", (function(){try{ return sessionStorage; }catch(e){}})());\n    store.area(\"page\", _.storage(\"page\"));\n\n    if (typeof define === 'function' && define.amd !== undefined) {\n        define('store2', [], function () {\n            return store;\n        });\n    } else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = store;\n    } else {\n        // expose the primary store fn to the global object and save conflicts\n        if (window.store){ _.conflict = window.store; }\n        window.store = store;\n    }\n\n})(this, this && this.define);\n","\"use strict\";\n\n/* eslint-disable */\n\n/**\n * Copyright (c) 2013 ESHA Research\n * Dual licensed under the MIT and GPL licenses:\n *   http://www.opensource.org/licenses/mit-license.php\n *   http://www.gnu.org/licenses/gpl.html\n *\n * When quota is reached on a storage area, this shifts incoming values to \n * fake storage, so they last only as long as the page does. This is useful\n * because it is more burdensome for localStorage to recover from quota errors\n * than incomplete caches. In other words, it is wiser to rely on store.js\n * never complaining than never missing data. You should already be checking\n * the integrity of cached data on every page load.\n *\n * Status: BETA\n */\nmodule.exports = function (store, _) {\n  var _set = _.set,\n      _get = _.get,\n      _remove = _.remove,\n      _key = _.key,\n      _length = _.length,\n      _clear = _.clear;\n\n  _.overflow = function (area, create) {\n    var name = area === _.areas.local ? '+local+' : area === _.areas.session ? '+session+' : false;\n\n    if (name) {\n      var overflow = _.areas[name];\n\n      if (create && !overflow) {\n        overflow = store.area(name)._area; // area() copies to _.areas\n      } else if (create === false) {\n        delete _.areas[name];\n        delete store[name];\n      }\n\n      return overflow;\n    }\n  };\n\n  _.set = function (area, key, string) {\n    try {\n      _set.apply(this, arguments);\n    } catch (e) {\n      if (e.name === 'QUOTA_EXCEEDED_ERR' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED' || e.toString().indexOf(\"QUOTA_EXCEEDED_ERR\") !== -1 || e.toString().indexOf(\"QuotaExceededError\") !== -1) {\n        // the e.toString is needed for IE9 / IE10, cos name is empty there\n        return _.set(_.overflow(area, true), key, string);\n      }\n\n      throw e;\n    }\n  };\n\n  _.get = function (area, key) {\n    var overflow = _.overflow(area);\n\n    return overflow && _get.call(this, overflow, key) || _get.apply(this, arguments);\n  };\n\n  _.remove = function (area, key) {\n    var overflow = _.overflow(area);\n\n    if (overflow) {\n      _remove.call(this, overflow, key);\n    }\n\n    _remove.apply(this, arguments);\n  };\n\n  _.key = function (area, i) {\n    var overflow = _.overflow(area);\n\n    if (overflow) {\n      var l = _length.call(this, area);\n\n      if (i >= l) {\n        i = i - l; // make i overflow-relative\n\n        for (var j = 0, m = _length.call(this, overflow); j < m; j++) {\n          if (j === i) {\n            // j is overflow index\n            return _key.call(this, overflow, j);\n          }\n        }\n      }\n    }\n\n    return _key.apply(this, arguments);\n  };\n\n  _.length = function (area) {\n    var length = _length(area),\n        overflow = _.overflow(area);\n\n    return overflow ? length + _length(overflow) : length;\n  };\n\n  _.clear = function (area) {\n    _.overflow(area, false);\n\n    _clear.apply(this, arguments);\n  };\n};","\"use strict\";\n\nvar store = require('store2');\n\nvar overflow = require('./store.overflow'); // Inject overflow into store\n// https://raw.githubusercontent.com/nbubna/store/master/src/store.overflow.js\n\n\noverflow(store, store._);\nmodule.exports = store;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\n/* eslint-disable no-param-reassign */\nvar CRC32 = require('crc-32');\n\nvar store = require('./store');\n\nvar purchaseEventStorageKey = '_constructorio_purchase_order_ids';\nvar utils = {\n  trimNonBreakingSpaces: function trimNonBreakingSpaces(string) {\n    return string.replace(/\\s/g, ' ').trim();\n  },\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\n  encodeURIComponentRFC3986: function encodeURIComponentRFC3986(string) {\n    return encodeURIComponent(string).replace(/[!'()*]/g, function (c) {\n      return \"%\".concat(c.charCodeAt(0).toString(16).toUpperCase());\n    });\n  },\n  cleanParams: function cleanParams(paramsObj) {\n    var cleanedParams = {};\n    Object.keys(paramsObj).forEach(function (paramKey) {\n      var paramValue = paramsObj[paramKey];\n\n      if (typeof paramValue === 'string') {\n        // Replace non-breaking spaces (or any other type of spaces caught by the regex)\n        // - with a regular white space\n        cleanedParams[paramKey] = utils.trimNonBreakingSpaces(paramValue);\n      } else {\n        cleanedParams[paramKey] = paramValue;\n      }\n    });\n    return cleanedParams;\n  },\n  throwHttpErrorFromResponse: function throwHttpErrorFromResponse(error, response) {\n    return response.json().then(function (json) {\n      error.message = json.message;\n      error.status = response.status;\n      error.statusText = response.statusText;\n      error.url = response.url;\n      error.headers = response.headers;\n      throw error;\n    });\n  },\n  canUseDOM: function canUseDOM() {\n    return !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n  },\n  addEventListener: function addEventListener(eventType, callback, useCapture) {\n    if (utils.canUseDOM()) {\n      window.addEventListener(eventType, callback, useCapture);\n    }\n  },\n  removeEventListener: function removeEventListener(eventType, callback, useCapture) {\n    if (utils.canUseDOM()) {\n      window.removeEventListener(eventType, callback, useCapture);\n    }\n  },\n  getNavigator: function getNavigator() {\n    if (utils.canUseDOM()) {\n      return window.navigator;\n    }\n\n    return {\n      userAgent: '',\n      webdriver: false\n    };\n  },\n  isNil: function isNil(value) {\n    return value == null;\n  },\n  getWindowLocation: function getWindowLocation() {\n    if (utils.canUseDOM()) {\n      return window.location;\n    }\n\n    return {};\n  },\n  dispatchEvent: function dispatchEvent(event) {\n    if (utils.canUseDOM()) {\n      window.dispatchEvent(event);\n    }\n  },\n  createCustomEvent: function createCustomEvent(eventName, detail) {\n    if (utils.canUseDOM()) {\n      try {\n        return new window.CustomEvent(eventName, {\n          detail: detail\n        });\n      } catch (e) {\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(eventName, false, false, detail);\n        return evt;\n      }\n    }\n\n    return null;\n  },\n  hasOrderIdRecord: function hasOrderIdRecord(orderId) {\n    var orderIdHash = CRC32.str(orderId.toString());\n    var purchaseEventStorage = store.local.get(purchaseEventStorageKey);\n\n    if (typeof purchaseEventStorage === 'string') {\n      purchaseEventStorage = JSON.parse(purchaseEventStorage);\n    }\n\n    if (purchaseEventStorage && purchaseEventStorage.includes(orderIdHash)) {\n      return true;\n    }\n\n    return null;\n  },\n  addOrderIdRecord: function addOrderIdRecord(orderId) {\n    var orderIdHash = CRC32.str(orderId.toString());\n    var purchaseEventStorage = store.local.get(purchaseEventStorageKey);\n\n    if (typeof purchaseEventStorage === 'string') {\n      purchaseEventStorage = JSON.parse(purchaseEventStorage);\n    }\n\n    if (purchaseEventStorage) {\n      // If the order already exists, do nothing\n      if (purchaseEventStorage.includes(orderIdHash)) {\n        return;\n      }\n\n      if (purchaseEventStorage.length >= 10) {\n        purchaseEventStorage = purchaseEventStorage.slice(-9);\n      }\n\n      purchaseEventStorage.push(orderIdHash);\n    } else {\n      // Create a new object map for the order ids\n      purchaseEventStorage = [orderIdHash];\n    } // Push the order id map into local storage\n\n\n    store.local.set(purchaseEventStorageKey, purchaseEventStorage);\n  },\n  // Abort network request based on supplied timeout interval (in milliseconds)\n  // - method call parameter takes precedence over global options parameter\n  applyNetworkTimeout: function applyNetworkTimeout() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var controller = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var optionsTimeout = options && options.networkParameters && options.networkParameters.timeout;\n    var networkParametersTimeout = networkParameters && networkParameters.timeout;\n    var timeout = networkParametersTimeout || optionsTimeout;\n\n    if (typeof timeout === 'number' && controller) {\n      setTimeout(function () {\n        return controller.abort();\n      }, timeout);\n    }\n  },\n  stringify: function stringify(object, prefix, objectType) {\n    if (!object) {\n      return '';\n    }\n\n    var allValues = [];\n    Object.keys(object).forEach(function (key) {\n      var value = object[key];\n      var encodedKey = utils.encodeURIComponentRFC3986(key);\n      var stringifiedValue; // Check for both null and undefined\n\n      if (value != null) {\n        var nextPrefix = prefix ? \"\".concat(prefix, \"%5B\").concat(encodedKey, \"%5D\") : encodedKey;\n\n        if (Array.isArray(value)) {\n          stringifiedValue = utils.stringify(value, nextPrefix, 'array');\n        } else if ((0, _typeof2[\"default\"])(value) === 'object') {\n          stringifiedValue = utils.stringify(value, nextPrefix, 'object');\n        } else if (objectType === 'object') {\n          stringifiedValue = \"\".concat(nextPrefix, \"=\").concat(utils.encodeURIComponentRFC3986(value));\n        } else {\n          stringifiedValue = \"\".concat(prefix || encodedKey, \"=\").concat(utils.encodeURIComponentRFC3986(value));\n        }\n\n        allValues.push(stringifiedValue);\n      }\n    });\n    return allValues.join('&');\n  },\n  toSnakeCase: function toSnakeCase(camelCasedStr) {\n    return camelCasedStr.replace(/[A-Z]/g, function (prefix) {\n      return \"_\".concat(prefix.toLowerCase());\n    });\n  },\n  toSnakeCaseKeys: function toSnakeCaseKeys(camelCasedObj) {\n    var toRecurse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var snakeCasedObj = {};\n    Object.keys(camelCasedObj).forEach(function (key) {\n      var newKey = utils.toSnakeCase(key);\n      snakeCasedObj[newKey] = toRecurse && (0, _typeof2[\"default\"])(camelCasedObj[key]) === 'object' && !Array.isArray(camelCasedObj[key]) ? utils.toSnakeCaseKeys(camelCasedObj[key], toRecurse) : camelCasedObj[key];\n    });\n    return snakeCasedObj;\n  }\n};\nmodule.exports = utils;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/* eslint-disable no-unneeded-ternary */\nvar helpers = require('./helpers');\n\nvar EventDispatcher = /*#__PURE__*/function () {\n  function EventDispatcher(options) {\n    var _this = this;\n\n    (0, _classCallCheck2[\"default\"])(this, EventDispatcher);\n    this.events = [];\n    this.enabled = options && options.enabled === false ? false : true; // Defaults to 'true'\n\n    this.waitForBeacon = options && options.waitForBeacon === false ? false : true; // Defaults to 'true'\n    // `enabled` is a supplied option\n    // - if false, events will never be dispatched\n    // `active` is a variable determining if events will be dispatched\n    // - if `waitForBeacon` is set to true, `active` will be false until beacon event is received\n\n    this.active = this.enabled; // If `waitForBeacon` option is set, only enable event dispatching once event is received from beacon\n\n    if (this.waitForBeacon) {\n      this.active = false; // Check browser environment to determine if beacon has been loaded\n      // - Important for the case where the beacon has loaded before client library instantiated\n\n      if (helpers.canUseDOM() && (window.ConstructorioAutocomplete || window.ConstructorioBeacon || window.ConstructorioTracker)) {\n        if (this.enabled) {\n          this.active = true;\n          this.dispatchEvents();\n        }\n      } // Bind listener to beacon loaded event\n      // - Important for the case where client library instantiated before beacon has loaded\n\n\n      helpers.addEventListener('cio.beacon.loaded', function () {\n        if (_this.enabled) {\n          _this.active = true;\n\n          _this.dispatchEvents();\n        }\n      });\n    }\n  } // Push event data to queue\n\n\n  (0, _createClass2[\"default\"])(EventDispatcher, [{\n    key: \"queue\",\n    value: function queue(name, data) {\n      this.events.push({\n        name: name,\n        data: data\n      });\n\n      if (this.active) {\n        this.dispatchEvents();\n      }\n    } // Dispatch all custom events within queue on `window` of supplied name with data\n\n  }, {\n    key: \"dispatchEvents\",\n    value: function dispatchEvents() {\n      while (this.events.length) {\n        var item = this.events.shift();\n        var name = item.name,\n            data = item.data;\n        var eventName = \"cio.client.\".concat(name);\n        helpers.dispatchEvent(helpers.createCustomEvent(eventName, data));\n      }\n    }\n  }]);\n  return EventDispatcher;\n}();\n\nmodule.exports = EventDispatcher;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/* eslint-disable complexity */\n\n/* eslint-disable max-len */\n\n/* eslint-disable object-curly-newline, no-underscore-dangle */\nvar EventDispatcher = require('../utils/event-dispatcher');\n\nvar helpers = require('../utils/helpers'); // Create URL from supplied query (term) and parameters\n\n\nfunction createSearchUrl(query, parameters, options) {\n  var isVoiceSearch = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var apiKey = options.apiKey,\n      version = options.version,\n      serviceUrl = options.serviceUrl,\n      sessionId = options.sessionId,\n      clientId = options.clientId,\n      userId = options.userId,\n      segments = options.segments,\n      testCells = options.testCells;\n  var queryParams = {\n    c: version\n  };\n  queryParams.key = apiKey;\n  queryParams.i = clientId;\n  queryParams.s = sessionId; // Validate query (term) is provided\n\n  if (!query || typeof query !== 'string') {\n    throw new Error('query is a required parameter of type string');\n  } // Pull test cells from options\n\n\n  if (testCells) {\n    Object.keys(testCells).forEach(function (testCellKey) {\n      queryParams[\"ef-\".concat(testCellKey)] = testCells[testCellKey];\n    });\n  } // Pull user segments from options\n\n\n  if (segments && segments.length) {\n    queryParams.us = segments;\n  } // Pull user id from options and ensure string\n\n\n  if (userId) {\n    queryParams.ui = String(userId);\n  }\n\n  if (parameters) {\n    var offset = parameters.offset,\n        page = parameters.page,\n        resultsPerPage = parameters.resultsPerPage,\n        filters = parameters.filters,\n        sortBy = parameters.sortBy,\n        sortOrder = parameters.sortOrder,\n        section = parameters.section,\n        fmtOptions = parameters.fmtOptions,\n        hiddenFields = parameters.hiddenFields,\n        hiddenFacets = parameters.hiddenFacets,\n        variationsMap = parameters.variationsMap,\n        qsParam = parameters.qsParam,\n        preFilterExpression = parameters.preFilterExpression; // Pull offset from parameters\n\n    if (!helpers.isNil(offset)) {\n      queryParams.offset = offset;\n    } // Pull page from parameters\n\n\n    if (!helpers.isNil(page)) {\n      queryParams.page = page;\n    } // Pull results per page from parameters\n\n\n    if (!helpers.isNil(resultsPerPage)) {\n      queryParams.num_results_per_page = resultsPerPage;\n    } // Pull filters from parameters\n\n\n    if (filters) {\n      queryParams.filters = filters;\n    } // Pull sort by from parameters\n\n\n    if (sortBy) {\n      queryParams.sort_by = sortBy;\n    } // Pull sort order from parameters\n\n\n    if (sortOrder) {\n      queryParams.sort_order = sortOrder;\n    } // Pull section from parameters\n\n\n    if (section) {\n      queryParams.section = section;\n    } // Pull format options from parameters\n\n\n    if (fmtOptions) {\n      queryParams.fmt_options = fmtOptions;\n    } // Pull hidden fields from parameters\n\n\n    if (hiddenFields) {\n      if (queryParams.fmt_options) {\n        queryParams.fmt_options.hidden_fields = hiddenFields;\n      } else {\n        queryParams.fmt_options = {\n          hidden_fields: hiddenFields\n        };\n      }\n    } // Pull hidden facets from parameters\n\n\n    if (hiddenFacets) {\n      if (queryParams.fmt_options) {\n        queryParams.fmt_options.hidden_facets = hiddenFacets;\n      } else {\n        queryParams.fmt_options = {\n          hidden_facets: hiddenFacets\n        };\n      }\n    } // Pull variations map from parameters\n\n\n    if (variationsMap) {\n      queryParams.variations_map = JSON.stringify(variationsMap);\n    } // Pull pre_filter_expression from parameters\n\n\n    if (preFilterExpression) {\n      queryParams.pre_filter_expression = JSON.stringify(preFilterExpression);\n    } // pull qs param from parameters\n\n\n    if (qsParam) {\n      queryParams.qs = JSON.stringify(qsParam);\n    }\n  }\n\n  queryParams._dt = Date.now();\n  queryParams = helpers.cleanParams(queryParams);\n  var queryString = helpers.stringify(queryParams);\n  var searchUrl = isVoiceSearch ? 'search/natural_language' : 'search';\n  return \"\".concat(serviceUrl, \"/\").concat(searchUrl, \"/\").concat(helpers.encodeURIComponentRFC3986(helpers.trimNonBreakingSpaces(query)), \"?\").concat(queryString);\n}\n/**\n * Interface to search related API calls\n *\n * @module search\n * @inner\n * @returns {object}\n */\n\n\nvar Search = /*#__PURE__*/function () {\n  function Search(options) {\n    (0, _classCallCheck2[\"default\"])(this, Search);\n    this.options = options || {};\n    this.eventDispatcher = new EventDispatcher(options.eventDispatcher);\n  }\n  /**\n   * Retrieve search results from API\n   *\n   * @function getSearchResults\n   * @description Retrieve search results from Constructor.io API\n   * @param {string} query - Term to use to perform a search\n   * @param {object} [parameters] - Additional parameters to refine result set\n   * @param {number} [parameters.page] - The page number of the results(Can't be used together with offset)\n   * @param {number} [parameters.offset] - The number of results to skip from the beginning (Can't be used together with page)\n   * @param {number} [parameters.resultsPerPage] - The number of results per page to return\n   * @param {object} [parameters.filters] - Key / value mapping (dictionary) of filters used to refine results\n   * @param {string} [parameters.sortBy='relevance'] - The sort method for results\n   * @param {string} [parameters.sortOrder='descending'] - The sort order for results\n   * @param {string} [parameters.section='Products'] - The section name for results\n   * @param {object} [parameters.fmtOptions] - The format options used to refine result groups. Please refer to https://docs.constructor.io/rest_api/search/queries for details\n   * @param {object} [parameters.preFilterExpression] - Faceting expression to scope search results. Please refer to https://docs.constructor.io/rest_api/collections#add-items-dynamically\n   * @param {string[]} [parameters.hiddenFields] - Hidden metadata fields to return\n   * @param {string[]} [parameters.hiddenFacets] - Hidden facets to return\n   * @param {object} [parameters.variationsMap] - The variations map object to aggregate variations. Please refer to https://docs.constructor.io/rest_api/variations_mapping for details\n   * @param {object} [parameters.qsParam] - Parameters listed above can be serialized into a JSON object and parsed through this parameter. Please refer to https://docs.constructor.io/rest_api/search/queries/\n   * @param {object} [networkParameters] - Parameters relevant to the network request\n   * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n   * @returns {Promise}\n   * @see https://docs.constructor.io/rest_api/search/\n   * @example\n   * constructorio.search.getSearchResults('t-shirt', {\n   *     resultsPerPage: 40,\n   *     filters: {\n   *         size: 'medium'\n   *     },\n   * });\n   */\n\n\n  (0, _createClass2[\"default\"])(Search, [{\n    key: \"getSearchResults\",\n    value: function getSearchResults(query, parameters) {\n      var _this = this;\n\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      try {\n        requestUrl = createSearchUrl(query, parameters, this.options);\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        // Search results\n        if (json.response && json.response.results) {\n          if (json.result_id) {\n            // Append `result_id` to each result item\n            json.response.results.forEach(function (result) {\n              // eslint-disable-next-line no-param-reassign\n              result.result_id = json.result_id;\n            });\n          }\n\n          _this.eventDispatcher.queue('search.getSearchResults.completed', json);\n\n          return json;\n        } // Redirect rules\n\n\n        if (json.response && json.response.redirect) {\n          _this.eventDispatcher.queue('search.getSearchResults.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getSearchResults response data is malformed');\n      });\n    }\n    /**\n     * Retrieve voice search results from API\n     *\n     * @function getVoiceSearchResults\n     * @description Retrieve voice search results from Constructor.io API\n     * @param {string} query - Term to use to perform a voice search\n     * @param {object} [parameters] - Additional parameters to refine result set\n     * @param {number} [parameters.page] - The page number of the results (Can't be used together with offset)\n     * @param {number} [parameters.offset] - The number of results to skip from the beginning (Can't be used together with page)\n     * @param {number} [parameters.resultsPerPage] - The number of results per page to return\n     * @param {string} [parameters.section='Products'] - The section name for results\n     * @param {object} [parameters.fmtOptions] - The format options used to refine result groups. Please refer to https://docs.constructor.io/rest_api/search/queries for details\n     * @param {object} [parameters.preFilterExpression] - Faceting expression to scope search results. Please refer to https://docs.constructor.io/rest_api/collections#add-items-dynamically\n     * @param {object} [parameters.variationsMap] - The variations map object to aggregate variations. Please refer to https://docs.constructor.io/rest_api/variations_mapping for details\n     * @param {string[]} [parameters.hiddenFields] - Hidden metadata fields to return\n     * @param {string[]} [parameters.hiddenFacets] - Hidden facets to return\n     * @param {object} [parameters.qsParam] - Parameters listed above can be serialized into a JSON object and parsed through this parameter. Please refer to https://docs.constructor.io/rest_api/search/queries/\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {Promise}\n     * @see https://docs.constructor.io/rest_api/search/natural_language_search/\n     * @example\n     * constructorio.search.getVoiceSearchResults('show me lipstick');\n     */\n\n  }, {\n    key: \"getVoiceSearchResults\",\n    value: function getVoiceSearchResults(query, parameters) {\n      var _this2 = this;\n\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      try {\n        var isVoiceSearch = true;\n        requestUrl = createSearchUrl(query, parameters, this.options, isVoiceSearch);\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        // Search results\n        if (json.response && json.response.results) {\n          if (json.result_id) {\n            // Append `result_id` to each result item\n            json.response.results.forEach(function (result) {\n              // eslint-disable-next-line no-param-reassign\n              result.result_id = json.result_id;\n            });\n          }\n\n          _this2.eventDispatcher.queue('search.getVoiceSearchResults.completed', json);\n\n          return json;\n        } // Redirect rules\n\n\n        if (json.response && json.response.redirect) {\n          _this2.eventDispatcher.queue('search.getVoiceSearchResults.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getVoiceSearchResults response data is malformed');\n      });\n    }\n  }]);\n  return Search;\n}();\n\nmodule.exports = Search;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable object-curly-newline, no-underscore-dangle, max-len, complexity */\nvar EventDispatcher = require('../utils/event-dispatcher');\n\nvar helpers = require('../utils/helpers'); // Create query params from parameters and options\n\n\nfunction createQueryParams(parameters, options) {\n  var apiKey = options.apiKey,\n      version = options.version,\n      sessionId = options.sessionId,\n      clientId = options.clientId,\n      userId = options.userId,\n      segments = options.segments,\n      testCells = options.testCells;\n  var queryParams = {\n    c: version\n  };\n  queryParams.key = apiKey;\n  queryParams.i = clientId;\n  queryParams.s = sessionId; // Pull test cells from options\n\n  if (testCells) {\n    Object.keys(testCells).forEach(function (testCellKey) {\n      queryParams[\"ef-\".concat(testCellKey)] = testCells[testCellKey];\n    });\n  } // Pull user segments from options\n\n\n  if (segments && segments.length) {\n    queryParams.us = segments;\n  } // Pull user id from options and ensure string\n\n\n  if (userId) {\n    queryParams.ui = String(userId);\n  }\n\n  if (parameters) {\n    var page = parameters.page,\n        offset = parameters.offset,\n        resultsPerPage = parameters.resultsPerPage,\n        filters = parameters.filters,\n        sortBy = parameters.sortBy,\n        sortOrder = parameters.sortOrder,\n        section = parameters.section,\n        fmtOptions = parameters.fmtOptions,\n        hiddenFields = parameters.hiddenFields,\n        hiddenFacets = parameters.hiddenFacets,\n        variationsMap = parameters.variationsMap,\n        qsParam = parameters.qsParam,\n        preFilterExpression = parameters.preFilterExpression; // Pull page from parameters\n\n    if (!helpers.isNil(page)) {\n      queryParams.page = page;\n    } // Pull offset from parameters\n\n\n    if (!helpers.isNil(offset)) {\n      queryParams.offset = offset;\n    } // Pull results per page from parameters\n\n\n    if (!helpers.isNil(resultsPerPage)) {\n      queryParams.num_results_per_page = resultsPerPage;\n    }\n\n    if (filters) {\n      queryParams.filters = filters;\n    } // Pull sort by from parameters\n\n\n    if (sortBy) {\n      queryParams.sort_by = sortBy;\n    } // Pull sort order from parameters\n\n\n    if (sortOrder) {\n      queryParams.sort_order = sortOrder;\n    } // Pull section from parameters\n\n\n    if (section) {\n      queryParams.section = section;\n    } // Pull format options from parameters\n\n\n    if (fmtOptions) {\n      queryParams.fmt_options = fmtOptions;\n    } // Pull hidden fields from parameters\n\n\n    if (hiddenFields) {\n      if (queryParams.fmt_options) {\n        queryParams.fmt_options.hidden_fields = hiddenFields;\n      } else {\n        queryParams.fmt_options = {\n          hidden_fields: hiddenFields\n        };\n      }\n    } // Pull hidden facets from parameters\n\n\n    if (hiddenFacets) {\n      if (queryParams.fmt_options) {\n        queryParams.fmt_options.hidden_facets = hiddenFacets;\n      } else {\n        queryParams.fmt_options = {\n          hidden_facets: hiddenFacets\n        };\n      }\n    } // Pull variations map from parameters\n\n\n    if (variationsMap) {\n      queryParams.variations_map = JSON.stringify(variationsMap);\n    } // Pull pre_filter_expression from parameters\n\n\n    if (preFilterExpression) {\n      queryParams.pre_filter_expression = JSON.stringify(preFilterExpression);\n    } // pull qs param from parameters\n\n\n    if (qsParam) {\n      queryParams.qs = JSON.stringify(qsParam);\n    }\n  }\n\n  queryParams._dt = Date.now();\n  queryParams = helpers.cleanParams(queryParams);\n  return queryParams;\n} // Create URL from supplied filter name, value and parameters\n\n\nfunction createBrowseUrlFromFilter(filterName, filterValue, parameters, options) {\n  var serviceUrl = options.serviceUrl; // Validate filter name is provided\n\n  if (!filterName || typeof filterName !== 'string') {\n    throw new Error('filterName is a required parameter of type string');\n  } // Validate filter value is provided\n\n\n  if (!filterValue || typeof filterValue !== 'string') {\n    throw new Error('filterValue is a required parameter of type string');\n  }\n\n  var queryParams = createQueryParams(parameters, options);\n  var queryString = helpers.stringify(queryParams);\n  return \"\".concat(serviceUrl, \"/browse/\").concat(helpers.encodeURIComponentRFC3986(helpers.trimNonBreakingSpaces(filterName)), \"/\").concat(helpers.encodeURIComponentRFC3986(helpers.trimNonBreakingSpaces(filterValue)), \"?\").concat(queryString);\n} // Create URL from supplied id's\n\n\nfunction createBrowseUrlFromIDs(ids, parameters, options) {\n  var serviceUrl = options.serviceUrl; // Validate id's are provided\n\n  if (!ids || !Array.isArray(ids) || !ids.length) {\n    throw new Error('ids is a required parameter of type array');\n  }\n\n  var queryParams = _objectSpread(_objectSpread({}, createQueryParams(parameters, options)), {}, {\n    ids: ids\n  });\n\n  var queryString = helpers.stringify(queryParams);\n  return \"\".concat(serviceUrl, \"/browse/items?\").concat(queryString);\n} // Create URL for facets\n\n\nfunction createBrowseUrlForFacets(parameters, options) {\n  var serviceUrl = options.serviceUrl;\n\n  var queryParams = _objectSpread({}, createQueryParams(parameters, options)); // Endpoint does not accept _dt\n\n\n  delete queryParams._dt;\n  var queryString = helpers.stringify(queryParams);\n  return \"\".concat(serviceUrl, \"/browse/facets?\").concat(queryString);\n} // Create URL from supplied facet name and parameters\n\n\nfunction createBrowseUrlForFacetOptions(facetName, parameters, options) {\n  var serviceUrl = options.serviceUrl; // Validate facet name is provided\n\n  if (!facetName || typeof facetName !== 'string') {\n    throw new Error('facetName is a required parameter of type string');\n  }\n\n  var queryParams = _objectSpread({}, createQueryParams(parameters, options));\n\n  queryParams.facet_name = facetName; // Endpoint does not accept _dt\n\n  delete queryParams._dt;\n  var queryString = helpers.stringify(queryParams);\n  return \"\".concat(serviceUrl, \"/browse/facet_options?\").concat(queryString);\n}\n/**\n * Interface to browse related API calls\n *\n * @module browse\n * @inner\n * @returns {object}\n */\n\n\nvar Browse = /*#__PURE__*/function () {\n  function Browse(options) {\n    (0, _classCallCheck2[\"default\"])(this, Browse);\n    this.options = options || {};\n    this.eventDispatcher = new EventDispatcher(options.eventDispatcher);\n  }\n  /**\n   * Retrieve browse results from API\n   *\n   * @function getBrowseResults\n   * @description Retrieve browse results from Constructor.io API\n   * @param {string} filterName - Filter name to display results from\n   * @param {string} filterValue - Filter value to display results from\n   * @param {object} [parameters] - Additional parameters to refine result set\n   * @param {number} [parameters.page] - The page number of the results (Can't be used together with offset)\n   * @param {number} [parameters.offset] - The number of results to skip from the beginning (Can't be used together with page)\n   * @param {number} [parameters.resultsPerPage] - The number of results per page to return\n   * @param {object} [parameters.filters] - Key / value mapping (dictionary) of filters used to refine results\n   * @param {string} [parameters.sortBy='relevance'] - The sort method for results\n   * @param {string} [parameters.sortOrder='descending'] - The sort order for results\n   * @param {string} [parameters.section='Products'] - The section name for results\n   * @param {object} [parameters.fmtOptions] - The format options used to refine result groups. Please refer to https://docs.constructor.io/rest_api/browse/queries/ for details\n   * @param {object} [parameters.preFilterExpression] - Faceting expression to scope browse results. Please refer to https://docs.constructor.io/rest_api/collections#add-items-dynamically\n   * @param {string[]} [parameters.hiddenFields] - Hidden metadata fields to return\n   * @param {string[]} [parameters.hiddenFacets] - Hidden facets to return\n   * @param {object} [parameters.variationsMap] - The variations map object to aggregate variations. Please refer to https://docs.constructor.io/rest_api/variations_mapping for details\n   * @param {object} [parameters.qsParam] - Parameters listed above can be serialized into a JSON object and parsed through this parameter. Please refer to https://docs.constructor.io/rest_api/browse/queries/\n   * @param {object} [networkParameters] - Parameters relevant to the network request\n   * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n   * @returns {Promise}\n   * @see https://docs.constructor.io/rest_api/browse/results\n   * @example\n   * constructorio.browse.getBrowseResults('group_id', 't-shirts', {\n   *     resultsPerPage: 40,\n   *     filters: {\n   *         size: 'medium'\n   *     },\n   * });\n   */\n\n\n  (0, _createClass2[\"default\"])(Browse, [{\n    key: \"getBrowseResults\",\n    value: function getBrowseResults(filterName, filterValue, parameters) {\n      var _this = this;\n\n      var networkParameters = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      try {\n        requestUrl = createBrowseUrlFromFilter(filterName, filterValue, parameters, this.options);\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.response && json.response.results) {\n          if (json.result_id) {\n            // Append `result_id` to each result item\n            json.response.results.forEach(function (result) {\n              // eslint-disable-next-line no-param-reassign\n              result.result_id = json.result_id;\n            });\n          }\n\n          _this.eventDispatcher.queue('browse.getBrowseResults.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getBrowseResults response data is malformed');\n      });\n    }\n    /**\n     * Retrieve browse results from API using item id's\n     *\n     * @function getBrowseResultsForItemIds\n     * @param {string[]} itemIds - Item id's of results to fetch\n     * @param {object} [parameters] - Additional parameters to refine result set\n     * @param {number} [parameters.page] - The page number of the results (Can't be used together with offset)\n     * @param {number} [parameters.offset] - The number of results to skip from the beginning (Can't be used together with page)\n     * @param {number} [parameters.resultsPerPage] - The number of results per page to return\n     * @param {object} [parameters.filters] - Filters used to refine results\n     * @param {string} [parameters.sortBy='relevance'] - The sort method for results\n     * @param {string} [parameters.sortOrder='descending'] - The sort order for results\n     * @param {string} [parameters.section='Products'] - The section name for results\n     * @param {object} [parameters.fmtOptions] - The format options used to refine result groups. Please refer to https://docs.constructor.io/rest_api/browse/queries/ for details\n     * @param {string[]} [parameters.hiddenFields] - Hidden metadata fields to return\n     * @param {string[]} [parameters.hiddenFacets] - Hidden facets to return\n     * @param {object} [parameters.variationsMap] - The variations map object to aggregate variations. Please refer to https://docs.constructor.io/rest_api/variations_mapping for details\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {Promise}\n     * @see https://docs.constructor.io/rest_api/browse/items/\n     * @example\n     * constructorio.browse.getBrowseResultsForItemIds(['shirt-123', 'shirt-456', 'shirt-789'], {\n     *     filters: {\n     *         size: 'medium'\n     *     },\n     * });\n     */\n\n  }, {\n    key: \"getBrowseResultsForItemIds\",\n    value: function getBrowseResultsForItemIds(itemIds, parameters) {\n      var _this2 = this;\n\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      try {\n        requestUrl = createBrowseUrlFromIDs(itemIds, parameters, this.options);\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.response && json.response.results) {\n          if (json.result_id) {\n            // Append `result_id` to each result item\n            json.response.results.forEach(function (result) {\n              // eslint-disable-next-line no-param-reassign\n              result.result_id = json.result_id;\n            });\n          }\n\n          _this2.eventDispatcher.queue('browse.getBrowseResultsForItemIds.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getBrowseResultsForItemIds response data is malformed');\n      });\n    }\n    /**\n     * Retrieve browse groups from API\n     *\n     * @function getBrowseGroups\n     * @param {object} [parameters.filters] - Filters used to refine results\n     * @param {string} [parameters.section='Products'] - The section name for results\n     * @param {object} [parameters.fmtOptions] - The format options used to refine result groups. Please refer to https://docs.constructor.io/rest_api/browse/groups/ for details\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {Promise}\n     * @see https://docs.constructor.io/rest_api/browse/groups\n     * @example\n     * constructorio.browse.getBrowseGroups({\n     *     filters: {\n     *         group_id: 'drill_collection'\n     *     },\n     *     fmtOptions: {\n     *         groups_max_depth: 2\n     *     }\n     * });\n     */\n\n  }, {\n    key: \"getBrowseGroups\",\n    value: function getBrowseGroups(parameters) {\n      var _this3 = this;\n\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var fetch = this.options.fetch;\n      var serviceUrl = this.options.serviceUrl;\n      var queryParams = createQueryParams(parameters, this.options);\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      delete queryParams._dt;\n      var queryString = helpers.stringify(queryParams);\n      var requestUrl = \"\".concat(serviceUrl, \"/browse/groups?\").concat(queryString);\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.response && json.response.groups) {\n          _this3.eventDispatcher.queue('browse.getBrowseGroups.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getBrowseGroups response data is malformed');\n      });\n    }\n    /**\n     * Retrieve browse facets from API\n     *\n     * @function getBrowseFacets\n     * @param {object} [parameters] - Additional parameters to refine result set\n     * @param {number} [parameters.page] - The page number of the results (Can't be used together with offset)\n     * @param {number} [parameters.offset] - The number of results to skip from the beginning (Can't be used together with page)\n     * @param {string} [parameters.section='Products'] - The section name for results\n     * @param {object} [parameters.fmtOptions] - The format options used to refine result groups. Please refer to https://docs.constructor.io/rest_api/browse/facets/ for details\n     * @param {number} [parameters.resultsPerPage] - The number of results per page to return\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {Promise}\n     * @see https://docs.constructor.io/rest_api/browse/facets\n     * @example\n     * constructorio.browse.getBrowseFacets({\n     *     page: 1,\n     *     resultsPerPage: 10,\n     * });\n     */\n\n  }, {\n    key: \"getBrowseFacets\",\n    value: function getBrowseFacets(parameters, networkParameters) {\n      var _this4 = this;\n\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      try {\n        requestUrl = createBrowseUrlForFacets(parameters, this.options);\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.response && json.response.facets) {\n          _this4.eventDispatcher.queue('browse.getBrowseFacets.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getBrowseFacets response data is malformed');\n      });\n    }\n    /**\n     * Retrieve facet options from API\n     *\n     * @function getBrowseFacetOptions\n     * @param {string} facetName - Name of the facet whose options to return\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @param {object} [parameters] - Additional parameters to refine result set\n     * @param {string} [parameters.section='Products'] - The section name for results\n     * @param {object} [parameters.fmtOptions] - The format options used to refine result groups. Please refer to https://docs.constructor.io/rest_api/browse/facet_options/ for details\n     * @param {}\n     * @returns {Promise}\n     * @see https://docs.constructor.io/rest_api/browse/facet_options/\n     * @example\n     * constructorio.browse.getBrowseFacetOptions('price', {\n     * });\n     */\n\n  }, {\n    key: \"getBrowseFacetOptions\",\n    value: function getBrowseFacetOptions(facetName) {\n      var _this5 = this;\n\n      var parameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      try {\n        requestUrl = createBrowseUrlForFacetOptions(facetName, parameters, this.options);\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.response && json.response.facets) {\n          _this5.eventDispatcher.queue('browse.getBrowseFacetOptions.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getBrowseFacetOptions response data is malformed');\n      });\n    }\n  }]);\n  return Browse;\n}();\n\nmodule.exports = Browse;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/* eslint-disable object-curly-newline, no-underscore-dangle */\nvar EventDispatcher = require('../utils/event-dispatcher');\n\nvar _require = require('../utils/helpers'),\n    throwHttpErrorFromResponse = _require.throwHttpErrorFromResponse,\n    cleanParams = _require.cleanParams,\n    applyNetworkTimeout = _require.applyNetworkTimeout,\n    trimNonBreakingSpaces = _require.trimNonBreakingSpaces,\n    encodeURIComponentRFC3986 = _require.encodeURIComponentRFC3986,\n    stringify = _require.stringify; // Create URL from supplied query (term) and parameters\n\n\nfunction createAutocompleteUrl(query, parameters, options) {\n  var apiKey = options.apiKey,\n      version = options.version,\n      serviceUrl = options.serviceUrl,\n      sessionId = options.sessionId,\n      clientId = options.clientId,\n      userId = options.userId,\n      segments = options.segments,\n      testCells = options.testCells;\n  var queryParams = {\n    c: version\n  };\n  queryParams.key = apiKey;\n  queryParams.i = clientId;\n  queryParams.s = sessionId; // Validate query (term) is provided\n\n  if (!query || typeof query !== 'string') {\n    throw new Error('query is a required parameter of type string');\n  } // Pull test cells from options\n\n\n  if (testCells) {\n    Object.keys(testCells).forEach(function (testCellKey) {\n      queryParams[\"ef-\".concat(testCellKey)] = testCells[testCellKey];\n    });\n  } // Pull user segments from options\n\n\n  if (segments && segments.length) {\n    queryParams.us = segments;\n  } // Pull user id from options and ensure string\n\n\n  if (userId) {\n    queryParams.ui = String(userId);\n  }\n\n  if (parameters) {\n    var numResults = parameters.numResults,\n        resultsPerSection = parameters.resultsPerSection,\n        filters = parameters.filters,\n        hiddenFields = parameters.hiddenFields,\n        variationsMap = parameters.variationsMap; // Pull results number from parameters\n\n    if (numResults) {\n      queryParams.num_results = numResults;\n    } // Pull results number per section from parameters\n\n\n    if (resultsPerSection) {\n      Object.keys(resultsPerSection).forEach(function (section) {\n        queryParams[\"num_results_\".concat(section)] = resultsPerSection[section];\n      });\n    } // Pull filters from parameters\n\n\n    if (filters) {\n      queryParams.filters = filters;\n    } // Pull hidden fields from parameters\n\n\n    if (hiddenFields) {\n      if (queryParams.fmt_options) {\n        queryParams.fmt_options.hidden_fields = hiddenFields;\n      } else {\n        queryParams.fmt_options = {\n          hidden_fields: hiddenFields\n        };\n      }\n    } // Pull variations map from parameters\n\n\n    if (variationsMap) {\n      queryParams.variations_map = JSON.stringify(variationsMap);\n    }\n  }\n\n  queryParams._dt = Date.now();\n  queryParams = cleanParams(queryParams);\n  var queryString = stringify(queryParams);\n  var cleanedQuery = query.replace(/^\\//, '|'); // For compatibility with backend API\n\n  return \"\".concat(serviceUrl, \"/autocomplete/\").concat(encodeURIComponentRFC3986(trimNonBreakingSpaces(cleanedQuery)), \"?\").concat(queryString);\n}\n/**\n * Interface to autocomplete related API calls.\n *\n * @module autocomplete\n * @inner\n * @returns {object}\n */\n\n\nvar Autocomplete = /*#__PURE__*/function () {\n  function Autocomplete(options) {\n    (0, _classCallCheck2[\"default\"])(this, Autocomplete);\n    this.options = options || {};\n    this.eventDispatcher = new EventDispatcher(options.eventDispatcher);\n  }\n  /**\n   * Retrieve autocomplete results from API\n   *\n   * @function getAutocompleteResults\n   * @description Retrieve autocomplete results from Constructor.io API\n   * @param {string} query - Term to use to perform an autocomplete search\n   * @param {object} [parameters] - Additional parameters to refine result set\n   * @param {number} [parameters.numResults] - The total number of results to return\n   * @param {object} [parameters.filters] - Key / value mapping (dictionary) of filters used to refine results\n   * @param {object} [parameters.resultsPerSection] - Number of results to return (value) per section (key)\n   * @param {string[]} [parameters.hiddenFields] - Hidden metadata fields to return\n   * @param {object} [parameters.variationsMap] - The variations map object to aggregate variations. Please refer to https://docs.constructor.io/rest_api/variations_mapping for details\n   * @param {object} [networkParameters] - Parameters relevant to the network request\n   * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n   * @returns {Promise}\n   * @see https://docs.constructor.io/rest_api/autocomplete_queries\n   * @example\n   * constructorio.autocomplete.getAutocompleteResults('t-shirt', {\n   *     resultsPerSection: {\n   *         Products: 5,\n   *         'Search Suggestions': 10,\n   *     },\n   *     filters: {\n   *         size: 'medium'\n   *     },\n   * });\n   */\n\n\n  (0, _createClass2[\"default\"])(Autocomplete, [{\n    key: \"getAutocompleteResults\",\n    value: function getAutocompleteResults(query, parameters) {\n      var _this = this;\n\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      try {\n        requestUrl = createAutocompleteUrl(query, parameters, this.options);\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.sections) {\n          if (json.result_id) {\n            var sectionKeys = Object.keys(json.sections);\n            sectionKeys.forEach(function (section) {\n              var sectionItems = json.sections[section];\n\n              if (sectionItems.length) {\n                // Append `result_id` to each section item\n                sectionItems.forEach(function (item) {\n                  // eslint-disable-next-line no-param-reassign\n                  item.result_id = json.result_id;\n                });\n              }\n            });\n          }\n\n          _this.eventDispatcher.queue('autocomplete.getAutocompleteResults.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getAutocompleteResults response data is malformed');\n      });\n    }\n  }]);\n  return Autocomplete;\n}();\n\nmodule.exports = Autocomplete;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/* eslint-disable object-curly-newline, no-param-reassign */\nvar EventDispatcher = require('../utils/event-dispatcher');\n\nvar helpers = require('../utils/helpers'); // Create URL from supplied parameters\n\n\nfunction createRecommendationsUrl(podId, parameters, options) {\n  var apiKey = options.apiKey,\n      version = options.version,\n      serviceUrl = options.serviceUrl,\n      sessionId = options.sessionId,\n      userId = options.userId,\n      clientId = options.clientId,\n      segments = options.segments;\n  var queryParams = {\n    c: version\n  };\n  queryParams.key = apiKey;\n  queryParams.i = clientId;\n  queryParams.s = sessionId; // Validate pod identifier is provided\n\n  if (!podId || typeof podId !== 'string') {\n    throw new Error('podId is a required parameter of type string');\n  } // Pull user segments from options\n\n\n  if (segments && segments.length) {\n    queryParams.us = segments;\n  } // Pull user id from options and ensure string\n\n\n  if (userId) {\n    queryParams.ui = String(userId);\n  }\n\n  if (parameters) {\n    var numResults = parameters.numResults,\n        itemIds = parameters.itemIds,\n        section = parameters.section,\n        term = parameters.term,\n        filters = parameters.filters,\n        variationsMap = parameters.variationsMap,\n        hiddenFields = parameters.hiddenFields; // Pull num results number from parameters\n\n    if (!helpers.isNil(numResults)) {\n      queryParams.num_results = numResults;\n    } // Pull item ids from parameters\n\n\n    if (itemIds) {\n      queryParams.item_id = itemIds;\n    } // Pull section from parameters\n\n\n    if (section) {\n      queryParams.section = section;\n    } // Pull term from parameters\n\n\n    if (term) {\n      queryParams.term = term;\n    } // Pull filters from parameters\n\n\n    if (filters) {\n      queryParams.filters = filters;\n    } // Pull hidden fields from parameters\n\n\n    if (hiddenFields) {\n      if (queryParams.fmt_options) {\n        queryParams.fmt_options.hidden_fields = hiddenFields;\n      } else {\n        queryParams.fmt_options = {\n          hidden_fields: hiddenFields\n        };\n      }\n    } // Pull variations map from parameters\n\n\n    if (variationsMap) {\n      queryParams.variations_map = JSON.stringify(variationsMap);\n    }\n  }\n\n  queryParams = helpers.cleanParams(queryParams);\n  var queryString = helpers.stringify(queryParams);\n  return \"\".concat(serviceUrl, \"/recommendations/v1/pods/\").concat(helpers.encodeURIComponentRFC3986(helpers.trimNonBreakingSpaces(podId)), \"?\").concat(queryString);\n}\n/**\n * Interface to recommendations related API calls\n *\n * @module recommendations\n * @inner\n * @returns {object}\n */\n\n\nvar Recommendations = /*#__PURE__*/function () {\n  function Recommendations(options) {\n    (0, _classCallCheck2[\"default\"])(this, Recommendations);\n    this.options = options || {};\n    this.eventDispatcher = new EventDispatcher(options.eventDispatcher);\n  }\n  /**\n   * Get recommendations for supplied pod identifier\n   *\n   * @function getRecommendations\n   * @description Retrieve recommendation results from Constructor.io API\n   * @param {string} podId - Pod identifier\n   * @param {object} [parameters] - Additional parameters to refine results\n   * @param {string|array} [parameters.itemIds] - Item ID(s) to retrieve recommendations for (strategy specific)\n   * @param {number} [parameters.numResults] - The number of results to return\n   * @param {string} [parameters.section] - The section to return results from\n   * @param {string} [parameters.term] - The term to use to refine results (strategy specific)\n   * @param {object} [parameters.filters] - Key / value mapping of filters used to refine results\n   * @param {object} [parameters.variationsMap] - The variations map object to aggregate variations. Please refer to https://docs.constructor.io/rest_api/variations_mapping for details\n   * @param {string[]} [parameters.hiddenFields] - Hidden metadata fields to return\n   * @param {object} [networkParameters] - Parameters relevant to the network request\n   * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n   * @returns {Promise}\n   * @see https://docs.constructor.io/rest_api/recommendations\n   * @example\n   * constructorio.recommendations.getRecommendations('t-shirt-best-sellers', {\n   *     numResults: 5,\n   *     filters: {\n   *         size: 'medium'\n   *     },\n   * });\n   */\n\n\n  (0, _createClass2[\"default\"])(Recommendations, [{\n    key: \"getRecommendations\",\n    value: function getRecommendations(podId, parameters) {\n      var _this = this;\n\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var signal;\n\n      if (typeof AbortController === 'function') {\n        var controller = new AbortController();\n        signal = controller && controller.signal; // Handle network timeout if specified\n\n        helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      }\n\n      try {\n        requestUrl = createRecommendationsUrl(podId, parameters, this.options);\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.response && json.response.results) {\n          if (json.result_id) {\n            // Append `result_id` to each result item\n            json.response.results.forEach(function (result) {\n              // eslint-disable-next-line no-param-reassign\n              result.result_id = json.result_id;\n            });\n          }\n\n          _this.eventDispatcher.queue('recommendations.getRecommendations.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getRecommendations response data is malformed');\n      });\n    }\n  }]);\n  return Recommendations;\n}();\n\nmodule.exports = Recommendations;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","\"use strict\";\n\n/* eslint-disable no-useless-escape */\n\n/* cspell:disable */\nmodule.exports = ['Googlebot\\/', 'Googlebot-Mobile', 'Googlebot-Image', 'Googlebot-News', 'Googlebot-Video', 'AdsBot-Google([^-]|$)', 'AdsBot-Google-Mobile', 'Feedfetcher-Google', 'Mediapartners-Google', 'Mediapartners \\\\(Googlebot\\\\)', 'APIs-Google', 'bingbot', 'Slurp', '[wW]get', 'curl', 'LinkedInBot', 'Python-urllib', 'python-requests', 'libwww', 'httpunit', 'nutch', 'Go-http-client', 'phpcrawl', 'msnbot', 'jyxobot', 'FAST-WebCrawler', 'FAST Enterprise Crawler', 'BIGLOTRON', 'Teoma', 'convera', 'seekbot', 'Gigabot', 'Gigablast', 'exabot', 'ia_archiver', 'GingerCrawler', 'webmon ', 'HTTrack', 'grub\\\\.org', 'UsineNouvelleCrawler', 'antibot', 'netresearchserver', 'speedy', 'fluffy', 'bibnum\\\\.bnf', 'findlink', 'msrbot', 'panscient', 'yacybot', 'AISearchBot', 'ips-agent', 'tagoobot', 'MJ12bot', 'woriobot', 'yanga', 'buzzbot', 'mlbot', 'YandexBot', 'yandex\\\\.com\\/bots', 'purebot', 'Linguee Bot', 'CyberPatrol', 'voilabot', 'Baiduspider', 'citeseerxbot', 'spbot', 'twengabot', 'postrank', 'turnitinbot', 'scribdbot', 'page2rss', 'sitebot', 'linkdex', 'Adidxbot', 'blekkobot', 'ezooms', 'dotbot', 'Mail\\\\.RU_Bot', 'discobot', 'heritrix', 'findthatfile', 'europarchive\\\\.org', 'NerdByNature\\\\.Bot', 'sistrix crawler', 'Ahrefs(Bot|SiteAudit)', 'fuelbot', 'CrunchBot', 'centurybot9', 'IndeedBot', 'mappydata', 'woobot', 'ZoominfoBot', 'PrivacyAwareBot', 'Multiviewbot', 'SWIMGBot', 'Grobbot', 'eright', 'Apercite', 'semanticbot', 'Aboundex', 'domaincrawler', 'wbsearchbot', 'summify', 'CCBot', 'edisterbot', 'seznambot', 'ec2linkfinder', 'gslfbot', 'aiHitBot', 'intelium_bot', 'facebookexternalhit', 'Yeti', 'RetrevoPageAnalyzer', 'lb-spider', 'Sogou', 'lssbot', 'careerbot', 'wotbox', 'wocbot', 'ichiro', 'DuckDuckBot', 'lssrocketcrawler', 'drupact', 'webcompanycrawler', 'acoonbot', 'openindexspider', 'gnam gnam spider', 'web-archive-net\\\\.com\\\\.bot', 'backlinkcrawler', 'coccoc', 'integromedb', 'content crawler spider', 'toplistbot', 'it2media-domain-crawler', 'ip-web-crawler\\\\.com', 'siteexplorer\\\\.info', 'elisabot', 'proximic', 'changedetection', 'arabot', 'WeSEE:Search', 'niki-bot', 'CrystalSemanticsBot', 'rogerbot', '360Spider', 'psbot', 'InterfaxScanBot', 'CC Metadata Scaper', 'g00g1e\\\\.net', 'GrapeshotCrawler', 'urlappendbot', 'brainobot', 'fr-crawler', 'binlar', 'SimpleCrawler', 'Twitterbot', 'cXensebot', 'smtbot', 'bnf\\\\.fr_bot', 'A6-Indexer', 'ADmantX', 'Facebot', 'OrangeBot\\/', 'memorybot', 'AdvBot', 'MegaIndex', 'SemanticScholarBot', 'ltx71', 'nerdybot', 'xovibot', 'BUbiNG', 'Qwantify', 'archive\\\\.org_bot', 'Applebot', 'TweetmemeBot', 'crawler4j', 'findxbot', 'S[eE][mM]rushBot', 'yoozBot', 'lipperhey', 'Y!J', 'Domain Re-Animator Bot', 'AddThis', 'Screaming Frog SEO Spider', 'MetaURI', 'Scrapy', 'Livelap[bB]ot', 'OpenHoseBot', 'CapsuleChecker', 'collection@infegy\\\\.com', 'IstellaBot', 'DeuSu\\/', 'betaBot', 'Cliqzbot\\/', 'MojeekBot\\/', 'netEstate NE Crawler', 'SafeSearch microdata crawler', 'Gluten Free Crawler\\/', 'Sonic', 'Sysomos', 'Trove', 'deadlinkchecker', 'Slack-ImgProxy', 'Embedly', 'RankActiveLinkBot', 'iskanie', 'SafeDNSBot', 'SkypeUriPreview', 'Veoozbot', 'Slackbot', 'redditbot', 'datagnionbot', 'Google-Adwords-Instant', 'adbeat_bot', 'WhatsApp', 'contxbot', 'pinterest', 'electricmonk', 'GarlikCrawler', 'BingPreview\\/', 'vebidoobot', 'FemtosearchBot', 'Yahoo Link Preview', 'MetaJobBot', 'DomainStatsBot', 'mindUpBot', 'Daum\\/', 'Jugendschutzprogramm-Crawler', 'Xenu Link Sleuth', 'Pcore-HTTP', 'moatbot', 'KosmioBot', 'pingdom', 'PhantomJS', 'Gowikibot', 'PiplBot', 'Discordbot', 'TelegramBot', 'Jetslide', 'newsharecounts', 'James BOT', 'Barkrowler', 'TinEye', 'SocialRankIOBot', 'trendictionbot', 'Ocarinabot', 'epicbot', 'Primalbot', 'DuckDuckGo-Favicons-Bot', 'GnowitNewsbot', 'Leikibot', 'LinkArchiver', 'YaK\\/', 'PaperLiBot', 'Digg Deeper', 'dcrawl', 'Snacktory', 'AndersPinkBot', 'Fyrebot', 'EveryoneSocialBot', 'Mediatoolkitbot', 'Luminator-robots', 'ExtLinksBot', 'SurveyBot', 'NING\\/', 'okhttp', 'Nuzzel', 'omgili', 'PocketParser', 'YisouSpider', 'um-LN', 'ToutiaoSpider', 'MuckRack', \"Jamie's Spider\", 'AHC\\/', 'NetcraftSurveyAgent', 'Laserlikebot', 'Apache-HttpClient', 'AppEngine-Google', 'Jetty', 'Upflow', 'Thinklab', 'Traackr\\\\.com', 'Twurly', 'Mastodon', 'http_get', 'DnyzBot', 'botify', '007ac9 Crawler', 'BehloolBot', 'BrandVerity', 'check_http', 'BDCbot', 'ZumBot', 'EZID', 'ICC-Crawler', 'ArchiveBot', '^LCC ', 'filterdb\\\\.iss\\\\.net\\/crawler', 'BLP_bbot', 'BomboraBot', 'Buck\\/', 'Companybook-Crawler', 'Genieo', 'magpie-crawler', 'MeltwaterNews', 'Moreover', 'newspaper\\/', 'ScoutJet', '(^| )sentry\\/', 'StorygizeBot', 'UptimeRobot', 'OutclicksBot', 'seoscanners', 'Hatena', 'Google Web Preview', 'MauiBot', 'AlphaBot', 'SBL-BOT', 'IAS crawler', 'adscanner', 'Netvibes', 'acapbot', 'Baidu-YunGuanCe', 'bitlybot', 'blogmuraBot', 'Bot\\\\.AraTurka\\\\.com', 'bot-pge\\\\.chlooe\\\\.com', 'BoxcarBot', 'BTWebClient', 'ContextAd Bot', 'Digincore bot', 'Disqus', 'Feedly', 'Fetch\\/', 'Fever', 'Flamingo_SearchEngine', 'FlipboardProxy', 'g2reader-bot', 'imrbot', 'K7MLWCBot', 'Kemvibot', 'Landau-Media-Spider', 'linkapediabot', 'vkShare', 'Siteimprove\\\\.com', 'BLEXBot\\/', 'DareBoost', 'ZuperlistBot\\/', 'Miniflux\\/', 'Feedspotbot\\/', 'Diffbot\\/', 'SEOkicks', 'tracemyfile', 'Nimbostratus-Bot'];","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/* eslint-disable class-methods-use-this */\nvar store = require('./store');\n\nvar botList = require('./botlist');\n\nvar helpers = require('./helpers');\n\nvar storageKey = '_constructorio_is_human';\nvar humanEvents = ['scroll', 'resize', 'touchmove', 'mouseover', 'mousemove', 'keydown', 'keypress', 'keyup', 'focus'];\n\nvar HumanityCheck = /*#__PURE__*/function () {\n  function HumanityCheck() {\n    var _this = this;\n\n    (0, _classCallCheck2[\"default\"])(this, HumanityCheck);\n    this.isHumanBoolean = this.getIsHumanFromSessionStorage(); // Humanity proved, remove handlers to prove humanity\n\n    var remove = function remove() {\n      _this.isHumanBoolean = true;\n      store.session.set(storageKey, true);\n      humanEvents.forEach(function (eventType) {\n        helpers.removeEventListener(eventType, remove, true);\n      });\n    }; // Add handlers to prove humanity\n\n\n    if (!this.isHumanBoolean) {\n      humanEvents.forEach(function (eventType) {\n        helpers.addEventListener(eventType, remove, true);\n      });\n    }\n  }\n\n  (0, _createClass2[\"default\"])(HumanityCheck, [{\n    key: \"getIsHumanFromSessionStorage\",\n    value: function getIsHumanFromSessionStorage() {\n      return !!store.session.get(storageKey) || false;\n    } // Return boolean indicating if is human\n\n  }, {\n    key: \"isHuman\",\n    value: function isHuman() {\n      return this.isHumanBoolean || !!store.session.get(storageKey);\n    } // Return boolean indicating if useragent matches botlist\n\n  }, {\n    key: \"isBot\",\n    value: function isBot() {\n      if (this.getIsHumanFromSessionStorage()) {\n        return false;\n      }\n\n      var _helpers$getNavigator = helpers.getNavigator(),\n          userAgent = _helpers$getNavigator.userAgent,\n          webdriver = _helpers$getNavigator.webdriver;\n\n      var botRegex = new RegExp(\"(\".concat(botList.join('|'), \")\"));\n      return Boolean(userAgent.match(botRegex)) || Boolean(webdriver);\n    }\n  }]);\n  return HumanityCheck;\n}();\n\nmodule.exports = HumanityCheck;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/* eslint-disable brace-style, no-unneeded-ternary */\nvar store = require('./store');\n\nvar HumanityCheck = require('./humanity-check');\n\nvar helpers = require('./helpers');\n\nvar storageKey = '_constructorio_requests';\nvar requestTTL = 180000; // 3 minutes in milliseconds\n\nvar RequestQueue = /*#__PURE__*/function () {\n  function RequestQueue(options, eventemitter) {\n    var _this = this;\n\n    (0, _classCallCheck2[\"default\"])(this, RequestQueue);\n    this.options = options;\n    this.eventemitter = eventemitter;\n    this.humanity = new HumanityCheck();\n    this.requestPending = false;\n    this.pageUnloading = false;\n    this.sendTrackingEvents = options && options.sendTrackingEvents === true ? true : false; // Defaults to 'false'\n    // Mark if page environment is unloading\n\n    helpers.addEventListener('beforeunload', function () {\n      _this.pageUnloading = true;\n    });\n\n    if (this.sendTrackingEvents) {\n      this.send();\n    }\n  } // Add request to queue to be dispatched\n\n\n  (0, _createClass2[\"default\"])(RequestQueue, [{\n    key: \"queue\",\n    value: function queue(url) {\n      var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n      var body = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var networkParameters = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      if (this.sendTrackingEvents && !this.humanity.isBot()) {\n        var queue = RequestQueue.get();\n        queue.push({\n          url: url,\n          method: method,\n          body: body,\n          networkParameters: networkParameters\n        });\n        RequestQueue.set(queue);\n      }\n    } // Read from queue and send events to server\n\n  }, {\n    key: \"sendEvents\",\n    value: function sendEvents() {\n      var _this2 = this;\n\n      var fetch = this.options.fetch;\n      var queue = RequestQueue.get();\n\n      if ( // Consider user \"human\" if no DOM context is available\n      (!helpers.canUseDOM() || this.humanity.isHuman()) && !this.requestPending && !this.pageUnloading && queue.length) {\n        var request;\n        var nextInQueue = queue.shift();\n        var _nextInQueue = nextInQueue,\n            networkParameters = _nextInQueue.networkParameters;\n        var signal;\n        var instance = this;\n        RequestQueue.set(queue);\n\n        if (networkParameters && typeof AbortController === 'function') {\n          var controller = new AbortController();\n          signal = controller.signal;\n          helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n        } // Backwards compatibility with versions <= 2.0.0, can be removed in future\n        // - Request queue entries used to be strings with 'GET' method assumed\n\n\n        if (typeof nextInQueue === 'string') {\n          nextInQueue = {\n            url: nextInQueue,\n            method: 'GET'\n          };\n        } // If events older than `requestTTL` exist in queue, clear request queue\n        // - Prevents issue where stale items are sent in perpetuity\n        // - No request should go unsent for longer than `requestTTL`\n\n\n        if (nextInQueue.url) {\n          // Pull `dt` parameter from URL, indicating origin time of request\n          var dtMatch = nextInQueue.url.match(/\\?.*_dt=([^&]+)/);\n          var requestOriginTime = parseInt(dtMatch && dtMatch[1], 10);\n          var now = +new Date();\n\n          if (requestOriginTime && Number.isInteger(requestOriginTime) && now - requestOriginTime > requestTTL) {\n            this.sendTrackingEvents = false;\n            RequestQueue.remove();\n            return;\n          }\n        }\n\n        if (nextInQueue.method === 'GET') {\n          request = fetch(nextInQueue.url, {\n            signal: signal\n          });\n        }\n\n        if (nextInQueue.method === 'POST') {\n          request = fetch(nextInQueue.url, {\n            method: nextInQueue.method,\n            body: JSON.stringify(nextInQueue.body),\n            mode: 'cors',\n            headers: {\n              'Content-Type': 'text/plain'\n            },\n            signal: signal\n          });\n        }\n\n        if (request) {\n          this.requestPending = true;\n          request.then(function (response) {\n            // Request was successful, and returned a 2XX status code\n            if (response.ok) {\n              if (instance.eventemitter) {\n                instance.eventemitter.emit('success', {\n                  url: nextInQueue.url,\n                  method: nextInQueue.method,\n                  message: 'ok'\n                });\n              }\n\n              _this2.requestPending = false;\n\n              _this2.send();\n            } // Request was successful, but returned a non-2XX status code\n            else {\n              response.json().then(function (json) {\n                if (instance.eventemitter) {\n                  instance.eventemitter.emit('error', {\n                    url: nextInQueue.url,\n                    method: nextInQueue.method,\n                    message: json && json.message\n                  });\n                }\n\n                _this2.requestPending = false;\n\n                _this2.send();\n              })[\"catch\"](function (error) {\n                if (instance.eventemitter) {\n                  instance.eventemitter.emit('error', {\n                    url: nextInQueue.url,\n                    method: nextInQueue.method,\n                    message: error.type\n                  });\n                }\n\n                _this2.requestPending = false;\n\n                _this2.send();\n              });\n            }\n          })[\"catch\"](function (error) {\n            if (instance.eventemitter) {\n              instance.eventemitter.emit('error', {\n                url: nextInQueue.url,\n                method: nextInQueue.method,\n                message: error && error.toString && error.toString()\n              });\n            }\n\n            _this2.requestPending = false;\n\n            _this2.send();\n          });\n        }\n      }\n    } // Read from queue and send requests to server\n\n  }, {\n    key: \"send\",\n    value: function send() {\n      if (this.sendTrackingEvents) {\n        if (this.options && this.options.trackingSendDelay === 0) {\n          this.sendEvents();\n        } else {\n          // Defer sending of events to give beforeunload time to register (avoids race condition)\n          setTimeout(this.sendEvents.bind(this), this.options && this.options.trackingSendDelay || 250);\n        }\n      }\n    } // Return current request queue\n\n  }], [{\n    key: \"get\",\n    value: function get() {\n      return store.local.get(storageKey) || [];\n    } // Update current request queue\n\n  }, {\n    key: \"set\",\n    value: function set(queue) {\n      // If queue length is zero, remove entry entirely\n      if (!queue || Array.isArray(queue) && queue.length === 0) {\n        RequestQueue.remove();\n      } else {\n        store.local.set(storageKey, queue);\n      }\n\n      var localStorageQueue = RequestQueue.get(); // Ensure storage queue was set correctly in storage by checking length\n      // - Otherwise remove all pending requests as preventative measure\n      // - Firefox seeing identical events being transmitted multiple times\n\n      if (Array.isArray(localStorageQueue) && localStorageQueue.length !== queue.length) {\n        this.sendTrackingEvents = false;\n        RequestQueue.remove();\n      }\n    } // Remove current request queue key\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      store.local.remove(storageKey);\n    }\n  }]);\n  return RequestQueue;\n}();\n\nmodule.exports = RequestQueue;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable object-curly-newline, no-underscore-dangle, camelcase, no-unneeded-ternary */\nvar EventEmitter = require('events');\n\nvar helpers = require('../utils/helpers');\n\nvar RequestQueue = require('../utils/request-queue');\n\nfunction applyParams(parameters, options) {\n  var apiKey = options.apiKey,\n      version = options.version,\n      sessionId = options.sessionId,\n      clientId = options.clientId,\n      userId = options.userId,\n      segments = options.segments,\n      testCells = options.testCells,\n      requestMethod = options.requestMethod,\n      beaconMode = options.beaconMode;\n\n  var _helpers$getWindowLoc = helpers.getWindowLocation(),\n      host = _helpers$getWindowLoc.host,\n      pathname = _helpers$getWindowLoc.pathname;\n\n  var sendReferrerWithTrackingEvents = options.sendReferrerWithTrackingEvents === false ? false : true; // Defaults to 'true'\n\n  var aggregateParams = Object.assign(parameters);\n\n  if (version) {\n    aggregateParams.c = version;\n  }\n\n  if (clientId) {\n    aggregateParams.i = clientId;\n  }\n\n  if (sessionId) {\n    aggregateParams.s = sessionId;\n  }\n\n  if (userId) {\n    aggregateParams.ui = String(userId);\n  }\n\n  if (segments && segments.length) {\n    aggregateParams.us = segments;\n  }\n\n  if (apiKey) {\n    aggregateParams.key = apiKey;\n  }\n\n  if (testCells) {\n    Object.keys(testCells).forEach(function (testCellKey) {\n      aggregateParams[\"ef-\".concat(testCellKey)] = testCells[testCellKey];\n    });\n  }\n\n  if (beaconMode && requestMethod && requestMethod.match(/POST/i)) {\n    aggregateParams.beacon = true;\n  }\n\n  if (sendReferrerWithTrackingEvents && host) {\n    aggregateParams.origin_referrer = host;\n\n    if (pathname) {\n      aggregateParams.origin_referrer += pathname;\n    }\n  }\n\n  aggregateParams._dt = Date.now();\n  aggregateParams = helpers.cleanParams(aggregateParams);\n  return aggregateParams;\n} // Append common parameters to supplied parameters object and return as string\n\n\nfunction applyParamsAsString(parameters, options) {\n  return helpers.stringify(applyParams(parameters, options));\n}\n/**\n * Interface to tracking related API calls\n *\n * @module tracker\n * @inner\n * @returns {object}\n */\n\n\nvar Tracker = /*#__PURE__*/function () {\n  function Tracker(options) {\n    (0, _classCallCheck2[\"default\"])(this, Tracker);\n    this.options = options || {};\n    this.eventemitter = new EventEmitter();\n    this.requests = new RequestQueue(options, this.eventemitter);\n    this.behavioralV2Url = 'https://ac.cnstrc.com/v2/behavioral_action/';\n  }\n  /**\n   * Send session start event to API\n   * @private\n   * @function trackSessionStartV2\n   * @param {object} [networkParameters] - Parameters relevant to the network request\n   * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n   * @returns {(true|Error)}\n   * @example\n   * constructorio.tracker.trackSessionStartV2();\n   */\n\n\n  (0, _createClass2[\"default\"])(Tracker, [{\n    key: \"trackSessionStartV2\",\n    value: function trackSessionStartV2() {\n      var networkParameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var url = \"\".concat(this.behavioralV2Url, \"session_start?\");\n      this.requests.queue(\"\".concat(url).concat(applyParamsAsString({}, this.options)), 'POST', undefined, networkParameters);\n      this.requests.send();\n      return true;\n    }\n    /**\n     * Send session start event to API\n     *\n     * @function trackSessionStart\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @example\n     * constructorio.tracker.trackSessionStart();\n     */\n\n  }, {\n    key: \"trackSessionStart\",\n    value: function trackSessionStart() {\n      var networkParameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var url = \"\".concat(this.options.serviceUrl, \"/behavior?\");\n      var queryParams = {\n        action: 'session_start'\n      };\n      this.requests.queue(\"\".concat(url).concat(applyParamsAsString(queryParams, this.options)), undefined, undefined, networkParameters);\n      this.requests.send();\n      return true;\n    }\n    /**\n     * Send input focus event to API\n     * @private\n     * @function trackInputFocusV2\n     * @param {string} userInput - Input at the time user focused on the search bar\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User focused on search input element\n     * @example\n     * constructorio.tracker.trackInputFocusV2(\"text\");\n     */\n\n  }, {\n    key: \"trackInputFocusV2\",\n    value: function trackInputFocusV2() {\n      var userInput = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var baseUrl = \"\".concat(this.behavioralV2Url, \"focus?\");\n      var bodyParams = {};\n      var networkParametersNew = networkParameters;\n      var userInputNew = userInput;\n\n      if ((0, _typeof2[\"default\"])(userInput) === 'object') {\n        networkParametersNew = userInput;\n        userInputNew = '';\n      }\n\n      bodyParams.user_input = userInputNew;\n      var requestMethod = 'POST';\n      var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n        requestMethod: requestMethod\n      }));\n      this.requests.queue(\"\".concat(baseUrl).concat(applyParamsAsString({}, this.options)), requestMethod, requestBody, networkParametersNew);\n      this.requests.send();\n      return true;\n    }\n    /**\n     * Send input focus event to API\n     *\n     * @function trackInputFocus\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User focused on search input element\n     * @example\n     * constructorio.tracker.trackInputFocus();\n     */\n\n  }, {\n    key: \"trackInputFocus\",\n    value: function trackInputFocus() {\n      var networkParameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var url = \"\".concat(this.options.serviceUrl, \"/behavior?\");\n      var queryParams = {\n        action: 'focus'\n      };\n      this.requests.queue(\"\".concat(url).concat(applyParamsAsString(queryParams, this.options)), undefined, undefined, networkParameters);\n      this.requests.send();\n      return true;\n    }\n    /**\n     * Send item detail load event to API\n     *\n     * @function trackItemDetailLoad\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.itemName - Product item name\n     * @param {string} parameters.itemId - Product item unique identifier\n     * @param {string} parameters.url - Current page URL\n     * @param {string} [parameters.variationId] - Product item variation unique identifier\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User loaded an item detail page\n     * @example\n     * constructorio.tracker.trackItemDetailLoad(\n     *     {\n     *         itemName: 'Red T-Shirt',\n     *         itemId: 'KMH876',\n     *         url: 'https://constructor.io/product/KMH876',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackItemDetailLoad\",\n    value: function trackItemDetailLoad(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestUrlPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/item_detail_load?\");\n        var queryParams = {};\n        var bodyParams = {};\n        var item_name = parameters.item_name,\n            name = parameters.name,\n            item_id = parameters.item_id,\n            customer_id = parameters.customer_id,\n            _parameters$customerI = parameters.customerId,\n            customerId = _parameters$customerI === void 0 ? customer_id : _parameters$customerI,\n            variation_id = parameters.variation_id,\n            _parameters$itemName = parameters.itemName,\n            itemName = _parameters$itemName === void 0 ? item_name || name : _parameters$itemName,\n            _parameters$itemId = parameters.itemId,\n            itemId = _parameters$itemId === void 0 ? item_id || customerId : _parameters$itemId,\n            _parameters$variation = parameters.variationId,\n            variationId = _parameters$variation === void 0 ? variation_id : _parameters$variation,\n            url = parameters.url; // Ensure support for both item_name and name as parameters\n\n        if (itemName) {\n          bodyParams.item_name = itemName;\n        } // Ensure support for both item_id and customer_id as parameters\n\n\n        if (itemId) {\n          bodyParams.item_id = itemId;\n        }\n\n        if (variationId) {\n          bodyParams.variation_id = variationId;\n        }\n\n        if (url) {\n          bodyParams.url = url;\n        }\n\n        var requestURL = \"\".concat(requestUrlPath).concat(applyParamsAsString(queryParams, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send autocomplete select event to API\n     * @private\n     * @function trackAutocompleteSelectV2\n     * @param {string} itemName - Name of selected autocomplete item\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.userInput - The current autocomplete search query\n     * @param {string} [parameters.section] - Section the selected item resides within\n     * @param {string} [parameters.tr] - Trigger used to select the item (click, etc.)\n     * @param {string} [parameters.itemId] - Item id of the selected item\n     * @param {string} [parameters.variationId] - Variation id of the selected item\n     * @param {string} [parameters.groupId] - Group identifier of selected item\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User selected (clicked, or navigated to via keyboard) a result that appeared within autocomplete\n     * @example\n     * constructorio.tracker.trackAutocompleteSelectV2(\n     *     'T-Shirt',\n     *      {\n     *          userInput: 'Shirt',\n     *          section: 'Products',\n     *          tr: 'click',\n     *          groupId: '88JU230',\n     *          itemId: '12345',\n     *          variationId: '12345-A',\n     *      },\n     * );\n     */\n\n  }, {\n    key: \"trackAutocompleteSelectV2\",\n    value: function trackAutocompleteSelectV2(itemName, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure term is provided (required)\n      if (itemName && typeof itemName === 'string') {\n        // Ensure parameters are provided (required)\n        if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n          var baseUrl = \"\".concat(this.behavioralV2Url, \"autocomplete_select?\");\n          var original_query = parameters.original_query,\n              _parameters$originalQ = parameters.originalQuery,\n              originalQuery = _parameters$originalQ === void 0 ? original_query : _parameters$originalQ,\n              user_input = parameters.user_input,\n              _parameters$userInput = parameters.userInput,\n              userInput = _parameters$userInput === void 0 ? originalQuery || user_input : _parameters$userInput,\n              original_section = parameters.original_section,\n              _parameters$section = parameters.section,\n              section = _parameters$section === void 0 ? original_section : _parameters$section,\n              tr = parameters.tr,\n              group_id = parameters.group_id,\n              _parameters$groupId = parameters.groupId,\n              groupId = _parameters$groupId === void 0 ? group_id : _parameters$groupId,\n              item_id = parameters.item_id,\n              _parameters$itemId2 = parameters.itemId,\n              itemId = _parameters$itemId2 === void 0 ? item_id : _parameters$itemId2,\n              variation_id = parameters.variation_id,\n              _parameters$variation2 = parameters.variationId,\n              variationId = _parameters$variation2 === void 0 ? variation_id : _parameters$variation2;\n          var queryParams = {};\n          var bodyParams = {\n            user_input: userInput,\n            tr: tr,\n            group_id: groupId,\n            item_id: itemId,\n            variation_id: variationId,\n            item_name: itemName,\n            section: section\n          };\n\n          if (section) {\n            queryParams.section = section;\n          }\n\n          var requestURL = \"\".concat(baseUrl).concat(applyParamsAsString(queryParams, this.options));\n          var requestMethod = 'POST';\n          var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n            requestMethod: requestMethod\n          }));\n          this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n          this.requests.send();\n          return true;\n        }\n\n        this.requests.send();\n        return new Error('parameters are required of type object');\n      }\n\n      this.requests.send();\n      return new Error('term is a required parameter of type string');\n    }\n    /**\n     * Send autocomplete select event to API\n     *\n     * @function trackAutocompleteSelect\n     * @param {string} term - Term of selected autocomplete item\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.originalQuery - The current autocomplete search query\n     * @param {string} parameters.section - Section the selected item resides within\n     * @param {string} [parameters.tr] - Trigger used to select the item (click, etc.)\n     * @param {string} [parameters.groupId] - Group identifier of selected item\n     * @param {string} [parameters.displayName] - Display name of group of selected item\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User selected (clicked, or navigated to via keyboard) a result that appeared within autocomplete\n     * @example\n     * constructorio.tracker.trackAutocompleteSelect(\n     *     'T-Shirt',\n     *      {\n     *         originalQuery: 'Shirt',\n     *         section: 'Products',\n     *         tr: 'click',\n     *         groupId: '88JU230',\n     *         displayName: 'apparel',\n     *      },\n     * );\n     */\n\n  }, {\n    key: \"trackAutocompleteSelect\",\n    value: function trackAutocompleteSelect(term, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure term is provided (required)\n      if (term && typeof term === 'string') {\n        // Ensure parameters are provided (required)\n        if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n          var url = \"\".concat(this.options.serviceUrl, \"/autocomplete/\").concat(helpers.encodeURIComponentRFC3986(helpers.trimNonBreakingSpaces(term)), \"/select?\");\n          var queryParams = {};\n          var original_query = parameters.original_query,\n              _parameters$originalQ2 = parameters.originalQuery,\n              originalQuery = _parameters$originalQ2 === void 0 ? original_query : _parameters$originalQ2,\n              section = parameters.section,\n              original_section = parameters.original_section,\n              _parameters$originalS = parameters.originalSection,\n              originalSection = _parameters$originalS === void 0 ? original_section : _parameters$originalS,\n              tr = parameters.tr,\n              group_id = parameters.group_id,\n              _parameters$groupId2 = parameters.groupId,\n              groupId = _parameters$groupId2 === void 0 ? group_id : _parameters$groupId2,\n              display_name = parameters.display_name,\n              _parameters$displayNa = parameters.displayName,\n              displayName = _parameters$displayNa === void 0 ? display_name : _parameters$displayNa;\n\n          if (originalQuery) {\n            queryParams.original_query = originalQuery;\n          }\n\n          if (tr) {\n            queryParams.tr = tr;\n          }\n\n          if (originalSection || section) {\n            queryParams.section = originalSection || section;\n          }\n\n          if (groupId) {\n            queryParams.group = {\n              group_id: groupId,\n              display_name: displayName\n            };\n          }\n\n          this.requests.queue(\"\".concat(url).concat(applyParamsAsString(queryParams, this.options)), undefined, undefined, networkParameters);\n          this.requests.send();\n          return true;\n        }\n\n        this.requests.send();\n        return new Error('parameters are required of type object');\n      }\n\n      this.requests.send();\n      return new Error('term is a required parameter of type string');\n    }\n    /**\n     * Send autocomplete search event to API\n     * @private\n     * @function trackSearchSubmitV2\n     * @param {string} searchTerm - Term of submitted autocomplete event\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.userInput - The current autocomplete search query\n     * @param {string} [parameters.groupId] - Group identifier of selected item\n     * @param {string} [parameters.section] - The section name for the item Ex. \"Products\"\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User submitted a search (pressing enter within input element, or clicking submit element)\n     * @example\n     * constructorio.tracker.trackSearchSubmitV2(\n     *     'T-Shirt',\n     *     {\n     *         userInput: 'Shirt',\n     *         groupId: '88JU230',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackSearchSubmitV2\",\n    value: function trackSearchSubmitV2(searchTerm, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure term is provided (required)\n      if (searchTerm && typeof searchTerm === 'string') {\n        // Ensure parameters are provided (required)\n        if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n          var baseUrl = \"\".concat(this.behavioralV2Url, \"search_submit?\");\n          var original_query = parameters.original_query,\n              _parameters$originalQ3 = parameters.originalQuery,\n              originalQuery = _parameters$originalQ3 === void 0 ? original_query : _parameters$originalQ3,\n              user_input = parameters.user_input,\n              _parameters$userInput2 = parameters.userInput,\n              userInput = _parameters$userInput2 === void 0 ? originalQuery || user_input : _parameters$userInput2,\n              group_id = parameters.group_id,\n              _parameters$groupId3 = parameters.groupId,\n              groupId = _parameters$groupId3 === void 0 ? group_id : _parameters$groupId3,\n              section = parameters.section;\n          var queryParams = {};\n          var bodyParams = {\n            user_input: userInput,\n            search_term: searchTerm,\n            section: section\n          };\n\n          if (groupId) {\n            bodyParams.filters = {\n              group_id: groupId\n            };\n          }\n\n          if (section) {\n            queryParams.section = section;\n          }\n\n          var requestURL = \"\".concat(baseUrl).concat(applyParamsAsString(queryParams, this.options));\n          var requestMethod = 'POST';\n          var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n            requestMethod: requestMethod\n          }));\n          this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n          this.requests.send();\n          return true;\n        }\n\n        this.requests.send();\n        return new Error('parameters are required of type object');\n      }\n\n      this.requests.send();\n      return new Error('term is a required parameter of type string');\n    }\n    /**\n     * Send autocomplete search event to API\n     *\n     * @function trackSearchSubmit\n     * @param {string} term - Term of submitted autocomplete event\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.originalQuery - The current autocomplete search query\n     * @param {string} [parameters.groupId] - Group identifier of selected item\n     * @param {string} [parameters.displayName] - Display name of group of selected item\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User submitted a search (pressing enter within input element, or clicking submit element)\n     * @example\n     * constructorio.tracker.trackSearchSubmit(\n     *     'T-Shirt',\n     *     {\n     *         originalQuery: 'Shirt',\n     *         groupId: '88JU230',\n     *         displayName: 'apparel',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackSearchSubmit\",\n    value: function trackSearchSubmit(term, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure term is provided (required)\n      if (term && typeof term === 'string') {\n        // Ensure parameters are provided (required)\n        if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n          var url = \"\".concat(this.options.serviceUrl, \"/autocomplete/\").concat(helpers.encodeURIComponentRFC3986(helpers.trimNonBreakingSpaces(term)), \"/search?\");\n          var queryParams = {};\n          var original_query = parameters.original_query,\n              _parameters$originalQ4 = parameters.originalQuery,\n              originalQuery = _parameters$originalQ4 === void 0 ? original_query : _parameters$originalQ4,\n              group_id = parameters.group_id,\n              _parameters$groupId4 = parameters.groupId,\n              groupId = _parameters$groupId4 === void 0 ? group_id : _parameters$groupId4,\n              display_name = parameters.display_name,\n              _parameters$displayNa2 = parameters.displayName,\n              displayName = _parameters$displayNa2 === void 0 ? display_name : _parameters$displayNa2;\n\n          if (originalQuery) {\n            queryParams.original_query = originalQuery;\n          }\n\n          if (groupId) {\n            queryParams.group = {\n              group_id: groupId,\n              display_name: displayName\n            };\n          }\n\n          this.requests.queue(\"\".concat(url).concat(applyParamsAsString(queryParams, this.options)), undefined, undefined, networkParameters);\n          this.requests.send();\n          return true;\n        }\n\n        this.requests.send();\n        return new Error('parameters are required of type object');\n      }\n\n      this.requests.send();\n      return new Error('term is a required parameter of type string');\n    }\n    /**\n     * Send search results loaded v2 event to API\n     * @private\n     * @function trackSearchResultsLoadedV2\n     * @param {string} searchTerm - Search results query term\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.url - URL of the search results page\n     * @param {object[]} parameters.items - List of product item unique identifiers in search results listing\n     * @param {number} [parameters.resultCount] - Total number of results\n     * @param {number} [parameters.resultPage] - Current page of search results\n     * @param {string} [parameters.resultId] - Browse result identifier (returned in response from Constructor)\n     * @param {object} [parameters.selectedFilters] - Selected filters\n     * @param {string} [parameters.sortOrder] - Sort order ('ascending' or 'descending')\n     * @param {string} [parameters.sortBy] - Sorting method\n     * @param {string} [parameters.section] - The section name for the item Ex. \"Products\"\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User viewed a search product listing page\n     * @example\n     * constructorio.tracker.trackSearchResultsLoadedV2(\n     *     'T-Shirt',\n     *     {\n     *         resultCount: 167,\n     *         items: [{itemId: 'KMH876'}, {itemId: 'KMH140'}, {itemId: 'KMH437'}],\n     *         sortOrder: 'ascending'\n     *         sortBy: 'price',\n     *         resultPage: 3,\n     *         resultCount: 20\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackSearchResultsLoadedV2\",\n    value: function trackSearchResultsLoadedV2(searchTerm, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure term is provided (required)\n      if (searchTerm && typeof searchTerm === 'string') {\n        // Ensure parameters are provided (required)\n        if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n          var baseUrl = \"\".concat(this.behavioralV2Url, \"search_result_load?\");\n          var num_results = parameters.num_results,\n              _parameters$numResult = parameters.numResults,\n              numResults = _parameters$numResult === void 0 ? num_results : _parameters$numResult,\n              result_count = parameters.result_count,\n              _parameters$resultCou = parameters.resultCount,\n              resultCount = _parameters$resultCou === void 0 ? numResults || result_count : _parameters$resultCou,\n              customer_ids = parameters.customer_ids,\n              item_ids = parameters.item_ids,\n              _parameters$items = parameters.items,\n              items = _parameters$items === void 0 ? customer_ids || item_ids : _parameters$items,\n              result_page = parameters.result_page,\n              _parameters$resultPag = parameters.resultPage,\n              resultPage = _parameters$resultPag === void 0 ? result_page : _parameters$resultPag,\n              result_id = parameters.result_id,\n              _parameters$resultId = parameters.resultId,\n              resultId = _parameters$resultId === void 0 ? result_id : _parameters$resultId,\n              sort_order = parameters.sort_order,\n              _parameters$sortOrder = parameters.sortOrder,\n              sortOrder = _parameters$sortOrder === void 0 ? sort_order : _parameters$sortOrder,\n              sort_by = parameters.sort_by,\n              _parameters$sortBy = parameters.sortBy,\n              sortBy = _parameters$sortBy === void 0 ? sort_by : _parameters$sortBy,\n              selected_filters = parameters.selected_filters,\n              _parameters$selectedF = parameters.selectedFilters,\n              selectedFilters = _parameters$selectedF === void 0 ? selected_filters : _parameters$selectedF,\n              url = parameters.url,\n              section = parameters.section;\n          var queryParams = {};\n          var transformedItems;\n\n          if (items && Array.isArray(items) && items.length !== 0) {\n            transformedItems = items;\n\n            if (typeof items[0] === 'string' || typeof items[0] === 'number') {\n              transformedItems = items.map(function (itemId) {\n                return {\n                  item_id: String(itemId)\n                };\n              });\n            } else {\n              transformedItems = items.map(function (item) {\n                return helpers.toSnakeCaseKeys(item, false);\n              });\n            }\n          }\n\n          if (section) {\n            queryParams.section = section;\n          }\n\n          var bodyParams = {\n            search_term: searchTerm,\n            result_count: resultCount,\n            items: transformedItems,\n            result_page: resultPage,\n            result_id: resultId,\n            sort_order: sortOrder,\n            sort_by: sortBy,\n            selected_filters: selectedFilters,\n            url: url,\n            section: section\n          };\n          var requestURL = \"\".concat(baseUrl).concat(applyParamsAsString(queryParams, this.options));\n          var requestMethod = 'POST';\n          var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n            requestMethod: requestMethod\n          }));\n          this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n          this.requests.send();\n          return true;\n        }\n\n        this.requests.send();\n        return new Error('parameters are required of type object');\n      }\n\n      this.requests.send();\n      return new Error('term is a required parameter of type string');\n    }\n    /**\n     * Send search results loaded event to API\n     *\n     * @function trackSearchResultsLoaded\n     * @param {string} term - Search results query term\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {number} parameters.numResults - Total number of results\n     * @param {string[]} parameters.itemIds - List of product item unique identifiers in search results listing\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User viewed a search product listing page\n     * @example\n     * constructorio.tracker.trackSearchResultsLoaded(\n     *     'T-Shirt',\n     *     {\n     *         numResults: 167,\n     *         itemIds: ['KMH876', 'KMH140', 'KMH437'],\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackSearchResultsLoaded\",\n    value: function trackSearchResultsLoaded(term, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure term is provided (required)\n      if (term && typeof term === 'string') {\n        // Ensure parameters are provided (required)\n        if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n          var url = \"\".concat(this.options.serviceUrl, \"/behavior?\");\n          var queryParams = {\n            action: 'search-results',\n            term: term\n          };\n          var num_results = parameters.num_results,\n              _parameters$numResult2 = parameters.numResults,\n              numResults = _parameters$numResult2 === void 0 ? num_results : _parameters$numResult2,\n              customer_ids = parameters.customer_ids,\n              _parameters$customerI2 = parameters.customerIds,\n              customerIds = _parameters$customerI2 === void 0 ? customer_ids : _parameters$customerI2,\n              item_ids = parameters.item_ids,\n              _parameters$itemIds = parameters.itemIds,\n              itemIds = _parameters$itemIds === void 0 ? item_ids : _parameters$itemIds;\n          var customerIDs;\n\n          if (!helpers.isNil(numResults)) {\n            queryParams.num_results = numResults;\n          } // Ensure support for both item_ids and customer_ids as parameters\n\n\n          if (itemIds && Array.isArray(itemIds)) {\n            customerIDs = itemIds;\n          } else if (customerIds && Array.isArray(customerIds)) {\n            customerIDs = customerIds;\n          }\n\n          if (customerIDs && Array.isArray(customerIDs) && customerIDs.length) {\n            queryParams.customer_ids = customerIDs.slice(0, 100).join(',');\n          }\n\n          this.requests.queue(\"\".concat(url).concat(applyParamsAsString(queryParams, this.options)), undefined, undefined, networkParameters);\n          this.requests.send();\n          return true;\n        }\n\n        this.requests.send();\n        return new Error('parameters are required of type object');\n      }\n\n      this.requests.send();\n      return new Error('term is a required parameter of type string');\n    }\n    /**\n     * Send click through event to API\n     * @private\n     * @function trackSearchResultClickV2\n     * @param {string} searchTerm - Search results query term\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.itemName - Product item name (Either itemName or itemId is required)\n     * @param {string} parameters.itemId - Product item unique identifier\n     * @param {string} [parameters.variationId] - Product item variation unique identifier\n     * @param {string} [parameters.resultId] - Search result identifier (returned in response from Constructor)\n     * @param {number} [parameters.resultCount] - Number of results in total\n     * @param {number} [parameters.resultPage] - Current page of results\n     * @param {string} [parameters.resultPositionOnPage] - Position of selected items on page\n     * @param {string} [parameters.numResultsPerPage] - Number of results per page\n     * @param {object} [parameters.selectedFilters] - Key - Value map of selected filters\n     * @param {string} [parameters.section] - The section name for the item Ex. \"Products\"\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User clicked a result that appeared within a search product listing page\n     * @example\n     * constructorio.tracker.trackSearchResultClickV2(\n     *     'T-Shirt',\n     *     {\n     *         itemName: 'Red T-Shirt',\n     *         itemId: 'KMH876',\n     *         resultId: '019927c2-f955-4020-8b8d-6b21b93cb5a2',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackSearchResultClickV2\",\n    value: function trackSearchResultClickV2(searchTerm, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure term is provided (required)\n      if (searchTerm && typeof searchTerm === 'string') {\n        // Ensure parameters are provided (required)\n        if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n          var baseUrl = \"\".concat(this.behavioralV2Url, \"search_result_click?\");\n          var num_results = parameters.num_results,\n              customer_id = parameters.customer_id,\n              item_id = parameters.item_id,\n              _parameters$itemId3 = parameters.itemId,\n              itemId = _parameters$itemId3 === void 0 ? customer_id || item_id : _parameters$itemId3,\n              name = parameters.name,\n              item_name = parameters.item_name,\n              _parameters$itemName2 = parameters.itemName,\n              itemName = _parameters$itemName2 === void 0 ? name || item_name : _parameters$itemName2,\n              variation_id = parameters.variation_id,\n              _parameters$variation3 = parameters.variationId,\n              variationId = _parameters$variation3 === void 0 ? variation_id : _parameters$variation3,\n              result_id = parameters.result_id,\n              _parameters$resultId2 = parameters.resultId,\n              resultId = _parameters$resultId2 === void 0 ? result_id : _parameters$resultId2,\n              result_count = parameters.result_count,\n              _parameters$resultCou2 = parameters.resultCount,\n              resultCount = _parameters$resultCou2 === void 0 ? num_results || result_count : _parameters$resultCou2,\n              result_page = parameters.result_page,\n              _parameters$resultPag2 = parameters.resultPage,\n              resultPage = _parameters$resultPag2 === void 0 ? result_page : _parameters$resultPag2,\n              result_position_on_page = parameters.result_position_on_page,\n              _parameters$resultPos = parameters.resultPositionOnPage,\n              resultPositionOnPage = _parameters$resultPos === void 0 ? result_position_on_page : _parameters$resultPos,\n              num_results_per_page = parameters.num_results_per_page,\n              _parameters$numResult3 = parameters.numResultsPerPage,\n              numResultsPerPage = _parameters$numResult3 === void 0 ? num_results_per_page : _parameters$numResult3,\n              selected_filters = parameters.selected_filters,\n              _parameters$selectedF2 = parameters.selectedFilters,\n              selectedFilters = _parameters$selectedF2 === void 0 ? selected_filters : _parameters$selectedF2,\n              section = parameters.section;\n          var bodyParams = {\n            item_name: itemName,\n            item_id: itemId,\n            variation_id: variationId,\n            result_id: resultId,\n            result_count: resultCount,\n            result_page: resultPage,\n            result_position_on_page: resultPositionOnPage,\n            num_results_per_page: numResultsPerPage,\n            selected_filters: selectedFilters,\n            section: section,\n            search_term: searchTerm\n          };\n          var queryParams = {};\n\n          if (section) {\n            queryParams.section = section;\n          }\n\n          var requestURL = \"\".concat(baseUrl).concat(applyParamsAsString(queryParams, this.options));\n          var requestMethod = 'POST';\n          var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n            requestMethod: requestMethod\n          }));\n          this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n          this.requests.send();\n          return true;\n        }\n\n        this.requests.send();\n        return new Error('parameters are required of type object');\n      }\n\n      this.requests.send();\n      return new Error('term is a required parameter of type string');\n    }\n    /**\n     * Send click through event to API\n     *\n     * @function trackSearchResultClick\n     * @param {string} term - Search results query term\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.itemName - Product item name\n     * @param {string} parameters.itemId - Product item unique identifier\n     * @param {string} [parameters.variationId] - Product item variation unique identifier\n     * @param {string} [parameters.resultId] - Search result identifier (returned in response from Constructor)\n     * @param {string} [parameters.itemIsConvertible] - Whether or not an item is available for a conversion\n     * @param {string} [parameters.section] - The section name for the item Ex. \"Products\"\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User clicked a result that appeared within a search product listing page\n     * @example\n     * constructorio.tracker.trackSearchResultClick(\n     *     'T-Shirt',\n     *     {\n     *         itemName: 'Red T-Shirt',\n     *         itemId: 'KMH876',\n     *         resultId: '019927c2-f955-4020-8b8d-6b21b93cb5a2',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackSearchResultClick\",\n    value: function trackSearchResultClick(term, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure term is provided (required)\n      if (term && typeof term === 'string') {\n        // Ensure parameters are provided (required)\n        if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n          var url = \"\".concat(this.options.serviceUrl, \"/autocomplete/\").concat(helpers.encodeURIComponentRFC3986(helpers.trimNonBreakingSpaces(term)), \"/click_through?\");\n          var queryParams = {};\n          var item_name = parameters.item_name,\n              name = parameters.name,\n              _parameters$itemName3 = parameters.itemName,\n              itemName = _parameters$itemName3 === void 0 ? item_name || name : _parameters$itemName3,\n              item_id = parameters.item_id,\n              _parameters$itemId4 = parameters.itemId,\n              itemId = _parameters$itemId4 === void 0 ? item_id : _parameters$itemId4,\n              customer_id = parameters.customer_id,\n              _parameters$customerI3 = parameters.customerId,\n              customerId = _parameters$customerI3 === void 0 ? customer_id || itemId : _parameters$customerI3,\n              variation_id = parameters.variation_id,\n              _parameters$variation4 = parameters.variationId,\n              variationId = _parameters$variation4 === void 0 ? variation_id : _parameters$variation4,\n              result_id = parameters.result_id,\n              _parameters$resultId3 = parameters.resultId,\n              resultId = _parameters$resultId3 === void 0 ? result_id : _parameters$resultId3,\n              item_is_convertible = parameters.item_is_convertible,\n              _parameters$itemIsCon = parameters.itemIsConvertible,\n              itemIsConvertible = _parameters$itemIsCon === void 0 ? item_is_convertible : _parameters$itemIsCon,\n              section = parameters.section; // Ensure support for both item_name and name as parameters\n\n          if (itemName) {\n            queryParams.name = itemName;\n          } // Ensure support for both item_id and customer_id as parameters\n\n\n          if (customerId) {\n            queryParams.customer_id = customerId;\n          }\n\n          if (variationId) {\n            queryParams.variation_id = variationId;\n          }\n\n          if (resultId) {\n            queryParams.result_id = resultId;\n          }\n\n          if (typeof itemIsConvertible === 'boolean') {\n            queryParams.item_is_convertible = itemIsConvertible;\n          }\n\n          if (section) {\n            queryParams.section = section;\n          }\n\n          this.requests.queue(\"\".concat(url).concat(applyParamsAsString(queryParams, this.options)), undefined, undefined, networkParameters);\n          this.requests.send();\n          return true;\n        }\n\n        this.requests.send();\n        return new Error('parameters are required of type object');\n      }\n\n      this.requests.send();\n      return new Error('term is a required parameter of type string');\n    }\n    /**\n     * Send conversion event to API\n     *\n     * @function trackConversion\n     * @param {string} [term] - Search results query term that led to conversion event\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.itemId - Product item unique identifier\n     * @param {number} [parameters.revenue] - Sale price if available, otherwise the regular (retail) price of item\n     * @param {string} [parameters.itemName] - Product item name\n     * @param {string} [parameters.variationId] - Product item variation unique identifier\n     * @param {string} [parameters.type='add_to_cart'] - Conversion type\n     * @param {boolean} [parameters.isCustomType] - Specify if type is custom conversion type\n     * @param {string} [parameters.displayName] - Display name for the custom conversion type\n     * @param {string} [parameters.section=\"Products\"] - Index section\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User performed an action indicating interest in an item (add to cart, add to wishlist, etc.)\n     * @see https://docs.constructor.io/rest_api/behavioral_logging/conversions\n     * @example\n     * constructorio.tracker.trackConversion(\n     *     'T-Shirt',\n     *     {\n     *         itemId: 'KMH876',\n     *         revenue: 12.00,\n     *         itemName: 'Red T-Shirt',\n     *         variationId: 'KMH879-7632',\n     *         type: 'like',\n     *         resultId: '019927c2-f955-4020-8b8d-6b21b93cb5a2',\n     *         section: 'Products',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackConversion\",\n    value: function trackConversion(term, parameters) {\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var searchTerm = term || 'TERM_UNKNOWN';\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/conversion?\");\n        var queryParams = {};\n        var bodyParams = {};\n        var name = parameters.name,\n            item_name = parameters.item_name,\n            _parameters$itemName4 = parameters.itemName,\n            itemName = _parameters$itemName4 === void 0 ? item_name || name : _parameters$itemName4,\n            customer_id = parameters.customer_id,\n            _parameters$customerI4 = parameters.customerId,\n            customerId = _parameters$customerI4 === void 0 ? customer_id : _parameters$customerI4,\n            item_id = parameters.item_id,\n            _parameters$itemId5 = parameters.itemId,\n            itemId = _parameters$itemId5 === void 0 ? item_id || customerId : _parameters$itemId5,\n            variation_id = parameters.variation_id,\n            _parameters$variation5 = parameters.variationId,\n            variationId = _parameters$variation5 === void 0 ? variation_id : _parameters$variation5,\n            revenue = parameters.revenue,\n            _parameters$section2 = parameters.section,\n            section = _parameters$section2 === void 0 ? 'Products' : _parameters$section2,\n            display_name = parameters.display_name,\n            _parameters$displayNa3 = parameters.displayName,\n            displayName = _parameters$displayNa3 === void 0 ? display_name : _parameters$displayNa3,\n            type = parameters.type,\n            is_custom_type = parameters.is_custom_type,\n            _parameters$isCustomT = parameters.isCustomType,\n            isCustomType = _parameters$isCustomT === void 0 ? is_custom_type : _parameters$isCustomT; // Ensure support for both item_id and customer_id as parameters\n\n        if (itemId) {\n          bodyParams.item_id = itemId;\n        } // Ensure support for both item_name and name as parameters\n\n\n        if (itemName) {\n          bodyParams.item_name = itemName;\n        }\n\n        if (variationId) {\n          bodyParams.variation_id = variationId;\n        }\n\n        if (revenue || revenue === 0) {\n          bodyParams.revenue = revenue.toString();\n        }\n\n        if (section) {\n          queryParams.section = section;\n          bodyParams.section = section;\n        }\n\n        if (searchTerm) {\n          bodyParams.search_term = searchTerm;\n        }\n\n        if (type) {\n          bodyParams.type = type;\n        }\n\n        if (isCustomType) {\n          bodyParams.is_custom_type = isCustomType;\n        }\n\n        if (displayName) {\n          bodyParams.display_name = displayName;\n        }\n\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString(queryParams, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send purchase event to API\n     *\n     * @function trackPurchase\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {object[]} parameters.items - List of product item objects\n     * @param {number} parameters.revenue - The subtotal (excluding taxes, shipping, etc.) of the entire order\n     * @param {string} [parameters.orderId] - Unique order identifier\n     * @param {string} [parameters.section=\"Products\"] - Index section\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User completed an order (usually fired on order confirmation page)\n     * @example\n     * constructorio.tracker.trackPurchase(\n     *     {\n     *         items: [{ itemId: 'KMH876' }, { itemId: 'KMH140' }],\n     *         revenue: 12.00,\n     *         orderId: 'OUNXBG2HMA',\n     *         section: 'Products',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackPurchase\",\n    value: function trackPurchase(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/purchase?\");\n        var queryParams = {};\n        var bodyParams = {};\n        var items = parameters.items,\n            revenue = parameters.revenue,\n            order_id = parameters.order_id,\n            _parameters$orderId = parameters.orderId,\n            orderId = _parameters$orderId === void 0 ? order_id : _parameters$orderId,\n            section = parameters.section;\n\n        if (orderId) {\n          // Don't send another purchase event if we have already tracked the order\n          if (helpers.hasOrderIdRecord(orderId)) {\n            return false;\n          }\n\n          helpers.addOrderIdRecord(orderId); // Add order_id to the tracking params\n\n          bodyParams.order_id = orderId;\n        }\n\n        if (items && Array.isArray(items)) {\n          bodyParams.items = items.slice(0, 100).map(function (item) {\n            return helpers.toSnakeCaseKeys(item, false);\n          });\n        }\n\n        if (revenue || revenue === 0) {\n          bodyParams.revenue = revenue;\n        }\n\n        if (section) {\n          queryParams.section = section;\n        } else {\n          queryParams.section = 'Products';\n        }\n\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString(queryParams, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send recommendation view event to API\n     *\n     * @function trackRecommendationView\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.url - Current page URL\n     * @param {string} parameters.podId - Pod identifier\n     * @param {number} parameters.numResultsViewed - Number of results viewed\n     * @param {object[]} [parameters.items] - List of Product Item Objects\n     * @param {number} [parameters.resultCount] - Total number of results\n     * @param {number} [parameters.resultPage] - Page number of results\n     * @param {string} [parameters.resultId] - Recommendation result identifier (returned in response from Constructor)\n     * @param {string} [parameters.section=\"Products\"] - Results section\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User viewed a set of recommendations\n     * @example\n     * constructorio.tracker.trackRecommendationView(\n     *     {\n     *         items: [{ itemId: 'KMH876' }, { itemId: 'KMH140' }],\n     *         resultCount: 22,\n     *         resultPage: 2,\n     *         resultId: '019927c2-f955-4020-8b8d-6b21b93cb5a2',\n     *         url: 'https://demo.constructor.io/sandbox/farmstand',\n     *         podId: '019927c2-f955-4020',\n     *         numResultsViewed: 3,\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackRecommendationView\",\n    value: function trackRecommendationView(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/recommendation_result_view?\");\n        var bodyParams = {};\n        var result_count = parameters.result_count,\n            _parameters$resultCou3 = parameters.resultCount,\n            resultCount = _parameters$resultCou3 === void 0 ? result_count : _parameters$resultCou3,\n            result_page = parameters.result_page,\n            _parameters$resultPag3 = parameters.resultPage,\n            resultPage = _parameters$resultPag3 === void 0 ? result_page : _parameters$resultPag3,\n            result_id = parameters.result_id,\n            _parameters$resultId4 = parameters.resultId,\n            resultId = _parameters$resultId4 === void 0 ? result_id : _parameters$resultId4,\n            section = parameters.section,\n            url = parameters.url,\n            pod_id = parameters.pod_id,\n            _parameters$podId = parameters.podId,\n            podId = _parameters$podId === void 0 ? pod_id : _parameters$podId,\n            num_results_viewed = parameters.num_results_viewed,\n            _parameters$numResult4 = parameters.numResultsViewed,\n            numResultsViewed = _parameters$numResult4 === void 0 ? num_results_viewed : _parameters$numResult4,\n            items = parameters.items;\n\n        if (!helpers.isNil(resultCount)) {\n          bodyParams.result_count = resultCount;\n        }\n\n        if (!helpers.isNil(resultPage)) {\n          bodyParams.result_page = resultPage;\n        }\n\n        if (resultId) {\n          bodyParams.result_id = resultId;\n        }\n\n        if (section) {\n          bodyParams.section = section;\n        } else {\n          bodyParams.section = 'Products';\n        }\n\n        if (url) {\n          bodyParams.url = url;\n        }\n\n        if (podId) {\n          bodyParams.pod_id = podId;\n        }\n\n        if (!helpers.isNil(numResultsViewed)) {\n          bodyParams.num_results_viewed = numResultsViewed;\n        }\n\n        if (items && Array.isArray(items)) {\n          bodyParams.items = items.slice(0, 100).map(function (item) {\n            return helpers.toSnakeCaseKeys(item, false);\n          });\n        }\n\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString({}, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send recommendation click event to API\n     *\n     * @function trackRecommendationClick\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.podId - Pod identifier\n     * @param {string} parameters.strategyId - Strategy identifier\n     * @param {string} parameters.itemId - Product item unique identifier\n     * @param {string} parameters.itemName - Product item name\n     * @param {string} [parameters.variationId] - Product item variation unique identifier\n     * @param {string} [parameters.section=\"Products\"] - Index section\n     * @param {string} [parameters.resultId] - Recommendation result identifier (returned in response from Constructor)\n     * @param {number} [parameters.resultCount] - Total number of results\n     * @param {number} [parameters.resultPage] - Page number of results\n     * @param {number} [parameters.resultPositionOnPage] - Position of result on page\n     * @param {number} [parameters.numResultsPerPage] - Number of results on page\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User clicked an item that appeared within a list of recommended results\n     * @example\n     * constructorio.tracker.trackRecommendationClick(\n     *     {\n     *         variationId: 'KMH879-7632',\n     *         resultId: '019927c2-f955-4020-8b8d-6b21b93cb5a2',\n     *         resultCount: 22,\n     *         resultPage: 2,\n     *         resultPositionOnPage: 2,\n     *         numResultsPerPage: 12,\n     *         podId: '019927c2-f955-4020',\n     *         strategyId: 'complimentary',\n     *         itemId: 'KMH876',\n     *         itemName: 'Socks',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackRecommendationClick\",\n    value: function trackRecommendationClick(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/recommendation_result_click?\");\n        var bodyParams = {};\n        var variation_id = parameters.variation_id,\n            _parameters$variation6 = parameters.variationId,\n            variationId = _parameters$variation6 === void 0 ? variation_id : _parameters$variation6,\n            _parameters$section3 = parameters.section,\n            section = _parameters$section3 === void 0 ? 'Products' : _parameters$section3,\n            result_id = parameters.result_id,\n            _parameters$resultId5 = parameters.resultId,\n            resultId = _parameters$resultId5 === void 0 ? result_id : _parameters$resultId5,\n            result_count = parameters.result_count,\n            _parameters$resultCou4 = parameters.resultCount,\n            resultCount = _parameters$resultCou4 === void 0 ? result_count : _parameters$resultCou4,\n            result_page = parameters.result_page,\n            _parameters$resultPag4 = parameters.resultPage,\n            resultPage = _parameters$resultPag4 === void 0 ? result_page : _parameters$resultPag4,\n            result_position_on_page = parameters.result_position_on_page,\n            _parameters$resultPos2 = parameters.resultPositionOnPage,\n            resultPositionOnPage = _parameters$resultPos2 === void 0 ? result_position_on_page : _parameters$resultPos2,\n            num_results_per_page = parameters.num_results_per_page,\n            _parameters$numResult5 = parameters.numResultsPerPage,\n            numResultsPerPage = _parameters$numResult5 === void 0 ? num_results_per_page : _parameters$numResult5,\n            pod_id = parameters.pod_id,\n            _parameters$podId2 = parameters.podId,\n            podId = _parameters$podId2 === void 0 ? pod_id : _parameters$podId2,\n            strategy_id = parameters.strategy_id,\n            _parameters$strategyI = parameters.strategyId,\n            strategyId = _parameters$strategyI === void 0 ? strategy_id : _parameters$strategyI,\n            item_id = parameters.item_id,\n            _parameters$itemId6 = parameters.itemId,\n            itemId = _parameters$itemId6 === void 0 ? item_id : _parameters$itemId6,\n            item_name = parameters.item_name,\n            _parameters$itemName5 = parameters.itemName,\n            itemName = _parameters$itemName5 === void 0 ? item_name : _parameters$itemName5;\n\n        if (variationId) {\n          bodyParams.variation_id = variationId;\n        }\n\n        if (section) {\n          bodyParams.section = section;\n        }\n\n        if (resultId) {\n          bodyParams.result_id = resultId;\n        }\n\n        if (!helpers.isNil(resultCount)) {\n          bodyParams.result_count = resultCount;\n        }\n\n        if (!helpers.isNil(resultPage)) {\n          bodyParams.result_page = resultPage;\n        }\n\n        if (!helpers.isNil(resultPositionOnPage)) {\n          bodyParams.result_position_on_page = resultPositionOnPage;\n        }\n\n        if (!helpers.isNil(numResultsPerPage)) {\n          bodyParams.num_results_per_page = numResultsPerPage;\n        }\n\n        if (podId) {\n          bodyParams.pod_id = podId;\n        }\n\n        if (strategyId) {\n          bodyParams.strategy_id = strategyId;\n        }\n\n        if (itemId) {\n          bodyParams.item_id = itemId;\n        }\n\n        if (itemName) {\n          bodyParams.item_name = itemName;\n        }\n\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString({}, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send browse results loaded event to API\n     *\n     * @function trackBrowseResultsLoaded\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.url - Current page URL\n     * @param {string} parameters.filterName - Filter name\n     * @param {string} parameters.filterValue - Filter value\n     * @param {object[]} parameters.items - List of product item objects\n     * @param {string} [parameters.section=\"Products\"] - Index section\n     * @param {number} [parameters.resultCount] - Total number of results\n     * @param {number} [parameters.resultPage] - Page number of results\n     * @param {string} [parameters.resultId] - Browse result identifier (returned in response from Constructor)\n     * @param {object} [parameters.selectedFilters] - Selected filters\n     * @param {string} [parameters.sortOrder] - Sort order ('ascending' or 'descending')\n     * @param {string} [parameters.sortBy] - Sorting method\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User viewed a browse product listing page\n     * @example\n     * constructorio.tracker.trackBrowseResultsLoaded(\n     *     {\n     *         resultCount: 22,\n     *         resultPage: 2,\n     *         resultId: '019927c2-f955-4020-8b8d-6b21b93cb5a2',\n     *         selectedFilters: { brand: ['foo'], color: ['black'] },\n     *         sortOrder: 'ascending',\n     *         sortBy: 'price',\n     *         items: [{ itemId: 'KMH876' }, { itemId: 'KMH140' }],\n     *         url: 'https://demo.constructor.io/sandbox/farmstand',\n     *         filterName: 'brand',\n     *         filterValue: 'XYZ',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackBrowseResultsLoaded\",\n    value: function trackBrowseResultsLoaded(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/browse_result_load?\");\n        var bodyParams = {};\n        var _parameters$section4 = parameters.section,\n            section = _parameters$section4 === void 0 ? 'Products' : _parameters$section4,\n            result_count = parameters.result_count,\n            _parameters$resultCou5 = parameters.resultCount,\n            resultCount = _parameters$resultCou5 === void 0 ? result_count : _parameters$resultCou5,\n            result_page = parameters.result_page,\n            _parameters$resultPag5 = parameters.resultPage,\n            resultPage = _parameters$resultPag5 === void 0 ? result_page : _parameters$resultPag5,\n            result_id = parameters.result_id,\n            _parameters$resultId6 = parameters.resultId,\n            resultId = _parameters$resultId6 === void 0 ? result_id : _parameters$resultId6,\n            selected_filters = parameters.selected_filters,\n            _parameters$selectedF3 = parameters.selectedFilters,\n            selectedFilters = _parameters$selectedF3 === void 0 ? selected_filters : _parameters$selectedF3,\n            url = parameters.url,\n            sort_order = parameters.sort_order,\n            _parameters$sortOrder2 = parameters.sortOrder,\n            sortOrder = _parameters$sortOrder2 === void 0 ? sort_order : _parameters$sortOrder2,\n            sort_by = parameters.sort_by,\n            _parameters$sortBy2 = parameters.sortBy,\n            sortBy = _parameters$sortBy2 === void 0 ? sort_by : _parameters$sortBy2,\n            filter_name = parameters.filter_name,\n            _parameters$filterNam = parameters.filterName,\n            filterName = _parameters$filterNam === void 0 ? filter_name : _parameters$filterNam,\n            filter_value = parameters.filter_value,\n            _parameters$filterVal = parameters.filterValue,\n            filterValue = _parameters$filterVal === void 0 ? filter_value : _parameters$filterVal,\n            items = parameters.items;\n\n        if (section) {\n          bodyParams.section = section;\n        }\n\n        if (!helpers.isNil(resultCount)) {\n          bodyParams.result_count = resultCount;\n        }\n\n        if (!helpers.isNil(resultPage)) {\n          bodyParams.result_page = resultPage;\n        }\n\n        if (resultId) {\n          bodyParams.result_id = resultId;\n        }\n\n        if (selectedFilters) {\n          bodyParams.selected_filters = selectedFilters;\n        }\n\n        if (url) {\n          bodyParams.url = url;\n        }\n\n        if (sortOrder) {\n          bodyParams.sort_order = sortOrder;\n        }\n\n        if (sortBy) {\n          bodyParams.sort_by = sortBy;\n        }\n\n        if (filterName) {\n          bodyParams.filter_name = filterName;\n        }\n\n        if (filterValue) {\n          bodyParams.filter_value = filterValue;\n        }\n\n        if (items && Array.isArray(items)) {\n          bodyParams.items = items.slice(0, 100).map(function (item) {\n            return helpers.toSnakeCaseKeys(item, false);\n          });\n        }\n\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString({}, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send browse result click event to API\n     *\n     * @function trackBrowseResultClick\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.filterName - Filter name\n     * @param {string} parameters.filterValue - Filter value\n     * @param {string} parameters.itemId - Product item unique identifier\n     * @param {string} parameters.itemName - Product item name\n     * @param {string} [parameters.section=\"Products\"] - Index section\n     * @param {string} [parameters.variationId] - Product item variation unique identifier\n     * @param {string} [parameters.resultId] - Browse result identifier (returned in response from Constructor)\n     * @param {number} [parameters.resultCount] - Total number of results\n     * @param {number} [parameters.resultPage] - Page number of results\n     * @param {number} [parameters.resultPositionOnPage] - Position of clicked item\n     * @param {number} [parameters.numResultsPerPage] - Number of results shown\n     * @param {object} [parameters.selectedFilters] -  Selected filters\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User clicked a result that appeared within a browse product listing page\n     * @example\n     * constructorio.tracker.trackBrowseResultClick(\n     *     {\n     *         variationId: 'KMH879-7632',\n     *         resultId: '019927c2-f955-4020-8b8d-6b21b93cb5a2',\n     *         resultCount: 22,\n     *         resultPage: 2,\n     *         resultPositionOnPage: 2,\n     *         numResultsPerPage: 12,\n     *         selectedFilters: { brand: ['foo'], color: ['black'] },\n     *         filterName: 'brand',\n     *         filterValue: 'XYZ',\n     *         itemId: 'KMH876',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackBrowseResultClick\",\n    value: function trackBrowseResultClick(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/browse_result_click?\");\n        var bodyParams = {};\n        var _parameters$section5 = parameters.section,\n            section = _parameters$section5 === void 0 ? 'Products' : _parameters$section5,\n            variation_id = parameters.variation_id,\n            _parameters$variation7 = parameters.variationId,\n            variationId = _parameters$variation7 === void 0 ? variation_id : _parameters$variation7,\n            result_id = parameters.result_id,\n            _parameters$resultId7 = parameters.resultId,\n            resultId = _parameters$resultId7 === void 0 ? result_id : _parameters$resultId7,\n            result_count = parameters.result_count,\n            _parameters$resultCou6 = parameters.resultCount,\n            resultCount = _parameters$resultCou6 === void 0 ? result_count : _parameters$resultCou6,\n            result_page = parameters.result_page,\n            _parameters$resultPag6 = parameters.resultPage,\n            resultPage = _parameters$resultPag6 === void 0 ? result_page : _parameters$resultPag6,\n            result_position_on_page = parameters.result_position_on_page,\n            _parameters$resultPos3 = parameters.resultPositionOnPage,\n            resultPositionOnPage = _parameters$resultPos3 === void 0 ? result_position_on_page : _parameters$resultPos3,\n            num_results_per_page = parameters.num_results_per_page,\n            _parameters$numResult6 = parameters.numResultsPerPage,\n            numResultsPerPage = _parameters$numResult6 === void 0 ? num_results_per_page : _parameters$numResult6,\n            selected_filters = parameters.selected_filters,\n            _parameters$selectedF4 = parameters.selectedFilters,\n            selectedFilters = _parameters$selectedF4 === void 0 ? selected_filters : _parameters$selectedF4,\n            filter_name = parameters.filter_name,\n            _parameters$filterNam2 = parameters.filterName,\n            filterName = _parameters$filterNam2 === void 0 ? filter_name : _parameters$filterNam2,\n            filter_value = parameters.filter_value,\n            _parameters$filterVal2 = parameters.filterValue,\n            filterValue = _parameters$filterVal2 === void 0 ? filter_value : _parameters$filterVal2,\n            customer_id = parameters.customer_id,\n            _parameters$customerI5 = parameters.customerId,\n            customerId = _parameters$customerI5 === void 0 ? customer_id : _parameters$customerI5,\n            item_id = parameters.item_id,\n            _parameters$itemId7 = parameters.itemId,\n            itemId = _parameters$itemId7 === void 0 ? customerId || item_id : _parameters$itemId7,\n            item_name = parameters.item_name,\n            name = parameters.name,\n            _parameters$itemName6 = parameters.itemName,\n            itemName = _parameters$itemName6 === void 0 ? item_name || name : _parameters$itemName6;\n\n        if (section) {\n          bodyParams.section = section;\n        }\n\n        if (variationId) {\n          bodyParams.variation_id = variationId;\n        }\n\n        if (resultId) {\n          bodyParams.result_id = resultId;\n        }\n\n        if (!helpers.isNil(resultCount)) {\n          bodyParams.result_count = resultCount;\n        }\n\n        if (!helpers.isNil(resultPage)) {\n          bodyParams.result_page = resultPage;\n        }\n\n        if (!helpers.isNil(resultPositionOnPage)) {\n          bodyParams.result_position_on_page = resultPositionOnPage;\n        }\n\n        if (!helpers.isNil(numResultsPerPage)) {\n          bodyParams.num_results_per_page = numResultsPerPage;\n        }\n\n        if (selectedFilters) {\n          bodyParams.selected_filters = selectedFilters;\n        }\n\n        if (filterName) {\n          bodyParams.filter_name = filterName;\n        }\n\n        if (filterValue) {\n          bodyParams.filter_value = filterValue;\n        }\n\n        if (itemId) {\n          bodyParams.item_id = itemId;\n        } // Ensure support for both item_name and name as parameters\n\n\n        if (itemName) {\n          bodyParams.item_name = itemName;\n        }\n\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString({}, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send generic result click event to API\n     *\n     * @function trackGenericResultClick\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.itemId - Product item unique identifier\n     * @param {string} [parameters.itemName] - Product item name\n     * @param {string} [parameters.variationId] - Product item variation unique identifier\n     * @param {string} [parameters.section=\"Products\"] - Index section\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User clicked a result that appeared outside of the scope of search / browse / recommendations\n     * @example\n     * constructorio.tracker.trackGenericResultClick(\n     *     {\n     *         itemId: 'KMH876',\n     *         itemName: 'Red T-Shirt',\n     *         variationId: 'KMH879-7632',\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackGenericResultClick\",\n    value: function trackGenericResultClick(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure required parameters are provided\n      if ((0, _typeof2[\"default\"])(parameters) === 'object') {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/result_click?\");\n        var bodyParams = {};\n        var item_id = parameters.item_id,\n            _parameters$itemId8 = parameters.itemId,\n            itemId = _parameters$itemId8 === void 0 ? item_id : _parameters$itemId8,\n            item_name = parameters.item_name,\n            _parameters$itemName7 = parameters.itemName,\n            itemName = _parameters$itemName7 === void 0 ? item_name : _parameters$itemName7,\n            variation_id = parameters.variation_id,\n            _parameters$variation8 = parameters.variationId,\n            variationId = _parameters$variation8 === void 0 ? variation_id : _parameters$variation8,\n            _parameters$section6 = parameters.section,\n            section = _parameters$section6 === void 0 ? 'Products' : _parameters$section6;\n\n        if (itemId) {\n          bodyParams.section = section;\n          bodyParams.item_id = itemId;\n\n          if (itemName) {\n            bodyParams.item_name = itemName;\n          }\n\n          if (variationId) {\n            bodyParams.variation_id = variationId;\n          }\n\n          var requestURL = \"\".concat(requestPath).concat(applyParamsAsString({}, this.options));\n          var requestMethod = 'POST';\n          var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n            requestMethod: requestMethod\n          }));\n          this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n          this.requests.send();\n          return true;\n        }\n      }\n\n      this.requests.send();\n      return new Error('A parameters object with an \"itemId\" property is required.');\n    }\n    /**\n     * Send quiz results loaded event to API\n     *\n     * @function trackQuizResultsLoaded\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.quizId - Quiz identifier\n     * @param {string} parameters.quizVersionId - Quiz version identifier\n     * @param {string} parameters.quizSessionId - Quiz session identifier associated with this conversion event\n     * @param {string} parameters.url - Current page url\n     * @param {string} [parameters.section='Products'] - Index section\n     * @param {number} [parameters.resultCount] - Total number of results\n     * @param {number} [parameters.resultPage] - The page of the results\n     * @param {string} [parameters.resultId] - Quiz result identifier (returned in response from Constructor)\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User viewed a quiz results page\n     * @example\n     * constructorio.tracker.trackQuizResultsLoaded(\n     *     {\n     *         quizId: 'coffee-quiz',\n     *         quizVersionId: '1231244',\n     *         quizSessionId: '3123',\n     *         url: 'www.example.com',\n     *         resultCount: 167,\n     *     },\n     * );\n     */\n\n  }, {\n    key: \"trackQuizResultsLoaded\",\n    value: function trackQuizResultsLoaded(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/quiz_result_load?\");\n        var quiz_id = parameters.quiz_id,\n            _parameters$quizId = parameters.quizId,\n            quizId = _parameters$quizId === void 0 ? quiz_id : _parameters$quizId,\n            quiz_version_id = parameters.quiz_version_id,\n            _parameters$quizVersi = parameters.quizVersionId,\n            quizVersionId = _parameters$quizVersi === void 0 ? quiz_version_id : _parameters$quizVersi,\n            quiz_session_id = parameters.quiz_session_id,\n            _parameters$quizSessi = parameters.quizSessionId,\n            quizSessionId = _parameters$quizSessi === void 0 ? quiz_session_id : _parameters$quizSessi,\n            url = parameters.url,\n            _parameters$section7 = parameters.section,\n            section = _parameters$section7 === void 0 ? 'Products' : _parameters$section7,\n            result_count = parameters.result_count,\n            _parameters$resultCou7 = parameters.resultCount,\n            resultCount = _parameters$resultCou7 === void 0 ? result_count : _parameters$resultCou7,\n            result_id = parameters.result_id,\n            _parameters$resultId8 = parameters.resultId,\n            resultId = _parameters$resultId8 === void 0 ? result_id : _parameters$resultId8,\n            result_page = parameters.result_page,\n            _parameters$resultPag7 = parameters.resultPage,\n            resultPage = _parameters$resultPag7 === void 0 ? result_page : _parameters$resultPag7;\n        var queryParams = {};\n        var bodyParams = {};\n\n        if (typeof quizId !== 'string') {\n          return new Error('\"quizId\" is a required parameter of type string');\n        }\n\n        if (typeof quizVersionId !== 'string') {\n          return new Error('\"quizVersionId\" is a required parameter of type string');\n        }\n\n        if (typeof quizSessionId !== 'string') {\n          return new Error('\"quizSessionId\" is a required parameter of type string');\n        }\n\n        if (typeof url !== 'string') {\n          return new Error('\"url\" is a required parameter of type string');\n        }\n\n        bodyParams.quiz_id = quizId;\n        bodyParams.quiz_version_id = quizVersionId;\n        bodyParams.quiz_session_id = quizSessionId;\n        bodyParams.url = url;\n\n        if (!helpers.isNil(section)) {\n          if (typeof section !== 'string') {\n            return new Error('\"section\" must be a string');\n          }\n\n          queryParams.section = section;\n          bodyParams.section = section;\n        }\n\n        if (!helpers.isNil(resultCount)) {\n          if (typeof resultCount !== 'number') {\n            return new Error('\"resultCount\" must be a number');\n          }\n\n          bodyParams.result_count = resultCount;\n        }\n\n        if (!helpers.isNil(resultId)) {\n          if (typeof resultId !== 'string') {\n            return new Error('\"resultId\" must be a string');\n          }\n\n          bodyParams.result_id = resultId;\n        }\n\n        if (!helpers.isNil(resultPage)) {\n          if (typeof resultPage !== 'number') {\n            return new Error('\"resultPage\" must be a number');\n          }\n\n          bodyParams.result_page = resultPage;\n        }\n\n        bodyParams.action_class = 'result_load';\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString(queryParams, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send quiz result click event to API\n     *\n     * @function trackQuizResultClick\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.quizId - Quiz identifier\n     * @param {string} parameters.quizVersionId - Quiz version identifier\n     * @param {string} parameters.quizSessionId - Quiz session identifier associated with this conversion event\n     * @param {string} [parameters.itemId] - Product item unique identifier (Either itemId or itemName is required)\n     * @param {string} [parameters.itemName] - Product item name\n     * @param {string} [parameters.section='Products'] - Index section\n     * @param {number} [parameters.resultCount] - Total number of results\n     * @param {number} [parameters.resultPage] - The page of the results\n     * @param {string} [parameters.resultId] - Quiz result identifier (returned in response from Constructor)\n     * @param {number} [parameters.resultPositionOnPage] - Position of clicked item\n     * @param {number} [parameters.numResultsPerPage] - Number of results shown\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User viewed a quiz results page\n     * @example\n     * constructorio.tracker.trackQuizResultClick(\n     *     {\n     *         quizId: 'coffee-quiz',\n     *         quizVersionId: '1231244',\n     *         quizSessionId: '123',\n     *         itemId: '123',\n     *         itemName: 'espresso'\n     *     },\n     * );\n     */\n    // eslint-disable-next-line complexity\n\n  }, {\n    key: \"trackQuizResultClick\",\n    value: function trackQuizResultClick(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/quiz_result_click?\");\n        var quiz_id = parameters.quiz_id,\n            _parameters$quizId2 = parameters.quizId,\n            quizId = _parameters$quizId2 === void 0 ? quiz_id : _parameters$quizId2,\n            quiz_version_id = parameters.quiz_version_id,\n            _parameters$quizVersi2 = parameters.quizVersionId,\n            quizVersionId = _parameters$quizVersi2 === void 0 ? quiz_version_id : _parameters$quizVersi2,\n            quiz_session_id = parameters.quiz_session_id,\n            _parameters$quizSessi2 = parameters.quizSessionId,\n            quizSessionId = _parameters$quizSessi2 === void 0 ? quiz_session_id : _parameters$quizSessi2,\n            item_id = parameters.item_id,\n            _parameters$itemId9 = parameters.itemId,\n            itemId = _parameters$itemId9 === void 0 ? item_id : _parameters$itemId9,\n            item_name = parameters.item_name,\n            _parameters$itemName8 = parameters.itemName,\n            itemName = _parameters$itemName8 === void 0 ? item_name : _parameters$itemName8,\n            result_count = parameters.result_count,\n            _parameters$resultCou8 = parameters.resultCount,\n            resultCount = _parameters$resultCou8 === void 0 ? result_count : _parameters$resultCou8,\n            result_id = parameters.result_id,\n            _parameters$resultId9 = parameters.resultId,\n            resultId = _parameters$resultId9 === void 0 ? result_id : _parameters$resultId9,\n            result_page = parameters.result_page,\n            _parameters$resultPag8 = parameters.resultPage,\n            resultPage = _parameters$resultPag8 === void 0 ? result_page : _parameters$resultPag8,\n            num_results_per_page = parameters.num_results_per_page,\n            _parameters$numResult7 = parameters.numResultsPerPage,\n            numResultsPerPage = _parameters$numResult7 === void 0 ? num_results_per_page : _parameters$numResult7,\n            result_position_on_page = parameters.result_position_on_page,\n            _parameters$resultPos4 = parameters.resultPositionOnPage,\n            resultPositionOnPage = _parameters$resultPos4 === void 0 ? result_position_on_page : _parameters$resultPos4,\n            _parameters$section8 = parameters.section,\n            section = _parameters$section8 === void 0 ? 'Products' : _parameters$section8;\n        var queryParams = {};\n        var bodyParams = {};\n\n        if (typeof quizId !== 'string') {\n          return new Error('\"quizId\" is a required parameter of type string');\n        }\n\n        if (typeof quizVersionId !== 'string') {\n          return new Error('\"quizVersionId\" is a required parameter of type string');\n        }\n\n        if (typeof quizSessionId !== 'string') {\n          return new Error('\"quizSessionId\" is a required parameter of type string');\n        }\n\n        if (typeof itemId !== 'string' && typeof itemName !== 'string') {\n          return new Error('\"itemId\" or \"itemName\" is a required parameter of type string');\n        }\n\n        bodyParams.quiz_id = quizId;\n        bodyParams.quiz_version_id = quizVersionId;\n        bodyParams.quiz_session_id = quizSessionId;\n\n        if (!helpers.isNil(itemId)) {\n          if (typeof itemId !== 'string') {\n            return new Error('\"itemId\" must be a string');\n          }\n\n          bodyParams.item_id = itemId;\n        }\n\n        if (!helpers.isNil(itemName)) {\n          if (typeof itemName !== 'string') {\n            return new Error('\"itemName\" must be a string');\n          }\n\n          bodyParams.item_name = itemName;\n        }\n\n        if (!helpers.isNil(section)) {\n          if (typeof section !== 'string') {\n            return new Error('\"section\" must be a string');\n          }\n\n          queryParams.section = section;\n        }\n\n        if (!helpers.isNil(resultCount)) {\n          if (typeof resultCount !== 'number') {\n            return new Error('\"resultCount\" must be a number');\n          }\n\n          bodyParams.result_count = resultCount;\n        }\n\n        if (!helpers.isNil(resultId)) {\n          if (typeof resultId !== 'string') {\n            return new Error('\"resultId\" must be a string');\n          }\n\n          bodyParams.result_id = resultId;\n        }\n\n        if (!helpers.isNil(resultPage)) {\n          if (typeof resultPage !== 'number') {\n            return new Error('\"resultPage\" must be a number');\n          }\n\n          bodyParams.result_page = resultPage;\n        }\n\n        if (!helpers.isNil(numResultsPerPage)) {\n          if (typeof numResultsPerPage !== 'number') {\n            return new Error('\"numResultsPerPage\" must be a number');\n          }\n\n          bodyParams.num_results_per_page = numResultsPerPage;\n        }\n\n        if (!helpers.isNil(resultPositionOnPage)) {\n          if (typeof resultPositionOnPage !== 'number') {\n            return new Error('\"resultPositionOnPage\" must be a number');\n          }\n\n          bodyParams.result_position_on_page = resultPositionOnPage;\n        }\n\n        bodyParams.action_class = 'result_click';\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString(queryParams, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Send quiz conversion event to API\n     *\n     * @function trackQuizConversion\n     * @param {object} parameters - Additional parameters to be sent with request\n     * @param {string} parameters.quizId - Quiz identifier\n     * @param {string} parameters.quizVersionId - Quiz version identifier\n     * @param {string} parameters.quizSessionId - Quiz session identifier associated with this conversion event\n     * @param {string} [parameters.itemId] - Product item unique identifier (Either itemId or itemName is required)\n     * @param {string} [parameters.itemName] - Product item name\n     * @param {string} [parameters.variationId] - Product item variation unique identifier\n     * @param {string} [parameters.revenue] - Sale price if available, otherwise the regular (retail) price of item\n     * @param {string} [parameters.section='Products'] - Index section\n     * @param {string} [parameters.type='add_to_cart'] - Conversion type\n     * @param {boolean} [parameters.isCustomType] - Specify if type is custom conversion type\n     * @param {string} [parameters.displayName] - Display name for the custom conversion type\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {(true|Error)}\n     * @description User viewed a quiz results page\n     * @example\n     * constructorio.tracker.trackQuizConversion(\n     *     {\n     *         quizId: 'coffee-quiz',\n     *         quizVersionId: '1231244',\n     *         quizSessionId: '3123',\n     *         itemName: 'espresso',\n     *         variationId: '167',\n     *         type: 'add_to_cart',\n     *         revenue: '1.0'\n     *     },\n     * );\n     */\n    // eslint-disable-next-line complexity\n\n  }, {\n    key: \"trackQuizConversion\",\n    value: function trackQuizConversion(parameters) {\n      var networkParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      // Ensure parameters are provided (required)\n      if (parameters && (0, _typeof2[\"default\"])(parameters) === 'object' && !Array.isArray(parameters)) {\n        var requestPath = \"\".concat(this.options.serviceUrl, \"/v2/behavioral_action/quiz_conversion?\");\n        var quiz_id = parameters.quiz_id,\n            _parameters$quizId3 = parameters.quizId,\n            quizId = _parameters$quizId3 === void 0 ? quiz_id : _parameters$quizId3,\n            quiz_version_id = parameters.quiz_version_id,\n            _parameters$quizVersi3 = parameters.quizVersionId,\n            quizVersionId = _parameters$quizVersi3 === void 0 ? quiz_version_id : _parameters$quizVersi3,\n            quiz_session_id = parameters.quiz_session_id,\n            _parameters$quizSessi3 = parameters.quizSessionId,\n            quizSessionId = _parameters$quizSessi3 === void 0 ? quiz_session_id : _parameters$quizSessi3,\n            item_id = parameters.item_id,\n            _parameters$itemId10 = parameters.itemId,\n            itemId = _parameters$itemId10 === void 0 ? item_id : _parameters$itemId10,\n            item_name = parameters.item_name,\n            _parameters$itemName9 = parameters.itemName,\n            itemName = _parameters$itemName9 === void 0 ? item_name : _parameters$itemName9,\n            variation_id = parameters.variation_id,\n            _parameters$variation9 = parameters.variationId,\n            variationId = _parameters$variation9 === void 0 ? variation_id : _parameters$variation9,\n            revenue = parameters.revenue,\n            _parameters$section9 = parameters.section,\n            section = _parameters$section9 === void 0 ? 'Products' : _parameters$section9,\n            type = parameters.type,\n            is_custom_type = parameters.is_custom_type,\n            _parameters$isCustomT2 = parameters.isCustomType,\n            isCustomType = _parameters$isCustomT2 === void 0 ? is_custom_type : _parameters$isCustomT2,\n            display_name = parameters.display_name,\n            _parameters$displayNa4 = parameters.displayName,\n            displayName = _parameters$displayNa4 === void 0 ? display_name : _parameters$displayNa4;\n        var queryParams = {};\n        var bodyParams = {}; // Ensure required parameters provided\n\n        if (typeof quizId !== 'string') {\n          return new Error('\"quizId\" is a required parameter of type string');\n        }\n\n        if (typeof quizVersionId !== 'string') {\n          return new Error('\"quizVersionId\" is a required parameter of type string');\n        }\n\n        if (typeof quizSessionId !== 'string') {\n          return new Error('\"quizSessionId\" is a required parameter of type string');\n        }\n\n        if (typeof itemId !== 'string' && typeof itemName !== 'string') {\n          return new Error('\"itemId\" or \"itemName\" is a required parameter of type string');\n        }\n\n        bodyParams.quiz_id = quizId;\n        bodyParams.quiz_version_id = quizVersionId;\n        bodyParams.quiz_session_id = quizSessionId;\n\n        if (!helpers.isNil(itemId)) {\n          if (typeof itemId !== 'string') {\n            return new Error('\"itemId\" must be a string');\n          }\n\n          bodyParams.item_id = itemId;\n        }\n\n        if (!helpers.isNil(itemName)) {\n          if (typeof itemName !== 'string') {\n            return new Error('\"itemName\" must be a string');\n          }\n\n          bodyParams.item_name = itemName;\n        }\n\n        if (!helpers.isNil(variationId)) {\n          if (typeof variationId !== 'string') {\n            return new Error('\"variationId\" must be a string');\n          }\n\n          bodyParams.variation_id = variationId;\n        }\n\n        if (!helpers.isNil(revenue)) {\n          if (typeof revenue !== 'string') {\n            return new Error('\"revenue\" must be a string');\n          }\n\n          bodyParams.revenue = revenue;\n        }\n\n        if (!helpers.isNil(section)) {\n          if (typeof section !== 'string') {\n            return new Error('\"section\" must be a string');\n          }\n\n          bodyParams.section = section;\n        }\n\n        if (!helpers.isNil(type)) {\n          if (typeof type !== 'string') {\n            return new Error('\"type\" must be a string');\n          }\n\n          bodyParams.type = type;\n        }\n\n        if (!helpers.isNil(isCustomType)) {\n          if (typeof isCustomType !== 'boolean') {\n            return new Error('\"isCustomType\" must be a boolean');\n          }\n\n          bodyParams.is_custom_type = isCustomType;\n        }\n\n        if (!helpers.isNil(displayName)) {\n          if (typeof displayName !== 'string') {\n            return new Error('\"displayName\" must be a string');\n          }\n\n          bodyParams.display_name = displayName;\n        }\n\n        bodyParams.action_class = 'conversion';\n        var requestURL = \"\".concat(requestPath).concat(applyParamsAsString(queryParams, this.options));\n        var requestMethod = 'POST';\n        var requestBody = applyParams(bodyParams, _objectSpread(_objectSpread({}, this.options), {}, {\n          requestMethod: requestMethod\n        }));\n        this.requests.queue(requestURL, requestMethod, requestBody, networkParameters);\n        this.requests.send();\n        return true;\n      }\n\n      this.requests.send();\n      return new Error('parameters are required of type object');\n    }\n    /**\n     * Subscribe to success or error messages emitted by tracking requests\n     *\n     * @function on\n     * @param {string} messageType - Type of message to listen for ('success' or 'error')\n     * @param {function} callback - Callback to be invoked when message received\n     * @returns {(true|Error)}\n     * @example\n     * constructorio.tracker.on('error', (data) => {\n     *     // Handle tracking error\n     * });\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(messageType, callback) {\n      if (messageType !== 'success' && messageType !== 'error') {\n        return new Error('messageType must be a string of value \"success\" or \"error\"');\n      }\n\n      if (!callback || typeof callback !== 'function') {\n        return new Error('callback is required and must be a function');\n      }\n\n      this.eventemitter.on(messageType, callback);\n      return true;\n    }\n  }]);\n  return Tracker;\n}(); // Exposed for testing\n\n\nTracker.RequestQueue = RequestQueue;\nmodule.exports = Tracker;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\n/* eslint-disable object-curly-newline, no-underscore-dangle */\nvar EventDispatcher = require('../utils/event-dispatcher');\n\nvar helpers = require('../utils/helpers'); // Create URL from supplied quizId and parameters\n\n\nfunction createQuizUrl(quizId, parameters, options, path) {\n  var apiKey = options.apiKey,\n      clientId = options.clientId,\n      sessionId = options.sessionId,\n      segments = options.segments,\n      userId = options.userId,\n      version = options.version,\n      quizzesServiceUrl = options.quizzesServiceUrl;\n  var queryParams = {\n    c: version\n  };\n  var answersParamString = '';\n  queryParams.key = apiKey;\n  queryParams.i = clientId;\n  queryParams.s = sessionId; // Pull user segments from options\n\n  if (segments && segments.length) {\n    queryParams.us = segments;\n  } // Pull user id from options and ensure string\n\n\n  if (userId) {\n    queryParams.ui = String(userId);\n  } // Validate quiz id is provided\n\n\n  if (!quizId || typeof quizId !== 'string') {\n    throw new Error('quizId is a required parameter of type string');\n  }\n\n  if (path === 'results' && ((0, _typeof2[\"default\"])(parameters.answers) !== 'object' || !Array.isArray(parameters.answers) || parameters.answers.length === 0)) {\n    throw new Error('answers is a required parameter of type array');\n  }\n\n  if (parameters) {\n    var section = parameters.section,\n        answers = parameters.answers,\n        quizSessionId = parameters.quizSessionId,\n        quizVersionId = parameters.quizVersionId,\n        page = parameters.page,\n        resultsPerPage = parameters.resultsPerPage,\n        filters = parameters.filters; // Pull section from parameters\n\n    if (section) {\n      queryParams.section = section;\n    } // Pull quiz_version_id from parameters\n\n\n    if (quizVersionId) {\n      queryParams.quiz_version_id = quizVersionId;\n    } // Pull quiz_session_id from parameters\n\n\n    if (quizSessionId) {\n      queryParams.quiz_session_id = quizSessionId;\n    } // Pull a (answers) from parameters and transform\n\n\n    if (answers && answers.length) {\n      answersParamString = \"&\".concat(helpers.stringify({\n        a: answers.map(function (ans) {\n          return (0, _toConsumableArray2[\"default\"])(ans).join(',');\n        })\n      }));\n    } // Pull page from parameters\n\n\n    if (!helpers.isNil(page)) {\n      queryParams.page = page;\n    } // Pull results per page from parameters\n\n\n    if (!helpers.isNil(resultsPerPage)) {\n      queryParams.num_results_per_page = resultsPerPage;\n    }\n\n    if (filters) {\n      queryParams.filters = filters;\n    }\n  }\n\n  queryParams._dt = Date.now();\n  queryParams = helpers.cleanParams(queryParams);\n  var queryString = helpers.stringify(queryParams);\n  return \"\".concat(quizzesServiceUrl, \"/v1/quizzes/\").concat(encodeURIComponent(quizId), \"/\").concat(encodeURIComponent(path), \"/?\").concat(queryString).concat(answersParamString);\n}\n/**\n * Interface to quiz related API calls\n *\n * @module quizzes\n * @inner\n * @returns {object}\n */\n\n\nvar Quizzes = /*#__PURE__*/function () {\n  function Quizzes(options) {\n    (0, _classCallCheck2[\"default\"])(this, Quizzes);\n    this.options = options || {};\n    this.eventDispatcher = new EventDispatcher(options.eventDispatcher);\n  }\n  /**\n   * Retrieve next question from API\n   *\n   * @function getQuizNextQuestion\n   * @description Retrieve next question from Constructor.io API\n   * @param {string} quizId - The identifier of the quiz\n   * @param {string} [parameters] - Additional parameters to refine result set\n   * @param {string} [parameters.section] - Product catalog section\n   * @param {array} [parameters.answers] - An array of answers in the format [[1,2],[1]]\n   * @param {string} [parameters.quizVersionId] - Version identifier for the quiz. Version ID will be returned with the first request and it should be passed with subsequent requests. More information can be found: https://docs.constructor.io/rest_api/quiz/using_quizzes/#quiz-versioning\n   * @param {string} [parameters.quizSessionId] - Session identifier for the quiz. Session ID will be returned with the first request and it should be passed with subsequent requests. More information can be found: https://docs.constructor.io/rest_api/quiz/using_quizzes/#quiz-sessions\n   * @param {object} [networkParameters] - Parameters relevant to the network request\n   * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n   * @returns {Promise}\n   * @see https://docs.constructor.io/rest_api/quiz/using_quizzes/#answering-a-quiz\n   * @example\n   * constructorio.quizzes.getQuizNextQuestion('quizId', {\n   *    answers: [[1,2],[1]],\n   *    section: '123',\n   *    quizVersionId: '123',\n   *    quizSessionId: '1234',\n   * });\n   */\n\n\n  (0, _createClass2[\"default\"])(Quizzes, [{\n    key: \"getQuizNextQuestion\",\n    value: function getQuizNextQuestion(quizId, parameters) {\n      var _this = this;\n\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var controller = new AbortController();\n      var signal = controller.signal;\n\n      try {\n        requestUrl = createQuizUrl(quizId, parameters, this.options, 'next');\n      } catch (e) {\n        return Promise.reject(e);\n      } // Handle network timeout if specified\n\n\n      helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.quiz_version_id) {\n          _this.eventDispatcher.queue('quizzes.getQuizNextQuestion.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getQuizNextQuestion response data is malformed');\n      });\n    }\n    /**\n     * Retrieves filter expression and recommendation URL from given answers\n     *\n     * @function getQuizResults\n     * @description Retrieve quiz recommendation and filter expression from Constructor.io API\n     * @param {string} quizId - The identifier of the quiz\n     * @param {string} parameters - Additional parameters to refine result set\n     * @param {array} parameters.answers - An array of answers in the format [[1,2],[1]]\n     * @param {string} [parameters.section] - Product catalog section\n     * @param {string} [parameters.quizVersionId] - Version identifier for the quiz. Version ID will be returned with the first request and it should be passed with subsequent requests. More information can be found: https://docs.constructor.io/rest_api/quiz/using_quizzes/#quiz-versioning\n     * @param {string} [parameters.quizSessionId] - Session identifier for the quiz. Session ID will be returned with the first request and it should be passed with subsequent requests. More information can be found: https://docs.constructor.io/rest_api/quiz/using_quizzes/#quiz-sessions\n     * @param {number} [parameters.page] - The page number of the results\n     * @param {number} [parameters.resultsPerPage] - The number of results per page to return\n     * @param {object} [parameters.filters] - Key / value mapping (dictionary) of filters used to refine results\n     * @param {object} [networkParameters] - Parameters relevant to the network request\n     * @param {number} [networkParameters.timeout] - Request timeout (in milliseconds)\n     * @returns {Promise}\n     * @see https://docs.constructor.io/rest_api/quiz/using_quizzes/#completing-the-quiz\n     * @example\n     * constructorio.quizzes.getQuizResults('quizId', {\n     *    answers: [[1,2],[1]],\n     *    section: '123',\n     *    quizVersionId: '123',\n     *    quizSessionId: '234'\n     * });\n     */\n\n  }, {\n    key: \"getQuizResults\",\n    value: function getQuizResults(quizId, parameters) {\n      var _this2 = this;\n\n      var networkParameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var requestUrl;\n      var fetch = this.options.fetch;\n      var controller = new AbortController();\n      var signal = controller.signal;\n\n      try {\n        requestUrl = createQuizUrl(quizId, parameters, this.options, 'results');\n      } catch (e) {\n        return Promise.reject(e);\n      } // Handle network timeout if specified\n\n\n      helpers.applyNetworkTimeout(this.options, networkParameters, controller);\n      return fetch(requestUrl, {\n        signal: signal\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return helpers.throwHttpErrorFromResponse(new Error(), response);\n      }).then(function (json) {\n        if (json.quiz_version_id) {\n          _this2.eventDispatcher.queue('quizzes.getQuizResults.completed', json);\n\n          return json;\n        }\n\n        throw new Error('getQuizResults response data is malformed');\n      });\n    }\n  }]);\n  return Quizzes;\n}();\n\nmodule.exports = Quizzes;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\n/* eslint-disable camelcase, no-unneeded-ternary, max-len, complexity */\nvar ConstructorioID = require('@constructor-io/constructorio-id');\n\nvar fetchPonyfill = require('fetch-ponyfill'); // Modules\n\n\nvar Search = require('./modules/search');\n\nvar Browse = require('./modules/browse');\n\nvar Autocomplete = require('./modules/autocomplete');\n\nvar Recommendations = require('./modules/recommendations');\n\nvar Tracker = require('./modules/tracker');\n\nvar EventDispatcher = require('./utils/event-dispatcher');\n\nvar helpers = require('./utils/helpers');\n\nvar _require = require('../package.json'),\n    packageVersion = _require.version;\n\nvar Quizzes = require('./modules/quizzes'); // Compute package version string\n\n\nvar computePackageVersion = function computePackageVersion() {\n  var versionPrefix = 'ciojs-client-';\n  var versionModifiers = [];\n\n  if (!helpers.canUseDOM()) {\n    versionModifiers.push('domless');\n  }\n\n  if (typeof process !== 'undefined' && typeof process.env !== 'undefined' && process.env.BUNDLED) {\n    versionModifiers.push('bundled');\n  }\n\n  return \"\".concat(versionPrefix).concat(versionModifiers.join('-')).concat(versionModifiers.length ? '-' : '').concat(packageVersion);\n};\n/**\n * Class to instantiate the ConstructorIO client.\n */\n\n\nvar ConstructorIO = /*#__PURE__*/function () {\n  /**\n   * @param {object} parameters - Parameters for client instantiation\n   * @param {string} parameters.apiKey - Constructor.io API key\n   * @param {string} [parameters.serviceUrl='https://ac.cnstrc.com'] - API URL endpoint\n   * @param {string} [parameters.quizzesServiceUrl='https://quizzes.cnstrc.com'] - Quizzes API URL endpoint\n   * @param {array} [parameters.segments] - User segments\n   * @param {object} [parameters.testCells] - User test cells\n   * @param {string} [parameters.clientId] - Client ID, defaults to value supplied by 'constructorio-id' module\n   * @param {string} [parameters.sessionId] - Session ID, defaults to value supplied by 'constructorio-id' module\n   * @param {string} [parameters.userId] - User ID\n   * @param {function} [parameters.fetch] - If supplied, will be utilized for requests rather than default Fetch API\n   * @param {number} [parameters.trackingSendDelay=250] - Amount of time to wait before sending tracking events (in ms)\n   * @param {boolean} [parameters.sendReferrerWithTrackingEvents=true] - Indicates if the referrer is sent with tracking events\n   * @param {boolean} [parameters.sendTrackingEvents=false] - Indicates if tracking events should be dispatched\n   * @param {object} [parameters.idOptions] - Options object to be supplied to 'constructorio-id' module\n   * @param {object} [parameters.eventDispatcher] - Options related to 'EventDispatcher' class\n   * @param {boolean} [parameters.eventDispatcher.enabled=true] - Determine if events should be dispatched\n   * @param {boolean} [parameters.eventDispatcher.waitForBeacon=true] - Wait for beacon before dispatching events\n   * @param {object} [parameters.networkParameters] - Parameters relevant to network requests\n   * @param {number} [parameters.networkParameters.timeout] - Request timeout (in milliseconds) - may be overridden within individual method calls\n   * @property {object} search - Interface to {@link module:search}\n   * @property {object} browse - Interface to {@link module:browse}\n   * @property {object} autocomplete - Interface to {@link module:autocomplete}\n   * @property {object} recommendations - Interface to {@link module:recommendations}\n   * @property {object} tracker - Interface to {@link module:tracker}\n   * @property {object} quizzes - Interface to {@link module:quizzes}\n   * @returns {class}\n   */\n  function ConstructorIO() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck2[\"default\"])(this, ConstructorIO);\n    var apiKey = options.apiKey,\n        versionFromOptions = options.version,\n        serviceUrl = options.serviceUrl,\n        quizzesServiceUrl = options.quizzesServiceUrl,\n        segments = options.segments,\n        testCells = options.testCells,\n        clientId = options.clientId,\n        sessionId = options.sessionId,\n        userId = options.userId,\n        fetch = options.fetch,\n        trackingSendDelay = options.trackingSendDelay,\n        sendReferrerWithTrackingEvents = options.sendReferrerWithTrackingEvents,\n        sendTrackingEvents = options.sendTrackingEvents,\n        eventDispatcher = options.eventDispatcher,\n        idOptions = options.idOptions,\n        beaconMode = options.beaconMode,\n        networkParameters = options.networkParameters;\n\n    if (!apiKey || typeof apiKey !== 'string') {\n      throw new Error('API key is a required parameter of type string');\n    }\n\n    var session_id;\n    var client_id;\n    var versionFromGlobal = typeof global !== 'undefined' && global.CLIENT_VERSION; // Initialize ID session if DOM context is available\n\n    if (helpers.canUseDOM()) {\n      var _ConstructorioID = new ConstructorioID(idOptions || {});\n\n      session_id = _ConstructorioID.session_id;\n      client_id = _ConstructorioID.client_id;\n    } else {\n      // Validate session ID is provided\n      if (!sessionId || typeof sessionId !== 'number') {\n        throw new Error('sessionId is a required user parameter of type number');\n      } // Validate client ID is provided\n\n\n      if (!clientId || typeof clientId !== 'string') {\n        throw new Error('clientId is a required user parameter of type string');\n      }\n    }\n\n    this.options = {\n      apiKey: apiKey,\n      version: versionFromOptions || versionFromGlobal || computePackageVersion(),\n      serviceUrl: serviceUrl && serviceUrl.replace(/\\/$/, '') || 'https://ac.cnstrc.com',\n      quizzesServiceUrl: quizzesServiceUrl && quizzesServiceUrl.replace(/\\/$/, '') || 'https://quizzes.cnstrc.com',\n      sessionId: sessionId || session_id,\n      clientId: clientId || client_id,\n      userId: userId,\n      segments: segments,\n      testCells: testCells,\n      fetch: fetch || fetchPonyfill({\n        Promise: Promise\n      }).fetch,\n      trackingSendDelay: trackingSendDelay,\n      sendTrackingEvents: sendTrackingEvents,\n      sendReferrerWithTrackingEvents: sendReferrerWithTrackingEvents,\n      eventDispatcher: eventDispatcher,\n      beaconMode: beaconMode === false ? false : true,\n      // Defaults to 'true',\n      networkParameters: networkParameters || {}\n    }; // Expose global modules\n\n    this.search = new Search(this.options);\n    this.browse = new Browse(this.options);\n    this.autocomplete = new Autocomplete(this.options);\n    this.recommendations = new Recommendations(this.options);\n    this.tracker = new Tracker(this.options);\n    this.quizzes = new Quizzes(this.options); // Dispatch initialization event\n\n    new EventDispatcher(options.eventDispatcher).queue('instantiated', this.options);\n  }\n  /**\n   * Sets the client options\n   *\n   * @param {string} apiKey - Constructor.io API key\n   * @param {array} [segments] - User segments\n   * @param {object} [testCells] - User test cells\n   * @param {string} [userId] - User ID\n   */\n\n\n  (0, _createClass2[\"default\"])(ConstructorIO, [{\n    key: \"setClientOptions\",\n    value: function setClientOptions(options) {\n      if (Object.keys(options).length) {\n        var apiKey = options.apiKey,\n            segments = options.segments,\n            testCells = options.testCells,\n            userId = options.userId;\n\n        if (apiKey) {\n          this.options.apiKey = apiKey;\n        }\n\n        if (segments) {\n          this.options.segments = segments;\n        }\n\n        if (testCells) {\n          this.options.testCells = testCells;\n        }\n\n        if (userId) {\n          this.options.userId = userId;\n        }\n      }\n    }\n  }]);\n  return ConstructorIO;\n}(); // Exposed for testing\n\n\nConstructorIO.Tracker = Tracker; // Expose on window object if available\n\nif (helpers.canUseDOM()) {\n  window.ConstructorioClient = ConstructorIO;\n}\n\nmodule.exports = ConstructorIO;","import ConstructorIOClient from '@constructor-io/constructorio-client-javascript';\nimport { ConstructorClientOptions } from '@constructor-io/constructorio-client-javascript/lib/types';\nimport { useMemo } from 'react';\n\nexport type CioClientConfig = { apiKey?: string };\ntype UseCioClient = (\n  apiKey: string,\n  options?: Omit<ConstructorClientOptions, 'apiKey' | 'sendTrackingEvents'>,\n) => ConstructorIOClient | never;\n\nconst useCioClient: UseCioClient = (apiKey, options?) => {\n  if (!apiKey) {\n    throw new Error('Api Key required');\n  }\n\n  const memoizedCioClient = useMemo(\n    () =>\n      new ConstructorIOClient({\n        apiKey,\n        sendTrackingEvents: true,\n        ...options,\n      }),\n    [apiKey, options],\n  );\n  return memoizedCioClient!;\n};\n\nexport default useCioClient;\n"],"names":["DEMO_API_KEY","_interopRequireDefault","obj","module","_classCallCheck","instance","Constructor","_typeof","require$$0","_toPrimitive","input","hint","prim","res","toPrimitive","require$$1","_toPropertyKey","arg","key","toPropertyKey","_defineProperties","target","props","i","descriptor","_createClass","protoProps","staticProps","e","r","t","n","o","a","c","b","ConstructorioID","options","defaults","persisted_id","name","value","expires","cookie_data","cookieName","cookieBits","thisCookie","decodedCookie","client_id","cookie_persisted_client_id","local_persisted_client_id","v","data","localStorage","cookie_persisted_session_data","local_persisted_session_data","now","thirtyMinutes","sessionData","sessionId","sessionDataId","require","global","fetchPonyfill","Promise","XMLHttpRequest","globalThis","factory","exports","support","isDataView","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","items","iterator","Headers","headers","header","oldValue","callback","thisArg","consumed","body","fileReaderReady","reader","resolve","reject","readBlobAsArrayBuffer","blob","promise","readBlobAsText","readArrayBufferAsText","buf","view","chars","bufferClone","Body","rejected","isConsumed","decode","methods","normalizeMethod","method","upcased","Request","reParamSearch","reQueryString","form","bytes","split","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","Response","bodyInit","response","redirectStatuses","url","status","message","error","fetch","init","request","xhr","abortXhr","fixUrl","this","CRC32","signed_crc_table","table","T0","slice_by_16_tables","T","out","TT","T1","T2","T3","T4","T5","T6","T7","T8","T9","Ta","Tb","Tc","Td","Te","Tf","crc32_bstr","bstr","seed","C","L","crc32_buf","B","crc32_str","str","d","window","define","_","api","p","fn","s","area","string","id","namespace","store","overwrite","testKey","singleArea","delim","ns","force","fill","m","fillList","k","list","alt","fillObj","all","val","ret","replacer","changed","type","store_overflow","_set","_get","_remove","_key","_length","_clear","create","overflow","l","j","length","store_1","_typeof2","require$$2","require$$3","purchaseEventStorageKey","utils","paramsObj","cleanedParams","paramKey","paramValue","json","eventType","useCapture","event","eventName","detail","evt","orderId","orderIdHash","purchaseEventStorage","networkParameters","controller","optionsTimeout","networkParametersTimeout","timeout","object","prefix","objectType","allValues","encodedKey","stringifiedValue","nextPrefix","camelCasedStr","camelCasedObj","toRecurse","snakeCasedObj","newKey","helpers","_classCallCheck2","_createClass2","EventDispatcher","_this","item","eventDispatcher","require$$4","createSearchUrl","query","parameters","isVoiceSearch","apiKey","version","serviceUrl","clientId","userId","segments","testCells","queryParams","testCellKey","offset","page","resultsPerPage","filters","sortBy","sortOrder","section","fmtOptions","hiddenFields","hiddenFacets","variationsMap","qsParam","preFilterExpression","queryString","searchUrl","Search","requestUrl","signal","result","_this2","search","_defineProperty","_defineProperty2","ownKeys","enumerableOnly","keys","symbols","sym","_objectSpread","source","require$$5","createQueryParams","createBrowseUrlFromFilter","filterName","filterValue","createBrowseUrlFromIDs","ids","createBrowseUrlForFacets","createBrowseUrlForFacetOptions","facetName","Browse","itemIds","_this3","_this4","_this5","browse","_require","throwHttpErrorFromResponse","cleanParams","applyNetworkTimeout","trimNonBreakingSpaces","encodeURIComponentRFC3986","stringify","createAutocompleteUrl","numResults","resultsPerSection","cleanedQuery","Autocomplete","sectionKeys","sectionItems","autocomplete","createRecommendationsUrl","podId","term","Recommendations","recommendations","R","ReflectApply","receiver","args","ReflectOwnKeys","ProcessEmitWarning","warning","NumberIsNaN","EventEmitter","eventsModule","once","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","doError","events","er","err","handler","len","listeners","arrayClone","_addListener","prepend","existing","w","onceWrapper","_onceWrap","state","wrapped","position","originalListener","spliceOne","_listeners","unwrap","evlistener","unwrapListeners","emitter","listenerCount","arr","copy","index","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","wrapListener","botlist","botList","storageKey","humanEvents","HumanityCheck","remove","_helpers$getNavigator","userAgent","webdriver","botRegex","humanityCheck","requestTTL","RequestQueue","eventemitter","queue","nextInQueue","_nextInQueue","dtMatch","requestOriginTime","localStorageQueue","requestQueue","require$$6","require$$7","applyParams","requestMethod","beaconMode","_helpers$getWindowLoc","host","pathname","sendReferrerWithTrackingEvents","aggregateParams","applyParamsAsString","Tracker","userInput","baseUrl","bodyParams","networkParametersNew","userInputNew","requestBody","requestUrlPath","item_name","item_id","customer_id","_parameters$customerI","customerId","variation_id","_parameters$itemName","itemName","_parameters$itemId","itemId","_parameters$variation","variationId","requestURL","original_query","_parameters$originalQ","originalQuery","user_input","_parameters$userInput","original_section","_parameters$section","tr","group_id","_parameters$groupId","groupId","_parameters$itemId2","_parameters$variation2","_parameters$originalQ2","_parameters$originalS","originalSection","_parameters$groupId2","display_name","_parameters$displayNa","displayName","searchTerm","_parameters$originalQ3","_parameters$userInput2","_parameters$groupId3","_parameters$originalQ4","_parameters$groupId4","_parameters$displayNa2","num_results","_parameters$numResult","result_count","_parameters$resultCou","resultCount","customer_ids","item_ids","_parameters$items","result_page","_parameters$resultPag","resultPage","result_id","_parameters$resultId","resultId","sort_order","_parameters$sortOrder","sort_by","_parameters$sortBy","selected_filters","_parameters$selectedF","selectedFilters","transformedItems","_parameters$numResult2","_parameters$customerI2","customerIds","_parameters$itemIds","customerIDs","_parameters$itemId3","_parameters$itemName2","_parameters$variation3","_parameters$resultId2","_parameters$resultCou2","_parameters$resultPag2","result_position_on_page","_parameters$resultPos","resultPositionOnPage","num_results_per_page","_parameters$numResult3","numResultsPerPage","_parameters$selectedF2","_parameters$itemName3","_parameters$itemId4","_parameters$customerI3","_parameters$variation4","_parameters$resultId3","item_is_convertible","_parameters$itemIsCon","itemIsConvertible","requestPath","_parameters$itemName4","_parameters$customerI4","_parameters$itemId5","_parameters$variation5","revenue","_parameters$section2","_parameters$displayNa3","is_custom_type","_parameters$isCustomT","isCustomType","order_id","_parameters$orderId","_parameters$resultCou3","_parameters$resultPag3","_parameters$resultId4","pod_id","_parameters$podId","num_results_viewed","_parameters$numResult4","numResultsViewed","_parameters$variation6","_parameters$section3","_parameters$resultId5","_parameters$resultCou4","_parameters$resultPag4","_parameters$resultPos2","_parameters$numResult5","_parameters$podId2","strategy_id","_parameters$strategyI","strategyId","_parameters$itemId6","_parameters$itemName5","_parameters$section4","_parameters$resultCou5","_parameters$resultPag5","_parameters$resultId6","_parameters$selectedF3","_parameters$sortOrder2","_parameters$sortBy2","filter_name","_parameters$filterNam","filter_value","_parameters$filterVal","_parameters$section5","_parameters$variation7","_parameters$resultId7","_parameters$resultCou6","_parameters$resultPag6","_parameters$resultPos3","_parameters$numResult6","_parameters$selectedF4","_parameters$filterNam2","_parameters$filterVal2","_parameters$customerI5","_parameters$itemId7","_parameters$itemName6","_parameters$itemId8","_parameters$itemName7","_parameters$variation8","_parameters$section6","quiz_id","_parameters$quizId","quizId","quiz_version_id","_parameters$quizVersi","quizVersionId","quiz_session_id","_parameters$quizSessi","quizSessionId","_parameters$section7","_parameters$resultCou7","_parameters$resultId8","_parameters$resultPag7","_parameters$quizId2","_parameters$quizVersi2","_parameters$quizSessi2","_parameters$itemId9","_parameters$itemName8","_parameters$resultCou8","_parameters$resultId9","_parameters$resultPag8","_parameters$numResult7","_parameters$resultPos4","_parameters$section8","_parameters$quizId3","_parameters$quizVersi3","_parameters$quizSessi3","_parameters$itemId10","_parameters$itemName9","_parameters$variation9","_parameters$section9","_parameters$isCustomT2","_parameters$displayNa4","messageType","tracker","_arrayLikeToArray","arr2","arrayLikeToArray","_arrayWithoutHoles","_iterableToArray","iter","_unsupportedIterableToArray","minLen","_nonIterableSpread","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_toConsumableArray","_toConsumableArray2","createQuizUrl","path","quizzesServiceUrl","answersParamString","answers","ans","Quizzes","quizzes","require$$8","require$$9","require$$10","require$$11","require$$12","packageVersion","require$$13","computePackageVersion","versionPrefix","versionModifiers","ConstructorIO","versionFromOptions","trackingSendDelay","sendTrackingEvents","idOptions","session_id","versionFromGlobal","_ConstructorioID","constructorio","useCioClient","useMemo","ConstructorIOClient"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]}